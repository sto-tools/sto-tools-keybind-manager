const e="v2025.06.20-preview-1",t={};function a(e,a){if(t[e])for(const n of t[e])try{n(a)}catch(e){console.error(e)}}var n={on:function(e,a){t[e]||(t[e]=new Set),t[e].add(a)},off:function(e,a){t[e]&&t[e].delete(a)},emit:a,onDom:function(e,t,n,i){if("string"==typeof e&&(e=document.getElementById(e)),!e||!e.addEventListener)return()=>{};if("function"==typeof n&&(i=n,n=t),n||(n=t),i){const o=e=>{try{i(e)}catch(e){console.error(e)}a(n,e)};return e.addEventListener(t,o),()=>{e.removeEventListener(t,o)}}{const i=e=>a(n,e);return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}}};const i={commands:{targeting:{name:"Targeting",icon:"fas fa-crosshairs",description:"Target selection and management",commands:{target:{name:"Target by Name",command:"Target",description:"Target entity by name (requires quotes)",syntax:'Target "EntityName"',icon:"üéØ",customizable:!0,parameters:{entityName:{type:"text",default:"EntityName",placeholder:"Enter entity name"}}},target_enemy_near:{name:"Target Nearest Enemy",command:"Target_Enemy_Near",description:"Target the nearest enemy in view",syntax:"Target_Enemy_Near",icon:"üéØ"},target_friend_near:{name:"Target Nearest Friend",command:"Target_Friend_Near",description:"Target the nearest friendly entity",syntax:"Target_Friend_Near",icon:"ü§ù"},target_self:{name:"Target Self",command:"Target_Self",description:"Target your own ship/character",syntax:"Target_Self",icon:"üë§"},target_clear:{name:"Clear Target",command:"Target_Clear",description:"Remove current target lock",syntax:"Target_Clear",icon:"‚ùå"},target_teammate_1:{name:"Target Teammate 1",command:"Target_Teammate 1",description:"Target first team member",syntax:"Target_Teammate 1",icon:"üë•"},target_teammate_2:{name:"Target Teammate 2",command:"Target_Teammate 2",description:"Target second team member",syntax:"Target_Teammate 2",icon:"üë•"},target_teammate_3:{name:"Target Teammate 3",command:"Target_Teammate 3",description:"Target third team member",syntax:"Target_Teammate 3",icon:"üë•"},target_teammate_4:{name:"Target Teammate 4",command:"Target_Teammate 4",description:"Target fourth team member",syntax:"Target_Teammate 4",icon:"üë•"}}},combat:{name:"Combat",icon:"fas fa-fire",description:"Weapon firing and combat actions",commands:{fire_all:{name:"Fire All Weapons",command:"FireAll",description:"Fire all weapons",syntax:"FireAll",environment:"space",icon:"üî•",warning:"Not recommended on spam bars as it interferes with firing cycles"},fire_phasers:{name:"Fire Energy Weapons",command:"FirePhasers",description:"Fire all Energy Weapons",syntax:"FirePhasers",environment:"space",icon:"‚ö°",warning:"Not recommended on spam bars as it interferes with firing cycles"},fire_torps:{name:"Fire Torpedoes",command:"FireTorps",description:"Fire all Torpedos",syntax:"FireTorps",environment:"space",icon:"üöÄ",warning:"Not recommended on spam bars as it interferes with firing cycles"},fire_mines:{name:"Fire Mines",command:"FireMines",description:"Fire all Mines",syntax:"FireMines",environment:"space",icon:"üí£",warning:"Not recommended on spam bars as it interferes with firing cycles"},fire_phasers_torps:{name:"Fire Phasers & Torpedoes",command:"FirePhasersTorps",description:"Fire phasers & torpedos",syntax:"FirePhasersTorps",environment:"space",icon:"üí•",warning:"Not recommended on spam bars as it interferes with firing cycles"},fire_projectiles:{name:"Fire Projectiles",command:"FireProjectiles",description:"Fire torpedos & mines",syntax:"FireProjectiles",environment:"space",icon:"üéØ",warning:"Not recommended on spam bars as it interferes with firing cycles"}}},tray:{name:"Tray Execution",icon:"fas fa-th",description:"Execute abilities from action trays",commands:{custom_tray:{name:"Tray Execution",command:"+STOTrayExecByTray 0 0",description:"Execute specific tray slot",syntax:"+STOTrayExecByTray <tray> <slot>",icon:"‚ö°",customizable:!0,parameters:{tray:{type:"number",min:0,max:9,default:0},slot:{type:"number",min:0,max:9,default:0},command_type:{type:"select",options:["STOTrayExecByTray","TrayExecByTray"],default:"STOTrayExecByTray"}}},tray_with_backup:{name:"Tray Execution with Backup",command:"TrayExecByTrayWithBackup 1 0 0 0 0",description:"Execute specific tray slot with backup ability",syntax:"TrayExecByTrayWithBackup <active> <tray> <slot> <backup_tray> <backup_slot>",icon:"‚ö°",customizable:!0,parameters:{active:{type:"number",min:0,max:1,default:1},tray:{type:"number",min:0,max:9,default:0},slot:{type:"number",min:0,max:9,default:0},backup_tray:{type:"number",min:0,max:9,default:0},backup_slot:{type:"number",min:0,max:9,default:0}}},tray_range:{name:"Tray Range Execution",command:"+STOTrayExecByTray 0 0",description:"Execute a range of tray slots",syntax:"+STOTrayExecByTray <tray> <slot> $$ ... (range)",icon:"‚ö°",customizable:!0,parameters:{start_tray:{type:"number",min:0,max:9,default:0},start_slot:{type:"number",min:0,max:9,default:0},end_tray:{type:"number",min:0,max:9,default:0},end_slot:{type:"number",min:0,max:9,default:0},command_type:{type:"select",options:["STOTrayExecByTray","TrayExecByTray"],default:"STOTrayExecByTray"}}},tray_range_with_backup:{name:"Tray Range with Backup",command:"TrayExecByTrayWithBackup 1 0 0 0 0",description:"Execute a range of tray slots with backup abilities",syntax:"TrayExecByTrayWithBackup <active> <tray> <slot> <backup_tray> <backup_slot> $$ ... (range)",icon:"‚ö°",customizable:!0,parameters:{active:{type:"number",min:0,max:1,default:1},start_tray:{type:"number",min:0,max:9,default:0},start_slot:{type:"number",min:0,max:9,default:0},end_tray:{type:"number",min:0,max:9,default:0},end_slot:{type:"number",min:0,max:9,default:0},backup_start_tray:{type:"number",min:0,max:9,default:0},backup_start_slot:{type:"number",min:0,max:9,default:0},backup_end_tray:{type:"number",min:0,max:9,default:0},backup_end_slot:{type:"number",min:0,max:9,default:0}}},whole_tray:{name:"Whole Tray Execution",command:"+STOTrayExecByTray 0 0",description:"Execute all slots in a tray",syntax:"+STOTrayExecByTray <tray> <slot> $$ ... (all slots)",icon:"‚ö°",customizable:!0,parameters:{tray:{type:"number",min:0,max:9,default:0},command_type:{type:"select",options:["STOTrayExecByTray","TrayExecByTray"],default:"STOTrayExecByTray"}}},whole_tray_with_backup:{name:"Whole Tray with Backup",command:"TrayExecByTrayWithBackup 1 0 0 0 0",description:"Execute all slots in a tray with backup tray",syntax:"TrayExecByTrayWithBackup <active> <tray> <slot> <backup_tray> <backup_slot> $$ ... (all slots)",icon:"‚ö°",customizable:!0,parameters:{active:{type:"number",min:0,max:1,default:1},tray:{type:"number",min:0,max:9,default:0},backup_tray:{type:"number",min:0,max:9,default:0}}}}},power:{name:"Shield Management",icon:"fas fa-shield-alt",description:"Shield power and distribution management",commands:{distribute_shields:{name:"Distribute Shields",command:"+power_exec Distribute_Shields",description:"Evenly distributes shields as if clicking in the middle of the ship and shields icon",syntax:"+power_exec Distribute_Shields",environment:"space",icon:"üõ°Ô∏è",warning:"Not recommended on spam bars as it interferes with firing cycles"},reroute_shields_rear:{name:"Reroute Shields Rear",command:"+power_exec reroute_shields_rear",description:"Route shield power to rear facing",syntax:"+power_exec reroute_shields_rear",environment:"space",icon:"üõ°Ô∏è"},reroute_shields_left:{name:"Reroute Shields Left",command:"+power_exec reroute_shields_left",description:"Route shield power to left side",syntax:"+power_exec reroute_shields_left",environment:"space",icon:"üõ°Ô∏è"},reroute_shields_right:{name:"Reroute Shields Right",command:"+power_exec reroute_shields_right",description:"Route shield power to right side",syntax:"+power_exec reroute_shields_right",environment:"space",icon:"üõ°Ô∏è"},reroute_shields_forward:{name:"Reroute Shields Forward",command:"+power_exec reroute_shields_forward",description:"Route shield power to forward facing",syntax:"+power_exec reroute_shields_forward",environment:"space",icon:"üõ°Ô∏è"}}},movement:{name:"Movement",icon:"fas fa-arrows-alt",description:"Ship movement and navigation",commands:{full_impulse:{name:"Full Impulse",command:"+fullimpulse",description:"Engage full impulse drive",syntax:"+fullimpulse",environment:"space",icon:"üöÄ"},reverse:{name:"Reverse",command:"+reverse",description:"Reverse engines",syntax:"+reverse",icon:"‚¨ÖÔ∏è"},throttle_adjust:{name:"Throttle Adjust",command:"ThrottleAdjust",description:"Increase or decrease the throttle by amount",syntax:"ThrottleAdjust <amount>",icon:"‚ö°",customizable:!0,parameters:{amount:{type:"number",min:-1,max:1,default:.25,step:.05}}},throttle_set:{name:"Throttle Set",command:"ThrottleSet",description:"Set the throttle to a specific position (negative = reverse, 0 = stop)",syntax:"ThrottleSet <position>",icon:"üéõÔ∏è",customizable:!0,parameters:{position:{type:"number",min:-1,max:1,default:1,step:.1}}},throttle_toggle:{name:"Throttle Toggle",command:"ThrottleToggle",description:"Alternates between full throttle and full stop",syntax:"ThrottleToggle",icon:"üîÑ"},turn_left:{name:"Turn Left",command:"+turnleft",description:"Turn ship left (continuous while held)",syntax:"+turnleft",icon:"‚Ü™Ô∏è"},turn_right:{name:"Turn Right",command:"+turnright",description:"Turn ship right (continuous while held)",syntax:"+turnright",icon:"‚Ü©Ô∏è"},pitch_up:{name:"Pitch Up",command:"+up",description:"Pitch ship nose up (space altitude change)",syntax:"+up",icon:"‚¨ÜÔ∏è"},pitch_down:{name:"Pitch Down",command:"+down",description:"Pitch ship nose down (space altitude change)",syntax:"+down",icon:"‚¨áÔ∏è"},strafe_left:{name:"Strafe Left",command:"+left",description:"Strafe ship left",syntax:"+left",icon:"‚¨ÖÔ∏è"},strafe_right:{name:"Strafe Right",command:"+right",description:"Strafe ship right",syntax:"+right",icon:"‚û°Ô∏è"},forward:{name:"Forward",command:"+forward",description:"Move forward",syntax:"+forward",icon:"‚¨ÜÔ∏è"},backward:{name:"Backward",command:"+backward",description:"Move backward",syntax:"+backward",icon:"‚¨áÔ∏è"},auto_forward:{name:"Auto Forward",command:"autoForward",description:"Character moves forward until given new movement commands",syntax:"autoForward",environment:"ground",icon:"üèÉ"},follow:{name:"Follow Target",command:"Follow",description:"Follow the targeted entity",syntax:"Follow",icon:"üë•"},follow_cancel:{name:"Cancel Follow",command:"Follow_Cancel",description:"Stop following and forget about the target",syntax:"Follow_Cancel",icon:"‚ùå"}}},camera:{name:"Camera",icon:"fas fa-video",description:"Camera control and view management",commands:{zoom_in:{name:"Zoom In",command:"Camzoomin",description:"Zoom the camera in",syntax:"Camzoomin",icon:"üîç"},zoom_out:{name:"Zoom Out",command:"Camzoomout",description:"Zoom the camera out",syntax:"Camzoomout",icon:"üîé"},zoom_in_small:{name:"Zoom In Small",command:"Camzoominsmall",description:"Zoom the camera in slightly",syntax:"Camzoominsmall",icon:"üîç"},zoom_out_small:{name:"Zoom Out Small",command:"Camzoomoutsmall",description:"Zoom the camera out slightly",syntax:"Camzoomoutsmall",icon:"üîé"},cam_distance:{name:"Set Camera Distance",command:"camdist",description:"Sets the camera distance from the player",syntax:"camdist <distance>",icon:"üìè",customizable:!0,parameters:{distance:{type:"number",min:1,max:500,default:50}}},cam_reset:{name:"Reset Camera",command:"CamReset",description:"Reset the camera position to default",syntax:"CamReset",icon:"üîÑ"},cam_target_lock:{name:"Lock Camera to Target",command:"Camsetlocktotarget",description:"Lock or unlock the camera to the target",syntax:"Camsetlocktotarget",icon:"üéØ"},cam_cycle_distance:{name:"Cycle Camera Distance",command:"camCycleDist",description:"Cycle the camera distance between several preset values",syntax:"camCycleDist",icon:"üîÑ"},cam_mouse_look:{name:"Mouse Look",command:"+camMouseLook",description:"Enable mouse look camera control",syntax:"+camMouseLook",icon:"üñ±Ô∏è"},cam_turn_to_face:{name:"Turn to Face Camera",command:"+camTurnToFace",description:"Turn ship to face camera direction",syntax:"+camTurnToFace",icon:"‚Ü™Ô∏è"},look_up:{name:"Look Up",command:"lookUp",description:"Change point of view to look straight up",syntax:"lookUp",icon:"‚¨ÜÔ∏è"},look_down:{name:"Look Down",command:"lookDown",description:"Change point of view to look straight down",syntax:"lookDown",icon:"‚¨áÔ∏è"}}},communication:{name:"Communication",icon:"fas fa-comments",description:"Chat and team communication",commands:{team_message:{name:"Team Message",command:"team",description:"Send message to team",syntax:"team message",icon:"üí¨",customizable:!0,parameters:{message:{type:"text",default:"Message text here"}}},local_message:{name:"Local Message",command:"say",description:"Send message to local area",syntax:"say message",icon:"üì¢",customizable:!0,parameters:{message:{type:"text",default:"Message text here"}}},zone_message:{name:"Zone Message",command:"zone",description:"Send message to zone",syntax:"zone message",icon:"üì°",customizable:!0,parameters:{message:{type:"text",default:"Message text here"}}}}},system:{name:"System",icon:"fas fa-cog",description:"UI and system commands",commands:{toggle_hud:{name:"Toggle HUD",command:"+GenToggleHUD",description:"Toggle HUD visibility",syntax:"+GenToggleHUD",icon:"üëÅÔ∏è"},screenshot:{name:"Screenshot",command:"screenshot",description:"Take a screenshot",syntax:"screenshot",icon:"üì∑"},screenshot_jpg:{name:"Screenshot JPG",command:"screenshot_jpg",description:"Save a screenshot as JPG",syntax:"screenshot_jpg",icon:"üì∑"},autofire_toggle:{name:"Toggle Autofire",command:"+GenToggleAutofire",description:"Toggle weapon autofire",syntax:"+GenToggleAutofire",icon:"üîÅ"},bind_save_file:{name:"Save Binds to File",command:"bind_save_file",description:"Save all your binds to a text file",syntax:"bind_save_file <filename>",icon:"üíæ",customizable:!0,parameters:{filename:{type:"text",default:"my_binds.txt"}}},bind_load_file:{name:"Load Binds from File",command:"bind_load_file",description:"Load a bind file into the client",syntax:"bind_load_file <filename>",icon:"üìÅ",customizable:!0,parameters:{filename:{type:"text",default:"my_binds.txt"}}},combat_log:{name:"Toggle Combat Log",command:"CombatLog",description:"Turn combat log recording on/off (1=on, 0=off)",syntax:"CombatLog <1/0>",icon:"üìä",customizable:!0,parameters:{state:{type:"number",min:0,max:1,default:1}}},missions:{name:"Show/Hide Missions",command:"missions",description:"Show/hide the mission journal",syntax:"missions",icon:"üìã"},inventory:{name:"Show/Hide Inventory",command:"Inventory",description:"Show/hide your inventory",syntax:"Inventory",icon:"üéí"},map:{name:"Show/Hide Map",command:"Map",description:"Show/hide the map window",syntax:"Map",icon:"üó∫Ô∏è"}}}},templates:{space_combat:{basic_attack:{name:"Basic Attack Sequence",description:"Target enemy and fire all weapons",commands:["Target_Enemy_Near","FireAll"]},defensive_sequence:{name:"Defensive Sequence",description:"Target self and activate defensive abilities",commands:["Target_Self","+power_exec Distribute_Shields"]},alpha_strike:{name:"Alpha Strike",description:"Full offensive sequence with buffs",commands:["Target_Enemy_Near","FireAll"]},healing_sequence:{name:"Emergency Healing",description:"Self-healing and damage control",commands:["Target_Self","+power_exec Distribute_Shields"]}},ground_combat:{basic_ground_attack:{name:"Basic Ground Attack",description:"Target and attack sequence for ground combat",commands:["Target_Enemy_Near","+STOTrayExecByTray 0 0"]}}},defaultProfiles:{default_space:{name:"Default Space",description:"Basic space combat configuration",currentEnvironment:"space",builds:{space:{keys:{Space:[{command:"Target_Enemy_Near",type:"targeting",icon:"üéØ",text:"Target nearest enemy",id:"cmd_1"},{command:"FireAll",type:"combat",icon:"üî•",text:"Fire all weapons",id:"cmd_2"}]}},ground:{keys:{Space:[{command:"Target_Enemy_Near",type:"targeting",icon:"üéØ",text:"Target nearest enemy",id:"cmd_g1"},{command:"+STOTrayExecByTray 0 0",type:"tray",icon:"‚ö°",text:"Primary attack",id:"cmd_g2"}]}}},aliases:{AttackCall:{description:"Call out attack target to team",commands:"team Attacking [$Target] - focus fire!"},TargetReport:{description:"Report current target to team",commands:"team Current target: [$Target]"},HealCall:{description:"Request healing for target",commands:"team Need healing on [$Target]!"}}},tactical_space:{name:"Tactical Space",description:"Aggressive DPS-focused space build",currentEnvironment:"space",builds:{space:{keys:{Space:[{command:"Target_Enemy_Near",type:"targeting",icon:"üéØ",text:"Target nearest enemy",id:"cmd_1"},{command:"+STOTrayExecByTray 0 0",type:"tray",icon:"‚ö°",text:"Execute Tray 1 Slot 1",id:"cmd_2"},{command:"FireAll",type:"combat",icon:"üî•",text:"Fire all weapons",id:"cmd_3"},{command:"+power_exec Distribute_Shields",type:"power",icon:"üõ°Ô∏è",text:"Distribute shields",id:"cmd_4"}],1:[{command:"+STOTrayExecByTray 1 0",type:"tray",icon:"‚ö°",text:"Execute Tray 2 Slot 1",id:"cmd_5"}],F1:[{command:"Target_Self",type:"targeting",icon:"üë§",text:"Target self",id:"cmd_6"},{command:"+STOTrayExecByTray 2 0",type:"tray",icon:"‚ö°",text:"Execute Tray 3 Slot 1",id:"cmd_7"}]}},ground:{keys:{Space:[{command:"Target_Enemy_Near",type:"targeting",icon:"üéØ",text:"Target nearest enemy",id:"cmd_g1"},{command:"+STOTrayExecByTray 0 0",type:"tray",icon:"‚ö°",text:"Primary attack",id:"cmd_g2"}],1:[{command:"+STOTrayExecByTray 0 1",type:"tray",icon:"‚ö°",text:"Secondary attack",id:"cmd_g3"}],F1:[{command:"Target_Self",type:"targeting",icon:"üë§",text:"Target self",id:"cmd_g4"},{command:"+STOTrayExecByTray 1 0",type:"tray",icon:"üíä",text:"Heal self",id:"cmd_g5"}]}}},aliases:{}}},keys:{common:{name:"Common Keys",description:"Most frequently used keys",keys:[{key:"Space",description:"Spacebar"},{key:"1",description:"Number 1"},{key:"2",description:"Number 2"},{key:"3",description:"Number 3"},{key:"4",description:"Number 4"},{key:"5",description:"Number 5"},{key:"F1",description:"Function Key 1"},{key:"F2",description:"Function Key 2"},{key:"F3",description:"Function Key 3"},{key:"F4",description:"Function Key 4"},{key:"Tab",description:"Tab"},{key:"enter",description:"Main Enter Key"},{key:"Shift",description:"Shift"},{key:"Control",description:"Control"},{key:"ALT",description:"Alt"}]},letters:{name:"Letter Keys",description:"A-Z keyboard letters",keys:[{key:"A",description:"Key A"},{key:"B",description:"Key B"},{key:"C",description:"Key C"},{key:"D",description:"Key D"},{key:"E",description:"Key E"},{key:"F",description:"Key F"},{key:"G",description:"Key G"},{key:"H",description:"Key H"},{key:"I",description:"Key I"},{key:"J",description:"Key J"},{key:"K",description:"Key K"},{key:"L",description:"Key L"},{key:"M",description:"Key M"},{key:"N",description:"Key N"},{key:"O",description:"Key O"},{key:"P",description:"Key P"},{key:"Q",description:"Key Q"},{key:"R",description:"Key R"},{key:"S",description:"Key S"},{key:"T",description:"Key T"},{key:"U",description:"Key U"},{key:"V",description:"Key V"},{key:"W",description:"Key W"},{key:"X",description:"Key X"},{key:"Y",description:"Key Y"},{key:"Z",description:"Key Z"}]},numbers:{name:"Number Keys",description:"Number row and numpad",keys:[{key:"0",description:"Number 0"},{key:"6",description:"Number 6"},{key:"7",description:"Number 7"},{key:"8",description:"Number 8"},{key:"9",description:"Number 9"},{key:"numpad0",description:"Numerical Keypad 0"},{key:"numpad1",description:"Numerical Keypad 1"},{key:"numpad2",description:"Numerical Keypad 2"},{key:"numpad3",description:"Numerical Keypad 3"},{key:"numpad4",description:"Numerical Keypad 4"},{key:"numpad5",description:"Numerical Keypad 5"},{key:"numpad6",description:"Numerical Keypad 6"},{key:"numpad7",description:"Numerical Keypad 7"},{key:"numpad8",description:"Numerical Keypad 8"},{key:"numpad9",description:"Numerical Keypad 9"},{key:"Decimal",description:"Numerical Keypad Decimal"},{key:"Divide",description:"Numerical Keypad Divide"},{key:"Multiply",description:"Multiply (*)"},{key:"Subtract",description:"Subtract (-)"},{key:"Add",description:"Add (+)"},{key:"numpadenter",description:"Numerical Keypad Enter"}]},function:{name:"Function Keys",description:"F1-F24 function keys",keys:[{key:"F5",description:"Function Key 5"},{key:"F6",description:"Function Key 6"},{key:"F7",description:"Function Key 7"},{key:"F8",description:"Function Key 8"},{key:"F9",description:"Function Key 9"},{key:"F10",description:"Function Key 10"},{key:"F11",description:"Function Key 11"},{key:"F12",description:"Function Key 12"},{key:"F13",description:"Function Key 13"},{key:"F14",description:"Function Key 14"},{key:"F15",description:"Function Key 15"},{key:"F16",description:"Function Key 16"},{key:"F17",description:"Function Key 17"},{key:"F18",description:"Function Key 18"},{key:"F19",description:"Function Key 19"},{key:"F20",description:"Function Key 20"},{key:"F21",description:"Function Key 21"},{key:"F22",description:"Function Key 22"},{key:"F23",description:"Function Key 23"},{key:"F24",description:"Function Key 24"}]},arrows:{name:"Arrow & Navigation",description:"Arrow keys and navigation",keys:[{key:"Up",description:"Arrow Key: Up"},{key:"Down",description:"Arrow Key: Down"},{key:"Left",description:"Arrow Key: Left"},{key:"Right",description:"Arrow Key: Right"},{key:"Home",description:"Home"},{key:"End",description:"End"},{key:"PageUp",description:"Page Up"},{key:"PageDown",description:"Page Down"},{key:"insert",description:"Insert"},{key:"delete",description:"Delete"}]},modifiers:{name:"Modifier Keys",description:"Shift, Ctrl, Alt variations",keys:[{key:"LALT",description:"Alt (Left)"},{key:"RALT",description:"Alt (Right)"},{key:"LCTRL",description:"Control (Left)"},{key:"RCTRL",description:"Control (Right)"}]},symbols:{name:"Symbol Keys",description:"Punctuation and symbols",keys:[{key:"[",description:"["},{key:"]",description:"]"},{key:"\\",description:"\\"},{key:",",description:"Comma (,)"},{key:".",description:"Period (.)"},{key:"/",description:"Divide (/)"},{key:"`",description:"Tilda Key (~)"}]},mouse:{name:"Mouse Controls",description:"Mouse buttons and scroll",keys:[{key:"Lbutton",description:"Mouse Left Press"},{key:"Rbutton",description:"Mouse Right Press"},{key:"Middleclick",description:"Mouse Middle Click"},{key:"Button1",description:"Mouse Button 1"},{key:"Button2",description:"Mouse Button 2"},{key:"Button3",description:"Mouse Button 3"},{key:"Button4",description:"Mouse Button 4"},{key:"Button5",description:"Mouse Button 5"},{key:"Button6",description:"Mouse Button 6"},{key:"Button7",description:"Mouse Button 7"},{key:"Button8",description:"Mouse Button 8"},{key:"Button9",description:"Mouse Button 9"},{key:"Button10",description:"Mouse Button 10"},{key:"Wheelplus",description:"Mouse Scroll Up"},{key:"Wheelminus",description:"Mouse Scroll Down"}]},gamepad:{name:"Xbox Controller",description:"Xbox/Gamepad controls",keys:[{key:"Joy1",description:"XBOX Contr [Start]"},{key:"Joy2",description:"XBOX Contr [Back]"},{key:"Joy3",description:"XBOX Contr [L Thumb depress]"},{key:"Joy4",description:"XBOX Contr [R Thumb depress]"},{key:"Joy5",description:"XBOX Contr [Left Bumper]"},{key:"Joy6",description:"XBOX Contr [Right Bumper]"},{key:"Joy7",description:"XBOX Contr [Left Trigger]"},{key:"Joy8",description:"XBOX Contr [Right Trigger]"},{key:"Joy9",description:"XBOX Contr [A Button]"},{key:"Joy10",description:"XBOX Contr [B Button]"},{key:"Joy11",description:"XBOX Contr [X Button]"},{key:"Joy12",description:"XBOX Contr [Y Button]"},{key:"Joypad_up",description:"XBOX Contr [Pad up]"},{key:"Joypad_down",description:"XBOX Contr [Pad down]"},{key:"Joypad_left",description:"XBOX Contr [Pad left]"},{key:"Joypad_right",description:"XBOX Contr [Pad right]"},{key:"Lstick_up",description:"XBOX Contr [Left Stick up]"},{key:"Lstick_down",description:"XBOX Contr [Left Stick down]"},{key:"Lstick_left",description:"XBOX Contr [Left Stick left]"},{key:"Lstick_right",description:"XBOX Contr [Left Stick right]"},{key:"Rstick_up",description:"XBOX Contr [Right Stick up]"},{key:"Rstick_down",description:"XBOX Contr [Right Stick down]"},{key:"Rstick_left",description:"XBOX Contr [Right Stick left]"},{key:"Rstick_right",description:"XBOX Contr [Right Stick right]"}]}},validation:{keyNamePattern:/^[a-zA-Z0-9_+\-\s]+$/,aliasNamePattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/,maxCommandsPerKey:20,maxKeysPerProfile:100},settings:{version:"1.0.0",autoSave:!0,maxUndoSteps:50,defaultMode:"space",language:"en"},variables:{target:{variable:"$Target",description:"Replaced with the name of your current target",example:"team Target [$Target]",usableIn:["communication","custom","aliases"],notes:"If your target's name is 'froggyMonster', this will output 'Target [froggyMonster]'"}}};window.STO_DATA=i,window.COMMAND_CATEGORIES=i.commands,window.COMMANDS={},Object.entries(i.commands).forEach(([e,t])=>{Object.entries(t.commands).forEach(([t,a])=>{window.COMMANDS[t]={...a,category:e,key:t}})}),window.KEY_LAYOUTS=i.keyLayouts||{qwerty:{name:"QWERTY",rows:[[{key:"Escape",display:"Esc"},{key:"F1",display:"F1"},{key:"F2",display:"F2"},{key:"F3",display:"F3"},{key:"F4",display:"F4"},{key:"F5",display:"F5"},{key:"F6",display:"F6"},{key:"F7",display:"F7"},{key:"F8",display:"F8"},{key:"F9",display:"F9"},{key:"F10",display:"F10"},{key:"F11",display:"F11"},{key:"F12",display:"F12"}],[{key:"`",display:"`"},{key:"1",display:"1"},{key:"2",display:"2"},{key:"3",display:"3"},{key:"4",display:"4"},{key:"5",display:"5"},{key:"6",display:"6"},{key:"7",display:"7"},{key:"8",display:"8"},{key:"9",display:"9"},{key:"0",display:"0"},{key:"-",display:"-"},{key:"=",display:"="},{key:"Backspace",display:"Backspace"}],[{key:"Tab",display:"Tab"},{key:"Q",display:"Q"},{key:"W",display:"W"},{key:"E",display:"E"},{key:"R",display:"R"},{key:"T",display:"T"},{key:"Y",display:"Y"},{key:"U",display:"U"},{key:"I",display:"I"},{key:"O",display:"O"},{key:"P",display:"P"},{key:"[",display:"["},{key:"]",display:"]"},{key:"\\",display:"\\"}],[{key:"CapsLock",display:"Caps"},{key:"A",display:"A"},{key:"S",display:"S"},{key:"D",display:"D"},{key:"F",display:"F"},{key:"G",display:"G"},{key:"H",display:"H"},{key:"J",display:"J"},{key:"K",display:"K"},{key:"L",display:"L"},{key:";",display:";"},{key:"'",display:"'"},{key:"Enter",display:"Enter"}],[{key:"Shift",display:"Shift"},{key:"Z",display:"Z"},{key:"X",display:"X"},{key:"C",display:"C"},{key:"V",display:"V"},{key:"B",display:"B"},{key:"N",display:"N"},{key:"M",display:"M"},{key:",",display:","},{key:".",display:"."},{key:"/",display:"/"},{key:"Shift",display:"Shift"}],[{key:"Ctrl",display:"Ctrl"},{key:"Alt",display:"Alt"},{key:"Space",display:"Space"},{key:"Alt",display:"Alt"},{key:"Ctrl",display:"Ctrl"}]]}},window.DEFAULT_SETTINGS={keyLayout:"qwerty",autoSave:i.settings?.autoSave||!0,showTooltips:!0,exportFormat:"txt",maxUndoSteps:i.settings?.maxUndoSteps||50,defaultMode:i.settings?.defaultMode||"space",language:i.settings?.language||"en"},window.SAMPLE_PROFILES=Object.values(i.defaultProfiles).map(e=>({id:e.name.toLowerCase().replace(/\s+/g,"_"),name:e.name,description:e.description,currentEnvironment:e.currentEnvironment||"space",builds:e.builds||{space:{keys:{}},ground:{keys:{}}},created:(new Date).toISOString(),modified:(new Date).toISOString()})),window.SAMPLE_ALIASES={attack_sequence:{name:"Attack Sequence",commands:["Target_Enemy_Near","FireAll"],description:"Target and attack nearest enemy"},defensive_sequence:{name:"Defensive Sequence",commands:["Target_Self","+power_exec Distribute_Shields"],description:"Self-target and activate defensive abilities"},heal_sequence:{name:"Healing Sequence",commands:["Target_Self","+STOTrayExecByTray 3 0 $$ +STOTrayExecByTray 3 1"],description:"Emergency healing and repair sequence"}},window.TRAY_CONFIG={maxTrays:10,slotsPerTray:10,defaultTray:0,maxCommandsPerSlot:1},window.getCommandsByCategory=function(e){return e&&i.commands[e]?Object.values(i.commands[e].commands):[]},window.localizeCommandData=function(){const e=window.i18next;e&&Object.entries(i.commands).forEach(([t,a])=>{a.name&&(a.name=e.t(`command_categories.${t}`)),a.description&&(a.description=e.t(`category_descriptions.${t}`)),Object.entries(a.commands).forEach(([t,a])=>{a.name&&(a.name=e.t(`command_definitions.${t}.name`)),a.description&&(a.description=e.t(`command_definitions.${t}.description`))})})};class o extends Error{constructor(e,t="STO_ERROR"){super(e),this.name="STOError",this.code=t}}class r extends o{constructor(e,t="VFX_ERROR"){super(e,t),this.name="VertigoError"}}"undefined"!=typeof window&&(window.STOError=o,window.VertigoError=r,window.InvalidEnvironmentError=class extends r{constructor(e){super(`Invalid environment '${e}'. Valid environments are: space, ground`,"INVALID_ENVIRONMENT"),this.environment=e}},window.InvalidEffectError=class extends r{constructor(e,t){super(`Invalid effect '${e}' for environment '${t}'`,"INVALID_EFFECT"),this.effectName=e,this.environment=t}});const s=e=>"string"==typeof e,c=()=>{let e,t;const a=new Promise((a,n)=>{e=a,t=n});return a.resolve=e,a.reject=t,a},l=e=>null==e?"":""+e,d=/###/g,m=e=>e&&e.indexOf("###")>-1?e.replace(d,"."):e,u=e=>!e||s(e),p=(e,t,a)=>{const n=s(t)?t.split("."):t;let i=0;for(;i<n.length-1;){if(u(e))return{};const t=m(n[i]);!e[t]&&a&&(e[t]=new a),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return u(e)?{}:{obj:e,k:m(n[i])}},_=(e,t,a)=>{const{obj:n,k:i}=p(e,t,Object);if(void 0!==n||1===t.length)return void(n[i]=a);let o=t[t.length-1],r=t.slice(0,t.length-1),s=p(e,r,Object);for(;void 0===s.obj&&r.length;)o=`${r[r.length-1]}.${o}`,r=r.slice(0,r.length-1),s=p(e,r,Object),s?.obj&&void 0!==s.obj[`${s.k}.${o}`]&&(s.obj=void 0);s.obj[`${s.k}.${o}`]=a},f=(e,t)=>{const{obj:a,k:n}=p(e,t);if(a&&Object.prototype.hasOwnProperty.call(a,n))return a[n]},h=(e,t,a)=>{for(const n in t)"__proto__"!==n&&"constructor"!==n&&(n in e?s(e[n])||e[n]instanceof String||s(t[n])||t[n]instanceof String?a&&(e[n]=t[n]):h(e[n],t[n],a):e[n]=t[n]);return e},y=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const b=e=>s(e)?e.replace(/[&<>"'\/]/g,e=>g[e]):e,v=[" ",",","?","!",";"],k=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const a=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,a),this.regExpQueue.push(e),a}}(20),x=(e,t,a=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const n=t.split(a);let i=e;for(let e=0;e<n.length;){if(!i||"object"!=typeof i)return;let t,o="";for(let r=e;r<n.length;++r)if(r!==e&&(o+=a),o+=n[r],t=i[o],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&r<n.length-1)continue;e+=r-e+1;break}i=t}return i},S=e=>e?.replace("_","-"),w={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class T{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||w,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,a,n){return n&&!this.debug?null:(s(e[0])&&(e[0]=`${a}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new T(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new T(this.logger,e)}}var C=new T;class ${constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const a=this.observers[e].get(t)||0;this.observers[e].set(t,a+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([e,a])=>{for(let n=0;n<a;n++)e(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([a,n])=>{for(let i=0;i<n;i++)a.apply(a,[e,...t])})}}class A extends ${constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,a,n={}){const i=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,o=void 0!==n.ignoreJSONStructure?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let r;e.indexOf(".")>-1?r=e.split("."):(r=[e,t],a&&(Array.isArray(a)?r.push(...a):s(a)&&i?r.push(...a.split(i)):r.push(a)));const c=f(this.data,r);return!c&&!t&&!a&&e.indexOf(".")>-1&&(e=r[0],t=r[1],a=r.slice(2).join(".")),!c&&o&&s(a)?x(this.data?.[e]?.[t],a,i):c}addResource(e,t,a,n,i={silent:!1}){const o=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let r=[e,t];a&&(r=r.concat(o?a.split(o):a)),e.indexOf(".")>-1&&(r=e.split("."),n=t,t=r[1]),this.addNamespaces(t),_(this.data,r,n),i.silent||this.emit("added",e,t,a,n)}addResources(e,t,a,n={silent:!1}){for(const n in a)(s(a[n])||Array.isArray(a[n]))&&this.addResource(e,t,n,a[n],{silent:!0});n.silent||this.emit("added",e,t,a)}addResourceBundle(e,t,a,n,i,o={silent:!1,skipCopy:!1}){let r=[e,t];e.indexOf(".")>-1&&(r=e.split("."),n=a,a=t,t=r[1]),this.addNamespaces(t);let s=f(this.data,r)||{};o.skipCopy||(a=JSON.parse(JSON.stringify(a))),n?h(s,a,i):s={...s,...a},_(this.data,r,s),o.silent||this.emit("added",e,t,a)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var E={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,a,n,i){return e.forEach(e=>{t=this.processors[e]?.process(t,a,n,i)??t}),t}};const F={},B=e=>!s(e)&&"boolean"!=typeof e&&"number"!=typeof e;class I extends ${constructor(e,t={}){var a,n;super(),a=e,n=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(e=>{a[e]&&(n[e]=a[e])}),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=C.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const a={...t};if(null==e)return!1;const n=this.resolve(e,a);return void 0!==n?.res}extractFromKey(e,t){let a=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===a&&(a=":");const n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const o=a&&e.indexOf(a)>-1,r=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,a)=>{t=t||"",a=a||"";const n=v.filter(e=>t.indexOf(e)<0&&a.indexOf(e)<0);if(0===n.length)return!0;const i=k.getRegExp(`(${n.map(e=>"?"===e?"\\?":e).join("|")})`);let o=!i.test(e);if(!o){const t=e.indexOf(a);t>0&&!i.test(e.substring(0,t))&&(o=!0)}return o})(e,a,n));if(o&&!r){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:s(i)?[i]:i};const o=e.split(a);(a!==n||a===n&&this.options.ns.indexOf(o[0])>-1)&&(i=o.shift()),e=o.join(n)}return{key:e,namespaces:s(i)?[i]:i}}translate(e,t,a){let n="object"==typeof t?{...t}:t;if("object"!=typeof n&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof options&&(n={...n}),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const i=void 0!==n.returnDetails?n.returnDetails:this.options.returnDetails,o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,{key:r,namespaces:c}=this.extractFromKey(e[e.length-1],n),l=c[c.length-1];let d=void 0!==n.nsSeparator?n.nsSeparator:this.options.nsSeparator;void 0===d&&(d=":");const m=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===m?.toLowerCase())return u?i?{res:`${l}${d}${r}`,usedKey:r,exactUsedKey:r,usedLng:m,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${d}${r}`:i?{res:r,usedKey:r,exactUsedKey:r,usedLng:m,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:r;const p=this.resolve(e,n);let _=p?.res;const f=p?.usedKey||r,h=p?.exactUsedKey||r,y=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject,b=void 0!==n.count&&!s(n.count),v=I.hasDefaultValue(n),k=b?this.pluralResolver.getSuffix(m,n.count,n):"",x=n.ordinal&&b?this.pluralResolver.getSuffix(m,n.count,{ordinal:!1}):"",S=b&&!n.ordinal&&0===n.count,w=S&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${k}`]||n[`defaultValue${x}`]||n.defaultValue;let T=_;g&&!_&&v&&(T=w);const C=B(T),$=Object.prototype.toString.apply(T);if(!(g&&T&&C&&["[object Number]","[object Function]","[object RegExp]"].indexOf($)<0)||s(y)&&Array.isArray(T))if(g&&s(y)&&Array.isArray(_))_=_.join(y),_&&(_=this.extendTranslation(_,e,n,a));else{let t=!1,i=!1;!this.isValidLookup(_)&&v&&(t=!0,_=w),this.isValidLookup(_)||(i=!0,_=r);const s=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&i?void 0:_,c=v&&w!==_&&this.options.updateMissing;if(i||t||c){if(this.logger.log(c?"updateKey":"missingKey",m,l,r,c?w:_),o){const e=this.resolve(r,{...n,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let a=0;a<t.length;a++)e.push(t[a]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(n.lng||this.language):e.push(n.lng||this.language);const a=(e,t,a)=>{const i=v&&a!==_?a:s;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,i,c,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(e,l,t,i,c,n),this.emit("missingKey",e,l,t,_)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,n);S&&n[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{a([e],r+t,n[`defaultValue${t}`]||w)})}):a(e,r,w))}_=this.extendTranslation(_,e,n,p,a),i&&_===r&&this.options.appendNamespaceToMissingKey&&(_=`${l}${d}${r}`),(i||t)&&this.options.parseMissingKeyHandler&&(_=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${d}${r}`:r,t?_:void 0,n))}else{if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,T,{...n,ns:c}):`key '${r} (${this.language})' returned an object instead of string.`;return i?(p.res=e,p.usedParams=this.getUsedParamsDetails(n),p):e}if(o){const e=Array.isArray(T),t=e?[]:{},a=e?h:f;for(const e in T)if(Object.prototype.hasOwnProperty.call(T,e)){const i=`${a}${o}${e}`;t[e]=v&&!_?this.translate(i,{...n,defaultValue:B(w)?w[e]:void 0,joinArrays:!1,ns:c}):this.translate(i,{...n,joinArrays:!1,ns:c}),t[e]===i&&(t[e]=T[e])}_=t}}return i?(p.res=_,p.usedParams=this.getUsedParamsDetails(n),p):_}extendTranslation(e,t,a,n,i){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...a},a.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init({...a,interpolation:{...this.options.interpolation,...a.interpolation}});const o=s(e)&&(void 0!==a?.interpolation?.skipOnVariables?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let r;if(o){const t=e.match(this.interpolator.nestingRegexp);r=t&&t.length}let c=a.replace&&!s(a.replace)?a.replace:a;if(this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),e=this.interpolator.interpolate(e,c,a.lng||this.language||n.usedLng,a),o){const t=e.match(this.interpolator.nestingRegexp);r<(t&&t.length)&&(a.nest=!1)}!a.lng&&n&&n.res&&(a.lng=this.language||n.usedLng),!1!==a.nest&&(e=this.interpolator.nest(e,(...e)=>i?.[0]!==e[0]||a.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),a)),a.interpolation&&this.interpolator.reset()}const o=a.postProcess||this.options.postProcess,r=s(o)?[o]:o;return null!=e&&r?.length&&!1!==a.applyPostProcessor&&(e=E.handle(r,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(a)},...a}:a,this)),e}resolve(e,t={}){let a,n,i,o,r;return s(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(a))return;const c=this.extractFromKey(e,t),l=c.key;n=l;let d=c.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const m=void 0!==t.count&&!s(t.count),u=m&&!t.ordinal&&0===t.count,p=void 0!==t.context&&(s(t.context)||"number"==typeof t.context)&&""!==t.context,_=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);d.forEach(e=>{this.isValidLookup(a)||(r=e,F[`${_[0]}-${e}`]||!this.utils?.hasLoadedNamespace||this.utils?.hasLoadedNamespace(r)||(F[`${_[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${_.join(", ")}" won't get resolved as namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),_.forEach(n=>{if(this.isValidLookup(a))return;o=n;const r=[l];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(r,l,n,e,t);else{let e;m&&(e=this.pluralResolver.getSuffix(n,t.count,t));const a=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(r.push(l+e),t.ordinal&&0===e.indexOf(i)&&r.push(l+e.replace(i,this.options.pluralSeparator)),u&&r.push(l+a)),p){const n=`${l}${this.options.contextSeparator}${t.context}`;r.push(n),m&&(r.push(n+e),t.ordinal&&0===e.indexOf(i)&&r.push(n+e.replace(i,this.options.pluralSeparator)),u&&r.push(n+a))}}let s;for(;s=r.pop();)this.isValidLookup(a)||(i=s,a=this.getResource(n,e,s,t))}))})}),{res:a,usedKey:n,exactUsedKey:i,usedLng:o,usedNS:r}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,a,n={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,a,n):this.resourceStore.getResource(e,t,a,n)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],a=e.replace&&!s(e.replace);let n=a?e.replace:e;if(a&&void 0!==e.count&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!a){n={...n};for(const e of t)delete n[e]}return n}static hasDefaultValue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,12)&&void 0!==e[t])return!0;return!1}}class M{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=C.create("languageUtils")}getScriptPartFromCode(e){if(!(e=S(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=S(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(s(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(e){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const a=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(a)||(t=a)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const a=this.getScriptPartFromCode(e);if(this.isSupportedCode(a))return t=a;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),s(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let a=e[t];return a||(a=e[this.getScriptPartFromCode(t)]),a||(a=e[this.formatLanguageCode(t)]),a||(a=e[this.getLanguagePartFromCode(t)]),a||(a=e.default),a||[]}toResolveHierarchy(e,t){const a=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),n=[],i=e=>{e&&(this.isSupportedCode(e)?n.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return s(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):s(e)&&i(this.formatLanguageCode(e)),a.forEach(e=>{n.indexOf(e)<0&&i(this.formatLanguageCode(e))}),n}}const O={zero:0,one:1,two:2,few:3,many:4,other:5},j={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class P{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=C.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const a=S("dev"===e?"en":e),n=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:a,type:n});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(a,{type:n})}catch(a){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),j;if(!e.match(/-|_/))return j;const n=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(n,t)}return this.pluralRulesCache[i]=o,o}needsPlural(e,t={}){let a=this.getRule(e,t);return a||(a=this.getRule("dev",t)),a?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,a={}){return this.getSuffixes(e,a).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let a=this.getRule(e,t);return a||(a=this.getRule("dev",t)),a?a.resolvedOptions().pluralCategories.sort((e,t)=>O[e]-O[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,a={}){const n=this.getRule(e,a);return n?`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${n.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,a))}}const D=(e,t,a,n=".",i=!0)=>{let o=((e,t,a)=>{const n=f(e,a);return void 0!==n?n:f(t,a)})(e,t,a);return!o&&i&&s(a)&&(o=x(e,a,n),void 0===o&&(o=x(t,a,n))),o},N=e=>e.replace(/\$/g,"$$$$");class K{constructor(e={}){this.logger=C.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:a,useRawValueToEscape:n,prefix:i,prefixEscaped:o,suffix:r,suffixEscaped:s,formatSeparator:c,unescapeSuffix:l,unescapePrefix:d,nestingPrefix:m,nestingPrefixEscaped:u,nestingSuffix:p,nestingSuffixEscaped:_,nestingOptionsSeparator:f,maxReplaces:h,alwaysFormat:g}=e.interpolation;this.escape=void 0!==t?t:b,this.escapeValue=void 0===a||a,this.useRawValueToEscape=void 0!==n&&n,this.prefix=i?y(i):o||"{{",this.suffix=r?y(r):s||"}}",this.formatSeparator=c||",",this.unescapePrefix=l?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":l||"",this.nestingPrefix=m?y(m):u||y("$t("),this.nestingSuffix=p?y(p):_||y(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=h||1e3,this.alwaysFormat=void 0!==g&&g,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e?.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,a,n){let i,o,r;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=e=>{if(e.indexOf(this.formatSeparator)<0){const i=D(t,c,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,a,{...n,...t,interpolationkey:e}):i}const i=e.split(this.formatSeparator),o=i.shift().trim(),r=i.join(this.formatSeparator).trim();return this.format(D(t,c,o,this.options.keySeparator,this.options.ignoreJSONStructure),r,a,{...n,...t,interpolationkey:o})};this.resetRegExp();const m=n?.missingInterpolationHandler||this.options.missingInterpolationHandler,u=void 0!==n?.interpolation?.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>N(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?N(this.escape(e)):N(e)}].forEach(t=>{for(r=0;i=t.regex.exec(e);){const a=i[1].trim();if(o=d(a),void 0===o)if("function"==typeof m){const t=m(e,i,n);o=s(t)?t:""}else if(n&&Object.prototype.hasOwnProperty.call(n,a))o="";else{if(u){o=i[0];continue}this.logger.warn(`missed to pass in variable ${a} for interpolating ${e}`),o=""}else s(o)||this.useRawValueToEscape||(o=l(o));const c=t.safeValue(o);if(e=e.replace(i[0],c),u?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,r++,r>=this.maxReplaces)break}}),e}nest(e,t,a={}){let n,i,o;const r=(e,t)=>{const a=this.nestingOptionsSeparator;if(e.indexOf(a)<0)return e;const n=e.split(new RegExp(`${a}[ ]*{`));let i=`{${n[1]}`;e=n[0],i=this.interpolate(i,o);const r=i.match(/'/g),s=i.match(/"/g);((r?.length??0)%2==0&&!s||s.length%2!=0)&&(i=i.replace(/'/g,'"'));try{o=JSON.parse(i),t&&(o={...t,...o})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${a}${i}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let c=[];o={...a},o=o.replace&&!s(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let d=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map(e=>e.trim());n[1]=e.shift(),c=e,d=!0}if(i=t(r.call(this,n[1].trim(),o),o),i&&n[0]===e&&!s(i))return i;s(i)||(i=l(i)),i||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),i=""),d&&(i=c.reduce((e,t)=>this.format(e,t,a.lng,{...a,interpolationkey:n[1].trim()}),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}const z=e=>{const t={};return(a,n,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const r=n+JSON.stringify(o);let s=t[r];return s||(s=e(S(n),i),t[r]=s),s(a)}},U=e=>(t,a,n)=>e(S(a),n)(t);class L{constructor(e={}){this.logger=C.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const a=t.cacheInBuiltFormats?z:U;this.formats={number:a((e,t)=>{const a=new Intl.NumberFormat(e,{...t});return e=>a.format(e)}),currency:a((e,t)=>{const a=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>a.format(e)}),datetime:a((e,t)=>{const a=new Intl.DateTimeFormat(e,{...t});return e=>a.format(e)}),relativetime:a((e,t)=>{const a=new Intl.RelativeTimeFormat(e,{...t});return e=>a.format(e,t.range||"day")}),list:a((e,t)=>{const a=new Intl.ListFormat(e,{...t});return e=>a.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=z(t)}format(e,t,a,n={}){const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(e=>e.indexOf(")")>-1)){const e=i.findIndex(e=>e.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}return i.reduce((e,t)=>{const{formatName:i,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const a={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const i=n[1].substring(0,n[1].length-1);"currency"===t&&i.indexOf(":")<0?a.currency||(a.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?a.range||(a.range=i.trim()):i.split(";").forEach(e=>{if(e){const[t,...n]=e.split(":"),i=n.join(":").trim().replace(/^'+|'+$/g,""),o=t.trim();a[o]||(a[o]=i),"false"===i&&(a[o]=!1),"true"===i&&(a[o]=!0),isNaN(i)||(a[o]=parseInt(i,10))}})}return{formatName:t,formatOptions:a}})(t);if(this.formats[i]){let t=e;try{const r=n?.formatParams?.[n.interpolationkey]||{},s=r.locale||r.lng||n.locale||n.lng||a;t=this.formats[i](e,s,{...o,...n,...r})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${i}`),e},e)}}class R extends ${constructor(e,t,a,n={}){super(),this.backend=e,this.store=t,this.services=a,this.languageUtils=a.languageUtils,this.options=n,this.logger=C.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(a,n.backend,n)}queueLoad(e,t,a,n){const i={},o={},r={},s={};return e.forEach(e=>{let n=!0;t.forEach(t=>{const r=`${e}|${t}`;!a.reload&&this.store.hasResourceBundle(e,t)?this.state[r]=2:this.state[r]<0||(1===this.state[r]?void 0===o[r]&&(o[r]=!0):(this.state[r]=1,n=!1,void 0===o[r]&&(o[r]=!0),void 0===i[r]&&(i[r]=!0),void 0===s[t]&&(s[t]=!0)))}),n||(r[e]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(r),toLoadNamespaces:Object.keys(s)}}loaded(e,t,a){const n=e.split("|"),i=n[0],o=n[1];t&&this.emit("failedLoading",i,o,t),!t&&a&&this.store.addResourceBundle(i,o,a,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&a&&(this.state[e]=0);const r={};this.queue.forEach(a=>{((e,t,a)=>{const{obj:n,k:i}=p(e,t,Object);n[i]=n[i]||[],n[i].push(a)})(a.loaded,[i],o),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(a,e),t&&a.errors.push(t),0!==a.pendingCount||a.done||(Object.keys(a.loaded).forEach(e=>{r[e]||(r[e]={});const t=a.loaded[e];t.length&&t.forEach(t=>{void 0===r[e][t]&&(r[e][t]=!0)})}),a.done=!0,a.errors.length?a.callback(a.errors):a.callback())}),this.emit("loaded",r),this.queue=this.queue.filter(e=>!e.done)}read(e,t,a,n=0,i=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:a,tried:n,wait:i,callback:o});this.readingCalls++;const r=(r,s)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}r&&s&&n<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,a,n+1,2*i,o)},i):o(r,s)},s=this.backend[a].bind(this.backend);if(2!==s.length)return s(e,t,r);try{const a=s(e,t);a&&"function"==typeof a.then?a.then(e=>r(null,e)).catch(r):r(null,a)}catch(e){r(e)}}prepareLoading(e,t,a={},n){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();s(e)&&(e=this.languageUtils.toResolveHierarchy(e)),s(t)&&(t=[t]);const i=this.queueLoad(e,t,a,n);if(!i.toLoad.length)return i.pending.length||n(),null;i.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,a){this.prepareLoading(e,t,{},a)}reload(e,t,a){this.prepareLoading(e,t,{reload:!0},a)}loadOne(e,t=""){const a=e.split("|"),n=a[0],i=a[1];this.read(n,i,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${i} for language ${n} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${i} for language ${n}`,o),this.loaded(e,a,o)})}saveMissing(e,t,a,n,i,o={},r=()=>{}){if(!this.services?.utils?.hasLoadedNamespace||this.services?.utils?.hasLoadedNamespace(t)){if(null!=a&&""!==a){if(this.backend?.create){const s={...o,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let i;i=5===c.length?c(e,t,a,n,s):c(e,t,a,n),i&&"function"==typeof i.then?i.then(e=>r(null,e)).catch(r):r(null,i)}catch(e){r(e)}else c(e,t,a,n,r,s)}e&&e[0]&&this.store.addResource(e[0],t,a,n)}}else this.logger.warn(`did not save key "${a}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const V=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),s(e[1])&&(t.defaultValue=e[1]),s(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const a=e[3]||e[2];Object.keys(a).forEach(e=>{t[e]=a[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),q=e=>(s(e.ns)&&(e.ns=[e.ns]),s(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),s(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e),G=()=>{};class W extends ${constructor(e={},t){var a;if(super(),this.options=q(e),this.services={},this.logger=C,this.modules={external:[]},a=this,Object.getOwnPropertyNames(Object.getPrototypeOf(a)).forEach(e=>{"function"==typeof a[e]&&(a[e]=a[e].bind(a))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(s(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const a=V();this.options={...a,...this.options,...q(e)},this.options.interpolation={...a.interpolation,...this.options.interpolation},void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const n=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?C.init(n(this.modules.logger),this.options):C.init(null,this.options),e=this.modules.formatter?this.modules.formatter:L;const t=new M(this.options);this.store=new A(this.options.resources,this.options);const i=this.services;i.logger=C,i.resourceStore=this.store,i.languageUtils=t,i.pluralResolver=new P(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!e||this.options.interpolation.format&&this.options.interpolation.format!==a.interpolation.format||(i.formatter=n(e),i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new K(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new R(n(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(i.languageDetector=n(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=n(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new I(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=G),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const i=c(),o=()=>{const e=(e,a)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),i.resolve(a),t(e,a)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?o():setTimeout(o,0),i}loadResources(e,t=G){let a=t;const n=s(e)?e:this.language;if("function"==typeof e&&(a=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===n?.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return a();const e=[],t=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};n?t(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e)),this.options.preload?.forEach?.(e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),a(e)})}else a(null)}reloadResources(e,t,a){const n=c();return"function"==typeof e&&(a=e,e=void 0),"function"==typeof t&&(a=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),a||(a=G),this.services.backendConnector.reload(e,t,e=>{n.resolve(),a(e)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&E.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const a=c();this.emit("languageChanging",e);const n=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},i=(i,o)=>{o?this.isLanguageChangingTo===e&&(n(o),this.translator.changeLanguage(o),this.isLanguageChangingTo=void 0,this.emit("languageChanged",o),this.logger.log("languageChanged",o)):this.isLanguageChangingTo=void 0,a.resolve((...e)=>this.t(...e)),t&&t(i,(...e)=>this.t(...e))},o=t=>{e||t||!this.services.languageDetector||(t=[]);const a=s(t)?t:t&&t[0],o=this.store.hasLanguageSomeTranslations(a)?a:this.services.languageUtils.getBestMatchFromCodes(s(t)?[t]:t);o&&(this.language||n(o),this.translator.language||this.translator.changeLanguage(o),this.services.languageDetector?.cacheUserLanguage?.(o)),this.loadResources(o,e=>{i(e,o)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),a}getFixedT(e,t,a){const n=(e,t,...i)=>{let o;o="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(i)):{...t},o.lng=o.lng||n.lng,o.lngs=o.lngs||n.lngs,o.ns=o.ns||n.ns,""!==o.keyPrefix&&(o.keyPrefix=o.keyPrefix||a||n.keyPrefix);const r=this.options.keySeparator||".";let s;return s=o.keyPrefix&&Array.isArray(e)?e.map(e=>`${o.keyPrefix}${r}${e}`):o.keyPrefix?`${o.keyPrefix}${r}${e}`:e,this.t(s,o)};return s(e)?n.lng=e:n.lngs=e,n.ns=t,n.keyPrefix=a,n}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const a=t.lng||this.resolvedLanguage||this.languages[0],n=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===a.toLowerCase())return!0;const o=(e,t)=>{const a=this.services.backendConnector.state[`${e}|${t}`];return-1===a||0===a||2===a};if(t.precheck){const e=t.precheck(this,o);if(void 0!==e)return e}return!(!this.hasResourceBundle(a,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!o(a,e)||n&&!o(i,e)))}loadNamespaces(e,t){const a=c();return this.options.ns?(s(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{a.resolve(),t&&t(e)}),a):(t&&t(),Promise.resolve())}loadLanguages(e,t){const a=c();s(e)&&(e=[e]);const n=this.options.preload||[],i=e.filter(e=>n.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return i.length?(this.options.preload=n.concat(i),this.loadResources(e=>{a.resolve(),t&&t(e)}),a):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services?.languageUtils||new M(V());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new W(e,t)}cloneInstance(e={},t=G){const a=e.forkResourceStore;a&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},i=new W(n);if(void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e)),["store","services","language"].forEach(e=>{i[e]=this[e]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},a){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((a,n)=>(a[n]={...e[t][n]},a),e[t]),e),{});i.store=new A(e,n),i.services.resourceStore=i.store}return i.translator=new I(i.services,n),i.translator.on("*",(e,...t)=>{i.emit(e,...t)}),i.init(n,t),i.translator.options=n,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const X=W.createInstance();X.createInstance=W.createInstance,X.createInstance,X.dir,X.init,X.loadResources,X.reloadResources,X.use,X.changeLanguage,X.getFixedT,X.t,X.exists,X.setDefaultNamespace,X.hasLoadedNamespace,X.loadNamespaces,X.loadLanguages;var H={sto_tools_keybind_manager:"STO Tools Keybind Manager",open:"Open",save:"Save",explorer:"Explorer",keybinds:"Keybinds",import_keybinds:"Import Keybinds",export_keybinds:"Export Keybinds",aliases:"Aliases",import_aliases:"Import Aliases",export_aliases:"Export Aliases",import:"Import",import_menu:"Import",backup:"Backup",backup_menu:"Backup",backup_application_state:"Backup Application State",restore_application_state:"Restore Application State",preferences:"Preferences",language:"Language",sync_folder_label:"Synchronization Folder:",no_folder_selected:"No folder selected",download:"Download",vfx:"VFX",dark_mode:"Dark Mode",load_default_data:"Load Default Data",reset_application:"Reset Application",set_sync_folder:"Set Sync Folder",sync_now:"Sync Now",about:"About",new:"New",clone:"Clone",rename:"Rename",delete:"Delete",space:"Space",ground:"Ground",modified:"Modified",valid:"Valid",keys:"keys",key_singular:"key",all:"All",add_key:"Add Key",copy:"Copy",select_a_key_to_edit:"Select a key to edit",commands:"commands",command_singular:"command",stabilize_execution_order:"Stabilize Execution Order",validate:"Validate",clear:"Clear",no_key_selected:"No Key Selected",select_a_key_from_the_left_panel_to_view_and_edit_its_command_chain:"Select a key from the left panel to view and edit its command chain.",generated_command:"Generated Command:",select_a_key_to_see_the_generated_command:"Select a key to see the generated command",add_command:"Add Command",from_template:"From Template",add_alias:"Add Alias",copy_from_key:"Copy from Key",command_library:"Command Library",add_new_key:"Add New Key",key_name:"Key Name:",use_standard_key_names_like_f1_ctrl_a_shift_space_etc:"Use standard key names like F1, Ctrl+A, Shift+Space, etc.",common_keys:"Common Keys:",ctrl:"Ctrl",alt:"Alt",shift:"Shift",cancel:"Cancel",command_type:"Command Type:",select_command_type:"Select command type...",targeting:"Targeting",combat:"Combat",tray_execution:"Tray Execution",shield_management:"Shield Management",movement:"Movement",camera:"Camera",communication:"Communication",system:"System",alias:"Alias",custom_command:"Custom Command",select_a_command_type_to_see_preview:"Select a command type to see preview",profile:"Profile",profile_name:"Profile Name:",description_optional:"Description (optional):",command_alias_manager:"Command Alias Manager",new_alias:"New Alias",edit_alias:"Edit Alias",alias_name:"Alias Name:",use_alphanumeric_characters_only_no_spaces:"Use alphanumeric characters only, no spaces",description:"Description:",target:"$Target",example_target_self_power_exec_science_team_team_healing_target:"Example: target_self $$ +power_exec Science_Team $$ team Healing [$Target]",use_in_communication_commands_to_include_target_name:"- Use in communication commands to include target name",preview:"Preview:",alias_myalias_command_sequence:'alias MyAlias "command sequence"',save_alias:"Save Alias",select_key:"Select Key",common_keys1:"Common Keys",find_other_keys:"Find other keys...",vfx_manager:"VFX Manager",select_visual_effects_to_disable_using_dynfxsetfxexlusionlist_aliases_effects_are_organized_by_environment:"Select visual effects to disable using dynFxSetFXExlusionList aliases. Effects are organized by environment.",space_effects:"Space Effects",select_all:"Select All",clear_all:"Clear All",selected:"selected",ground_effects:"Ground Effects",generated_aliases:"Generated Aliases:",space_alias:"Space Alias:",no_space_effects_selected:"No space effects selected",ground_alias:"Ground Alias:",no_ground_effects_selected:"No ground effects selected",show_player_say:"Show Player Say",generate_aliases:"Generate Aliases",about_sto_tools_keybind_manager:"About STO Tools Keybind Manager",a_comprehensive_web_based_tool_for_creating_editing_and_managing_star_trek_online_keybind_configurations_with_visual_editing_and_advanced_features:"A comprehensive web-based tool for creating, editing, and managing Star Trek Online keybind configurations with visual editing and advanced features.",features:"Features:",visual_keybind_editor:"Visual keybind editor",sto_command_library_with_search_and_categorization:"STO command library with search and categorization",multiple_profile_management_create_clone_rename_delete:"Multiple profile management (create, clone, rename, delete)",custom_alias_system_for_complex_command_sequences:"Custom alias system for complex command sequences",vertigo_inspired_vfx_manager_for_visual_effects_control:"VERTIGO-inspired VFX Manager for visual effects control",import_export_keybind_and_alias_files_and_project_backups:"Import/export keybind and alias files, and project backups",real_time_validation_and_command_preview:"Real-time validation and command preview",quick_start:"Quick Start:",create_a_new_profile_or_use_the_default_profile:"Create a new profile or use the default profile",select_keys_from_the_grid_and_add_commands_from_the_library:"Select keys from the grid and add commands from the library",use_the_command_chain_editor_to_build_complex_sequences:"Use the command chain editor to build complex sequences",export_your_keybinds_as_txt_files_for_use_in_sto:"Export your keybinds as .txt files for use in STO",resources:"Resources:",copyright:"¬© 2025 STO Tools. All rights reserved.",got_it:"Got it!",file_explorer:"File Explorer",select_an_item_on_the_left_to_preview_export:"Select an item on the left to preview export",close:"Close",select_export_format:"Select Export Format",export_as:"Export As:",sto_keybind_file_txt:"STO Keybind File (.txt)",json_profile_json:"JSON Profile (.json)",complete_project_json:"Complete Project (.json)",csv_data_csv:"CSV Data (.csv)",html_report_html:"HTML Report (.html)",alias_file_txt:"Alias File (.txt)",environment:"Environment:",export:"Export",filter_keys:"Filter keys...",search_commands:"Search commands...",e_g_f5_ctrl_a_shift_1:"e.g., F5, Ctrl+A, Shift+1",enter_profile_name:"Enter profile name",describe_this_keybind_profile:"Describe this keybind profile",myalias:"MyAlias",brief_description_of_what_this_alias_does:"Brief description of what this alias does",enter_command_sequence_use_to_separate_commands:"Enter command sequence (use $$ to separate commands)",search_keys:"Search keys...",open_project_json:"Restore Application State",save_project_json:"Backup Application State",keybind_operations:"Keybind Operations",alias_operations:"Alias Operations",settings:"Settings",select_profile:"Select Profile",new_profile:"New Profile",clone_profile:"Clone Profile",rename_profile:"Rename Profile",delete_profile:"Delete Profile",space_mode:"Space Mode",ground_mode:"Ground Mode",unsaved_changes:"Unsaved Changes",validation_status:"Validation Status",bound_keys:"Bound Keys",toggle_between_grid_and_categorized_view:"Toggle between grid and categorized view",ensures_consistent_execution_order_by_mirroring_commands_phase_1_left_to_right_phase_2_right_to_left:"Ensures consistent execution order by mirroring commands (Phase 1: left-to-right, Phase 2: right-to-left)",validate_command_chain:"Validate Command Chain",clear_all_commands:"Clear All Commands",copy_to_clipboard:"Copy to Clipboard",collapse_expand:"Collapse/Expand",insert_target_variable:"Insert $Target variable",sto_keybind_report:"STO Keybind Report",mode:"Mode:",generated:"Generated:",created_by:"Created by:",statistics:"Statistics",keys_bound:"Keys Bound:",total_commands:"Total Commands:",aliases_defined:"Aliases Defined:",no_keybinds_defined:"No keybinds defined.",command_aliases:"Command Aliases",report_footer:"This report was generated by STO Tools Keybind Manager. For more information about Star Trek Online keybinds, visit the STO Wiki.",command_categories:{targeting:"Targeting",combat:"Combat",tray:"Tray Execution",power:"Shield Management",movement:"Movement",camera:"Camera",communication:"Communication",system:"System"},command_definitions:{target:{name:"Target by Name",description:"Target entity by name (requires quotes)"},target_enemy_near:{name:"Target Nearest Enemy",description:"Target the nearest enemy in view"},target_friend_near:{name:"Target Nearest Friend",description:"Target the nearest friendly entity"},target_self:{name:"Target Self",description:"Target your own ship/character"},target_clear:{name:"Clear Target",description:"Remove current target lock"},target_teammate_1:{name:"Target Teammate 1",description:"Target first team member"},target_teammate_2:{name:"Target Teammate 2",description:"Target second team member"},target_teammate_3:{name:"Target Teammate 3",description:"Target third team member"},target_teammate_4:{name:"Target Teammate 4",description:"Target fourth team member"},fire_all:{name:"Fire All Weapons",description:"Fire all weapons"},fire_phasers:{name:"Fire Energy Weapons",description:"Fire all Energy Weapons"},fire_torps:{name:"Fire Torpedoes",description:"Fire all Torpedos"},fire_mines:{name:"Fire Mines",description:"Fire all Mines"},fire_phasers_torps:{name:"Fire Phasers & Torpedoes",description:"Fire phasers & torpedos"},fire_projectiles:{name:"Fire Projectiles",description:"Fire torpedos & mines"},custom_tray:{name:"Tray Execution",description:"Execute specific tray slot"},tray_with_backup:{name:"Tray Execution with Backup",description:"Execute specific tray slot with backup ability"},tray_range:{name:"Tray Range Execution",description:"Execute a range of tray slots"},tray_range_with_backup:{name:"Tray Range with Backup",description:"Execute a range of tray slots with backup abilities"},whole_tray:{name:"Whole Tray Execution",description:"Execute all slots in a tray"},whole_tray_with_backup:{name:"Whole Tray with Backup",description:"Execute all slots in a tray with backup tray"},distribute_shields:{name:"Distribute Shields",description:"Evenly distributes shields as if clicking in the middle of the ship and shields icon"},reroute_shields_rear:{name:"Reroute Shields Rear",description:"Route shield power to rear facing"},reroute_shields_left:{name:"Reroute Shields Left",description:"Route shield power to left side"},reroute_shields_right:{name:"Reroute Shields Right",description:"Route shield power to right side"},reroute_shields_forward:{name:"Reroute Shields Forward",description:"Route shield power to forward facing"},full_impulse:{name:"Full Impulse",description:"Engage full impulse drive"},reverse:{name:"Reverse",description:"Reverse engines"},throttle_adjust:{name:"Throttle Adjust",description:"Increase or decrease the throttle by amount"},throttle_set:{name:"Throttle Set",description:"Set the throttle to a specific position (negative = reverse, 0 = stop)"},throttle_toggle:{name:"Throttle Toggle",description:"Alternates between full throttle and full stop"},turn_left:{name:"Turn Left",description:"Turn ship left (continuous while held)"},turn_right:{name:"Turn Right",description:"Turn ship right (continuous while held)"},pitch_up:{name:"Pitch Up",description:"Pitch ship nose up (space altitude change)"},pitch_down:{name:"Pitch Down",description:"Pitch ship nose down (space altitude change)"},strafe_left:{name:"Strafe Left",description:"Strafe ship left"},strafe_right:{name:"Strafe Right",description:"Strafe ship right"},forward:{name:"Forward",description:"Move forward"},backward:{name:"Backward",description:"Move backward"},auto_forward:{name:"Auto Forward",description:"Character moves forward until given new movement commands"},follow:{name:"Follow Target",description:"Follow the targeted entity"},follow_cancel:{name:"Cancel Follow",description:"Stop following and forget about the target"},zoom_in:{name:"Zoom In",description:"Zoom the camera in"},zoom_out:{name:"Zoom Out",description:"Zoom the camera out"},zoom_in_small:{name:"Zoom In Small",description:"Zoom the camera in slightly"},zoom_out_small:{name:"Zoom Out Small",description:"Zoom the camera out slightly"},cam_distance:{name:"Set Camera Distance",description:"Sets the camera distance from the player"},cam_reset:{name:"Reset Camera",description:"Reset the camera position to default"},cam_target_lock:{name:"Lock Camera to Target",description:"Lock or unlock the camera to the target"},cam_cycle_distance:{name:"Cycle Camera Distance",description:"Cycle the camera distance between several preset values"},cam_mouse_look:{name:"Mouse Look",description:"Enable mouse look camera control"},cam_turn_to_face:{name:"Turn to Face Camera",description:"Turn ship to face camera direction"},look_up:{name:"Look Up",description:"Change point of view to look straight up"},look_down:{name:"Look Down",description:"Change point of view to look straight down"},team_message:{name:"Team Message",description:"Send message to team"},local_message:{name:"Local Message",description:"Send message to local area"},zone_message:{name:"Zone Message",description:"Send message to zone"},toggle_hud:{name:"Toggle HUD",description:"Toggle HUD visibility"},screenshot:{name:"Screenshot",description:"Take a screenshot"},screenshot_jpg:{name:"Screenshot JPG",description:"Save a screenshot as JPG"},autofire_toggle:{name:"Toggle Autofire",description:"Toggle weapon autofire"},bind_save_file:{name:"Save Binds to File",description:"Save all your binds to a text file"},bind_load_file:{name:"Load Binds from File",description:"Load a bind file into the client"},combat_log:{name:"Toggle Combat Log",description:"Turn combat log recording on/off (1=on, 0=off)"},missions:{name:"Show/Hide Missions",description:"Show/hide the mission journal"},inventory:{name:"Show/Hide Inventory",description:"Show/hide your inventory"},map:{name:"Show/Hide Map",description:"Show/hide the map window"}},category_descriptions:{targeting:"Target selection and management",combat:"Weapon firing and combat actions",tray:"Execute abilities from action trays",power:"Shield power and distribution management",movement:"Ship movement and navigation",camera:"Camera control and view management",communication:"Chat and team communication",system:"UI and system commands"},no_aliases:"No Aliases",create_aliases_hint:"Create command aliases to simplify complex command sequences.",alias_deleted:'Alias "{{alias}}" deleted',please_select_a_key_first:"Please select a key first",alias_added_to_key:'Alias "{{alias}}" added to {{key}}',no_active_profile:"No active profile",alias_exists:"An alias with this name already exists",alias_template_exists:'Alias "{{alias}}" already exists',alias_created_from_template:'Alias "{{alias}}" created from template',template_not_found:"Template not found",alias_not_found:"Alias not found",alias_created:'Alias "{{alias}}" created',alias_updated:'Alias "{{alias}}" updated',no_profile_selected_for_import:"No profile selected for import",no_keybinds_found_in_file:"No keybinds found in file",import_failed:"Import failed: {{error}}",no_aliases_found_in_file:"No aliases found in file",failed_to_get_profile_for_import:"Failed to get profile for import",import_completed_keybinds:"Import completed: {{count}} keybinds",import_completed_keybinds_with_aliases:"Import completed: {{keyCount}} keybinds ({{aliasCount}} aliases ignored - use Import Aliases)",import_completed_aliases:"Import completed: {{count}} aliases",no_profile_selected_to_export:"No profile selected to export",keybind_file_exported:"Keybind file exported successfully",failed_to_export_keybind_file:"Failed to export keybind file: {{error}}",profile_exported_json:"Profile exported as JSON",failed_to_export_profile:"Failed to export profile: {{error}}",complete_project_exported:"Complete project exported",failed_to_export_project:"Failed to export project: {{error}}",data_exported_csv:"Data exported as CSV",failed_to_export_csv:"Failed to export CSV: {{error}}",html_report_exported:"HTML report exported",failed_to_export_html_report:"Failed to export HTML report: {{error}}",no_command_to_copy:"No command to copy",no_profiles_to_export:"No profiles to export",exporting_profiles:"Exporting {{count}} profiles...",aliases_exported_successfully:"Aliases exported successfully",failed_to_export_aliases:"Failed to export aliases: {{error}}",sync_folder_set:"Sync folder selected",failed_to_set_sync_folder:"Failed to select sync folder: {{error}}",no_sync_folder_selected:"No sync folder selected",project_synced_successfully:"Project synchronized successfully",permission_denied_to_folder:"Permission denied to write to folder",failed_to_sync_project:"Failed to sync project: {{error}}",general:"General",synchronization:"Synchronization",appearance:"Appearance",advanced:"Advanced",general_settings:"General Settings",synchronization_settings:"Synchronization Settings",appearance_settings:"Appearance Settings",language_settings:"Language Settings",advanced_settings:"Advanced Settings",auto_save:"Auto Save",auto_save_description:"Automatically save changes as you work",validation_mode:"Validation Mode",validation_mode_description:"How strictly to validate commands and keybinds",strict:"Strict",lenient:"Lenient",disabled:"Disabled",sync_folder_description:"Choose a folder to automatically sync your projects",auto_sync:"Auto Sync",auto_sync_description:"Automatically sync changes to the selected folder",auto_sync_interval:"Auto Sync Interval",auto_sync_interval_description:"How often to automatically sync your changes",after_every_change:"After every change",every_1_minute:"Every 1 minute",every_2_minutes:"Every 2 minutes",every_5_minutes:"Every 5 minutes",auto_sync_completed:"Auto sync completed",selected_folder:"Selected folder",theme:"Theme",theme_description:"Choose between light and dark themes",light_theme:"Light",dark_theme:"Dark",compact_mode:"Compact Mode",compact_mode_description:"Use a more compact interface layout",interface_language:"Interface Language",language_description:"Choose the language for the interface",debug_mode:"Debug Mode",debug_mode_description:"Enable debug logging and developer tools",backup_interval:"Backup Interval",backup_interval_description:"How often to automatically backup your work",every_15_minutes:"Every 15 minutes",every_30_minutes:"Every 30 minutes",every_hour:"Every hour",preferences_saved:"Preferences saved successfully",failed_to_save_preferences:"Failed to save preferences",vfx_manager_description:"Select visual effects to disable using dynFxSetFXExlusionList aliases. Effects are organized by environment.",app_description:"A comprehensive web-based tool for creating, editing, and managing Star Trek Online keybind configurations with visual editing and advanced features.",csv_header:"Key,Command,Type,Description,Position",default_export_filename:"export.txt",select_a_space_ground_build_or_aliases_to_preview_export:"Select a Space/Ground build or Aliases to preview export."},J={sto_tools_keybind_manager:"STO Tools Keybind Manager",open:"√ñffnen",save:"Speichern",explorer:"Explorer",keybinds:"Tastaturbelegung",import_keybinds:"Tastaturbelegung importieren",export_keybinds:"Tastaturbelegung exportieren",aliases:"Aliase",import_aliases:"Aliase importieren",export_aliases:"Aliase exportieren",import:"Importieren",import_menu:"Importieren",backup:"Sicherung",backup_menu:"Sicherung",backup_application_state:"Anwendungsstatus sichern",restore_application_state:"Anwendungsstatus wiederherstellen",preferences:"Einstellungen",language:"Sprache",sync_folder_label:"Synchronisationsordner:",no_folder_selected:"Kein Ordner ausgew√§hlt",download:"Herunterladen",vfx:"VFX",dark_mode:"Dunkler Modus",load_default_data:"Standarddaten laden",reset_application:"Anwendung zur√ºcksetzen",set_sync_folder:"Sync-Ordner festlegen",sync_now:"Jetzt synchronisieren",about:"√úber",new:"Neu",clone:"Klonen",rename:"Umbenennen",delete:"L√∂schen",space:"Weltraum",ground:"Boden",modified:"Ge√§ndert",valid:"G√ºltig",keys:"Tasten",key_singular:"Taste",all:"Alle",add_key:"Taste hinzuf√ºgen",copy:"Kopieren",select_a_key_to_edit:"W√§hlen Sie eine Taste zum Bearbeiten",commands:"Befehle",command_singular:"Befehl",stabilize_execution_order:"Ausf√ºhrungsreihenfolge stabilisieren",validate:"Validieren",clear:"L√∂schen",no_key_selected:"Keine Taste ausgew√§hlt",select_a_key_from_the_left_panel_to_view_and_edit_its_command_chain:"W√§hlen Sie eine Taste aus dem linken Panel, um ihre Befehlskette anzuzeigen und zu bearbeiten.",generated_command:"Generierter Befehl:",select_a_key_to_see_the_generated_command:"W√§hlen Sie eine Taste, um den generierten Befehl zu sehen",add_command:"Befehl hinzuf√ºgen",from_template:"Aus Vorlage",add_alias:"Alias hinzuf√ºgen",copy_from_key:"Von Taste kopieren",command_library:"Befehlsbibliothek",add_new_key:"Neue Taste hinzuf√ºgen",key_name:"Tastenname:",use_standard_key_names_like_f1_ctrl_a_shift_space_etc:"Verwenden Sie Standardtastennamen wie F1, Strg+A, Umschalt+Leertaste, etc.",common_keys:"H√§ufige Tasten:",ctrl:"Strg",alt:"Alt",shift:"Umschalt",cancel:"Abbrechen",command_type:"Befehlstyp:",select_command_type:"Befehlstyp ausw√§hlen...",targeting:"Zielerfassung",combat:"Kampf",tray_execution:"Tray-Ausf√ºhrung",shield_management:"Schildverwaltung",movement:"Bewegung",camera:"Kamera",communication:"Kommunikation",system:"System",alias:"Alias",custom_command:"Benutzerdefinierter Befehl",select_a_command_type_to_see_preview:"W√§hlen Sie einen Befehlstyp f√ºr eine Vorschau",profile:"Profil",profile_name:"Profilname:",description_optional:"Beschreibung (optional):",command_alias_manager:"Befehlsalias-Manager",new_alias:"Neuer Alias",edit_alias:"Alias bearbeiten",alias_name:"Alias-Name:",use_alphanumeric_characters_only_no_spaces:"Verwenden Sie nur alphanumerische Zeichen, keine Leerzeichen",description:"Beschreibung:",target:"$Target",example_target_self_power_exec_science_team_team_healing_target:"Beispiel: target_self $$ +power_exec Science_Team $$ team Healing [$Target]",use_in_communication_commands_to_include_target_name:"- Verwenden Sie in Kommunikationsbefehlen, um Zielnamen einzuschlie√üen",preview:"Vorschau:",alias_myalias_command_sequence:'alias MeinAlias "Befehlssequenz"',save_alias:"Alias speichern",select_key:"Taste ausw√§hlen",common_keys1:"H√§ufige Tasten",find_other_keys:"Andere Tasten finden...",vfx_manager:"VFX-Manager",select_visual_effects_to_disable_using_dynfxsetfxexlusionlist_aliases_effects_are_organized_by_environment:"W√§hlen Sie visuelle Effekte zum Deaktivieren mit dynFxSetFXExlusionList-Aliasen. Effekte sind nach Umgebung organisiert.",space_effects:"Weltraum-Effekte",select_all:"Alle ausw√§hlen",clear_all:"Alle l√∂schen",selected:"ausgew√§hlt",ground_effects:"Boden-Effekte",generated_aliases:"Generierte Aliase:",space_alias:"Weltraum-Alias:",no_space_effects_selected:"Keine Weltraum-Effekte ausgew√§hlt",ground_alias:"Boden-Alias:",no_ground_effects_selected:"Keine Boden-Effekte ausgew√§hlt",show_player_say:"Spieler-Say anzeigen",generate_aliases:"Aliase generieren",about_sto_tools_keybind_manager:"√úber STO Tools Keybind Manager",a_comprehensive_web_based_tool_for_creating_editing_and_managing_star_trek_online_keybind_configurations_with_visual_editing_and_advanced_features:"Ein umfassendes webbasiertes Tool zum Erstellen, Bearbeiten und Verwalten von Star Trek Online Keybind-Konfigurationen mit visueller Bearbeitung und erweiterten Funktionen.",features:"Funktionen:",visual_keybind_editor:"Visueller Keybind-Editor",sto_command_library_with_search_and_categorization:"STO-Befehlsbibliothek mit Suche und Kategorisierung",multiple_profile_management_create_clone_rename_delete:"Mehrfache Profilverwaltung (erstellen, klonen, umbenennen, l√∂schen)",custom_alias_system_for_complex_command_sequences:"Benutzerdefiniertes Alias-System f√ºr komplexe Befehlssequenzen",vertigo_inspired_vfx_manager_for_visual_effects_control:"VERTIGO-inspirierter VFX-Manager zur Kontrolle visueller Effekte",import_export_keybind_and_alias_files_and_project_backups:"Import/Export von Keybind- und Alias-Dateien sowie Projekt-Backups",real_time_validation_and_command_preview:"Echtzeit-Validierung und Befehlsvorschau",quick_start:"Schnellstart:",create_a_new_profile_or_use_the_default_profile:"Erstellen Sie ein neues Profil oder verwenden Sie das Standardprofil",select_keys_from_the_grid_and_add_commands_from_the_library:"W√§hlen Sie Tasten aus dem Raster und f√ºgen Sie Befehle aus der Bibliothek hinzu",use_the_command_chain_editor_to_build_complex_sequences:"Verwenden Sie den Befehlsketten-Editor, um komplexe Sequenzen zu erstellen",export_your_keybinds_as_txt_files_for_use_in_sto:"Exportieren Sie Ihre Keybinds als .txt-Dateien f√ºr die Verwendung in STO",resources:"Ressourcen:",copyright:"¬© 2025 STO Tools. Alle Rechte vorbehalten.",got_it:"Verstanden!",file_explorer:"Datei-Explorer",select_an_item_on_the_left_to_preview_export:"W√§hlen Sie ein Element links aus, um den Export in der Vorschau anzuzeigen",close:"Schlie√üen",select_export_format:"Exportformat ausw√§hlen",export_as:"Exportieren als:",sto_keybind_file_txt:"STO Keybind-Datei (.txt)",json_profile_json:"JSON-Profil (.json)",complete_project_json:"Vollst√§ndiges Projekt (.json)",csv_data_csv:"CSV-Daten (.csv)",html_report_html:"HTML-Bericht (.html)",alias_file_txt:"Alias-Datei (.txt)",environment:"Umgebung:",export:"Exportieren",filter_keys:"Tasten filtern...",search_commands:"Befehle suchen...",e_g_f5_ctrl_a_shift_1:"z.B. F5, Strg+A, Umschalt+1",enter_profile_name:"Profilnamen eingeben",describe_this_keybind_profile:"Dieses Keybind-Profil beschreiben",myalias:"MeinAlias",brief_description_of_what_this_alias_does:"Kurze Beschreibung, was dieser Alias tut",enter_command_sequence_use_to_separate_commands:"Befehlssequenz eingeben (verwenden Sie $$ zur Trennung von Befehlen)",search_keys:"Tasten suchen...",open_project_json:"Projekt JSON √∂ffnen",save_project_json:"Projekt JSON speichern",keybind_operations:"Keybind-Operationen",alias_operations:"Alias-Operationen",settings:"Einstellungen",select_profile:"Profil ausw√§hlen",new_profile:"Neues Profil",clone_profile:"Profil klonen",rename_profile:"Profil umbenennen",delete_profile:"Profil l√∂schen",space_mode:"Weltraum-Modus",ground_mode:"Boden-Modus",unsaved_changes:"Ungespeicherte √Ñnderungen",validation_status:"Validierungsstatus",bound_keys:"Gebundene Tasten",toggle_between_grid_and_categorized_view:"Zwischen Raster- und kategorisierter Ansicht wechseln",ensures_consistent_execution_order_by_mirroring_commands_phase_1_left_to_right_phase_2_right_to_left:"Gew√§hrleistet konsistente Ausf√ºhrungsreihenfolge durch Spiegelung der Befehle (Phase 1: links nach rechts, Phase 2: rechts nach links)",validate_command_chain:"Befehlskette validieren",clear_all_commands:"Alle Befehle l√∂schen",copy_to_clipboard:"In Zwischenablage kopieren",collapse_expand:"Einklappen/Ausklappen",insert_target_variable:"$Target-Variable einf√ºgen",sto_keybind_report:"STO Keybind-Bericht",mode:"Modus:",generated:"Generiert:",created_by:"Erstellt von:",statistics:"Statistiken",keys_bound:"Gebundene Tasten:",total_commands:"Gesamtbefehle:",aliases_defined:"Definierte Aliase:",no_keybinds_defined:"Keine Keybinds definiert.",command_aliases:"Befehlsaliase",report_footer:"Dieser Bericht wurde vom STO Tools Keybind Manager generiert. F√ºr weitere Informationen √ºber Star Trek Online Keybinds besuchen Sie das STO Wiki.",command_categories:{targeting:"Zielerfassung",combat:"Kampf",tray:"Tray-Ausf√ºhrung",power:"Schildverwaltung",movement:"Bewegung",camera:"Kamera",communication:"Kommunikation",system:"System"},command_definitions:{target:{name:"Ziel nach Name",description:"Ziel nach Namen anvisieren (ben√∂tigt Anf√ºhrungszeichen)"},target_enemy_near:{name:"N√§chsten Feind anvisieren",description:"Den n√§chsten sichtbaren Feind anvisieren"},target_friend_near:{name:"N√§chsten Verb√ºndeten anvisieren",description:"Die n√§chste befreundete Einheit anvisieren"},target_self:{name:"Sich selbst anvisieren",description:"Das eigene Schiff/den eigenen Charakter anvisieren"},target_clear:{name:"Ziel aufheben",description:"Aktuelle Zielerfassung aufheben"},target_teammate_1:{name:"Teammitglied 1 anvisieren",description:"Erstes Teammitglied anvisieren"},target_teammate_2:{name:"Teammitglied 2 anvisieren",description:"Zweites Teammitglied anvisieren"},target_teammate_3:{name:"Teammitglied 3 anvisieren",description:"Drittes Teammitglied anvisieren"},target_teammate_4:{name:"Teammitglied 4 anvisieren",description:"Viertes Teammitglied anvisieren"},fire_all:{name:"Alle Waffen feuern",description:"Alle Waffen feuern"},fire_phasers:{name:"Energiewaffen feuern",description:"Alle Energiewaffen feuern"},fire_torps:{name:"Torpedos feuern",description:"Alle Torpedos feuern"},fire_mines:{name:"Minen feuern",description:"Alle Minen feuern"},fire_phasers_torps:{name:"Phaser & Torpedos feuern",description:"Phaser & Torpedos feuern"},fire_projectiles:{name:"Projektile feuern",description:"Torpedos & Minen feuern"},custom_tray:{name:"Tray-Ausf√ºhrung",description:"Bestimmten Tray-Slot ausf√ºhren"},tray_with_backup:{name:"Tray-Ausf√ºhrung mit Backup",description:"Bestimmten Tray-Slot mit Backup-F√§higkeit ausf√ºhren"},tray_range:{name:"Tray-Bereich-Ausf√ºhrung",description:"Einen Bereich von Tray-Slots ausf√ºhren"},tray_range_with_backup:{name:"Tray-Bereich mit Backup",description:"Einen Bereich von Tray-Slots mit Backup-F√§higkeiten ausf√ºhren"},whole_tray:{name:"Gesamtes Tray ausf√ºhren",description:"Alle Slots in einem Tray ausf√ºhren"},whole_tray_with_backup:{name:"Gesamtes Tray mit Backup",description:"Alle Slots in einem Tray mit Backup-Tray ausf√ºhren"},distribute_shields:{name:"Schilde verteilen",description:"Schilde gleichm√§√üig verteilen, als w√ºrde man in die Mitte des Schiff- und Schildsymbols klicken"},reroute_shields_rear:{name:"Schilde nach hinten umleiten",description:"Schildenergie zur Heckseite umleiten"},reroute_shields_left:{name:"Schilde nach links umleiten",description:"Schildenergie zur linken Seite umleiten"},reroute_shields_right:{name:"Schilde nach rechts umleiten",description:"Schildenergie zur rechten Seite umleiten"},reroute_shields_forward:{name:"Schilde nach vorne umleiten",description:"Schildenergie zur Bugseite umleiten"},full_impulse:{name:"Vollimpuls",description:"Vollimpulsantrieb einschalten"},reverse:{name:"R√ºckw√§rts",description:"Triebwerke r√ºckw√§rts"},throttle_adjust:{name:"Schub anpassen",description:"Schub um Betrag erh√∂hen oder verringern"},throttle_set:{name:"Schub setzen",description:"Schub auf bestimmte Position setzen (negativ = r√ºckw√§rts, 0 = stopp)"},throttle_toggle:{name:"Schub umschalten",description:"Zwischen Vollschub und Vollstopp wechseln"},turn_left:{name:"Links drehen",description:"Schiff nach links drehen (kontinuierlich w√§hrend gehalten)"},turn_right:{name:"Rechts drehen",description:"Schiff nach rechts drehen (kontinuierlich w√§hrend gehalten)"},pitch_up:{name:"Aufw√§rts neigen",description:"Schiffsnase nach oben neigen (H√∂hen√§nderung im Weltraum)"},pitch_down:{name:"Abw√§rts neigen",description:"Schiffsnase nach unten neigen (H√∂hen√§nderung im Weltraum)"},strafe_left:{name:"Links seitlich bewegen",description:"Schiff nach links seitlich bewegen"},strafe_right:{name:"Rechts seitlich bewegen",description:"Schiff nach rechts seitlich bewegen"},forward:{name:"Vorw√§rts",description:"Vorw√§rts bewegen"},backward:{name:"R√ºckw√§rts",description:"R√ºckw√§rts bewegen"},auto_forward:{name:"Auto-Vorw√§rts",description:"Charakter bewegt sich vorw√§rts bis neue Bewegungsbefehle gegeben werden"},follow:{name:"Ziel folgen",description:"Der anvisierten Einheit folgen"},follow_cancel:{name:"Folgen abbrechen",description:"Aufh√∂ren zu folgen und Ziel vergessen"},zoom_in:{name:"Hineinzoomen",description:"Kamera hineinzoomen"},zoom_out:{name:"Herauszoomen",description:"Kamera herauszoomen"},zoom_in_small:{name:"Leicht hineinzoomen",description:"Kamera leicht hineinzoomen"},zoom_out_small:{name:"Leicht herauszoomen",description:"Kamera leicht herauszoomen"},cam_distance:{name:"Kameraentfernung setzen",description:"Kameraentfernung vom Spieler setzen"},cam_reset:{name:"Kamera zur√ºcksetzen",description:"Kameraposition auf Standard zur√ºcksetzen"},cam_target_lock:{name:"Kamera an Ziel fixieren",description:"Kamera am Ziel fixieren oder l√∂sen"},cam_cycle_distance:{name:"Kameraentfernung wechseln",description:"Kameraentfernung zwischen mehreren voreingestellten Werten wechseln"},cam_mouse_look:{name:"Maus-Blick",description:"Maus-Blick-Kamerasteuerung aktivieren"},cam_turn_to_face:{name:"Zur Kamera drehen",description:"Schiff in Kamerarichtung drehen"},look_up:{name:"Nach oben blicken",description:"Blickwinkel √§ndern um geradeaus nach oben zu blicken"},look_down:{name:"Nach unten blicken",description:"Blickwinkel √§ndern um geradeaus nach unten zu blicken"},team_message:{name:"Team-Nachricht",description:"Nachricht an Team senden"},local_message:{name:"Lokale Nachricht",description:"Nachricht an lokalen Bereich senden"},zone_message:{name:"Zonen-Nachricht",description:"Nachricht an Zone senden"},toggle_hud:{name:"HUD umschalten",description:"HUD-Sichtbarkeit umschalten"},screenshot:{name:"Screenshot",description:"Einen Screenshot machen"},screenshot_jpg:{name:"Screenshot JPG",description:"Einen Screenshot als JPG speichern"},autofire_toggle:{name:"Autofeuer umschalten",description:"Waffen-Autofeuer umschalten"},bind_save_file:{name:"Binds in Datei speichern",description:"Alle Binds in eine Textdatei speichern"},bind_load_file:{name:"Binds aus Datei laden",description:"Eine Bind-Datei in den Client laden"},combat_log:{name:"Kampflog umschalten",description:"Kampflog-Aufzeichnung ein-/ausschalten (1=ein, 0=aus)"},missions:{name:"Missionen anzeigen/verbergen",description:"Missionstagebuch anzeigen/verbergen"},inventory:{name:"Inventar anzeigen/verbergen",description:"Inventar anzeigen/verbergen"},map:{name:"Karte anzeigen/verbergen",description:"Kartenfenster anzeigen/verbergen"}},category_descriptions:{targeting:"Zielauswahl und -verwaltung",combat:"Waffenfeuer und Kampfaktionen",tray:"F√§higkeiten aus Aktions-Trays ausf√ºhren",power:"Schildenergie und Verteilungsverwaltung",movement:"Schiffsbewegung und Navigation",camera:"Kamerasteuerung und Ansichtsverwaltung",communication:"Chat und Teamkommunikation",system:"UI- und Systembefehle"},no_aliases:"Keine Aliase",create_aliases_hint:"Erstellen Sie Befehlsaliase um komplexe Befehlssequenzen zu vereinfachen.",alias_deleted:'Alias "{{alias}}" gel√∂scht',please_select_a_key_first:"Bitte w√§hlen Sie zuerst eine Taste",alias_added_to_key:'Alias "{{alias}}" zu {{key}} hinzugef√ºgt',no_active_profile:"Kein aktives Profil",alias_exists:"Ein Alias mit diesem Namen existiert bereits",alias_template_exists:'Alias "{{alias}}" existiert bereits',alias_created_from_template:'Alias "{{alias}}" aus Vorlage erstellt',template_not_found:"Vorlage nicht gefunden",alias_not_found:"Alias nicht gefunden",alias_created:'Alias "{{alias}}" erstellt',alias_updated:'Alias "{{alias}}" aktualisiert',no_profile_selected_for_import:"Kein Profil f√ºr Import ausgew√§hlt",no_keybinds_found_in_file:"Keine Keybinds in Datei gefunden",import_failed:"Import fehlgeschlagen: {{error}}",no_aliases_found_in_file:"Keine Aliase in Datei gefunden",failed_to_get_profile_for_import:"Profil f√ºr Import konnte nicht abgerufen werden",import_completed_keybinds:"Import abgeschlossen: {{count}} Keybinds",import_completed_keybinds_with_aliases:"Import abgeschlossen: {{keyCount}} Keybinds ({{aliasCount}} Aliase ignoriert - verwenden Sie Aliase importieren)",import_completed_aliases:"Import abgeschlossen: {{count}} Aliase",no_profile_selected_to_export:"Kein Profil f√ºr Export ausgew√§hlt",keybind_file_exported:"Keybind-Datei erfolgreich exportiert",failed_to_export_keybind_file:"Keybind-Datei Export fehlgeschlagen: {{error}}",profile_exported_json:"Profil als JSON exportiert",failed_to_export_profile:"Profil Export fehlgeschlagen: {{error}}",complete_project_exported:"Vollst√§ndiges Projekt exportiert",failed_to_export_project:"Projekt Export fehlgeschlagen: {{error}}",data_exported_csv:"Daten als CSV exportiert",failed_to_export_csv:"CSV Export fehlgeschlagen: {{error}}",html_report_exported:"HTML-Bericht exportiert",failed_to_export_html_report:"HTML-Bericht Export fehlgeschlagen: {{error}}",no_command_to_copy:"Kein Befehl zum Kopieren",no_profiles_to_export:"Keine Profile zum Exportieren",exporting_profiles:"Exportiere {{count}} Profile...",aliases_exported_successfully:"Aliase erfolgreich exportiert",failed_to_export_aliases:"Alias Export fehlgeschlagen: {{error}}",sync_folder_set:"Sync-Ordner ausgew√§hlt",failed_to_set_sync_folder:"Sync-Ordner ausw√§hlen fehlgeschlagen: {{error}}",no_sync_folder_selected:"Kein Sync-Ordner ausgew√§hlt",project_synced_successfully:"Projekt erfolgreich synchronisiert",permission_denied_to_folder:"Berechtigung zum Schreiben in Ordner verweigert",failed_to_sync_project:"Projekt-Synchronisation fehlgeschlagen: {{error}}",general:"Allgemein",synchronization:"Synchronisation",appearance:"Erscheinungsbild",advanced:"Erweitert",general_settings:"Allgemeine Einstellungen",synchronization_settings:"Synchronisationseinstellungen",appearance_settings:"Erscheinungsbildeinstellungen",language_settings:"Spracheinstellungen",advanced_settings:"Erweiterte Einstellungen",auto_save:"Automatisch speichern",auto_save_description:"√Ñnderungen automatisch w√§hrend der Arbeit speichern",validation_mode:"Validierungsmodus",validation_mode_description:"Wie streng Befehle und Keybinds validiert werden sollen",strict:"Streng",lenient:"Nachsichtig",disabled:"Deaktiviert",sync_folder_description:"W√§hlen Sie einen Ordner zum automatischen Synchronisieren Ihrer Projekte",auto_sync:"Automatische Synchronisation",auto_sync_description:"√Ñnderungen automatisch mit dem ausgew√§hlten Ordner synchronisieren",auto_sync_interval:"Auto-Sync-Intervall",auto_sync_interval_description:"Wie oft Ihre √Ñnderungen automatisch synchronisiert werden sollen",after_every_change:"Nach jeder √Ñnderung",every_1_minute:"Jede Minute",every_2_minutes:"Alle 2 Minuten",every_5_minutes:"Alle 5 Minuten",auto_sync_completed:"Auto-Sync abgeschlossen",selected_folder:"Ausgew√§hlter Ordner",theme:"Theme",theme_description:"W√§hlen Sie zwischen hellem und dunklem Theme",light_theme:"Hell",dark_theme:"Dunkel",compact_mode:"Kompaktmodus",compact_mode_description:"Kompakteres Interface-Layout verwenden",interface_language:"Interface-Sprache",language_description:"W√§hlen Sie die Sprache f√ºr das Interface",debug_mode:"Debug-Modus",debug_mode_description:"Debug-Protokollierung und Entwicklertools aktivieren",backup_interval:"Backup-Intervall",backup_interval_description:"Wie oft Ihre Arbeit automatisch gesichert werden soll",every_15_minutes:"Alle 15 Minuten",every_30_minutes:"Alle 30 Minuten",every_hour:"Jede Stunde",preferences_saved:"Einstellungen erfolgreich gespeichert",failed_to_save_preferences:"Einstellungen konnten nicht gespeichert werden",vfx_manager_description:"W√§hlen Sie visuelle Effekte aus, die mit dynFxSetFXExlusionList-Aliasen deaktiviert werden sollen. Effekte sind nach Umgebung organisiert.",app_description:"Ein umfassendes webbasiertes Tool zum Erstellen, Bearbeiten und Verwalten von Star Trek Online Keybind-Konfigurationen mit visueller Bearbeitung und erweiterten Funktionen.",csv_header:"Taste,Befehl,Typ,Beschreibung,Position",default_export_filename:"export.txt",select_a_space_ground_build_or_aliases_to_preview_export:"W√§hlen Sie einen Raum-/Boden-Build oder Aliase aus, um die Exportvorschau anzuzeigen."},Z={sto_tools_keybind_manager:"STO Tools Keybind Manager",open:"Ouvrir",save:"Enregistrer",explorer:"Explorateur",keybinds:"Raccourcis",import_keybinds:"Importer les raccourcis",export_keybinds:"Exporter les raccourcis",aliases:"Alias",import_aliases:"Importer les alias",export_aliases:"Exporter les alias",import:"Importer",import_menu:"Importer",backup:"Sauvegarde",backup_menu:"Sauvegarde",backup_application_state:"Sauvegarder l'√©tat de l'application",restore_application_state:"Restaurer l'√©tat de l'application",preferences:"Pr√©f√©rences",language:"Langue",sync_folder_label:"Dossier de synchronisation :",no_folder_selected:"Aucun dossier s√©lectionn√©",download:"T√©l√©charger",vfx:"VFX",dark_mode:"Mode sombre",load_default_data:"Charger les donn√©es par d√©faut",reset_application:"R√©initialiser l'application",set_sync_folder:"D√©finir dossier de synchronisation",sync_now:"Synchroniser maintenant",about:"√Ä propos",new:"Nouveau",clone:"Cloner",rename:"Renommer",delete:"Supprimer",space:"Espace",ground:"Sol",modified:"Modifi√©",valid:"Valide",keys:"touches",key_singular:"touche",all:"Tout",add_key:"Ajouter une touche",copy:"Copier",select_a_key_to_edit:"S√©lectionnez une touche √† modifier",commands:"commandes",command_singular:"commande",stabilize_execution_order:"Stabiliser l'ordre d'ex√©cution",validate:"Valider",clear:"Effacer",no_key_selected:"Aucune touche s√©lectionn√©e",select_a_key_from_the_left_panel_to_view_and_edit_its_command_chain:"S√©lectionnez une touche dans le panneau de gauche pour voir et modifier sa cha√Æne de commandes.",generated_command:"Commande g√©n√©r√©e :",select_a_key_to_see_the_generated_command:"S√©lectionnez une touche pour voir la commande g√©n√©r√©e",add_command:"Ajouter une commande",from_template:"√Ä partir d'un mod√®le",add_alias:"Ajouter un alias",copy_from_key:"Copier depuis la touche",command_library:"Biblioth√®que de commandes",add_new_key:"Ajouter une nouvelle touche",key_name:"Nom de la touche :",use_standard_key_names_like_f1_ctrl_a_shift_space_etc:"Utilisez des noms de touches standard comme F1, Ctrl+A, Maj+Espace, etc.",common_keys:"Touches communes :",ctrl:"Ctrl",alt:"Alt",shift:"Maj",cancel:"Annuler",command_type:"Type de commande :",select_command_type:"S√©lectionner le type de commande...",targeting:"Ciblage",combat:"Combat",tray_execution:"Ex√©cution de plateau",shield_management:"Gestion des boucliers",movement:"Mouvement",camera:"Cam√©ra",communication:"Communication",system:"Syst√®me",alias:"Alias",custom_command:"Commande personnalis√©e",select_a_command_type_to_see_preview:"S√©lectionnez un type de commande pour voir l'aper√ßu",profile:"Profil",profile_name:"Nom du profil :",description_optional:"Description (optionnelle) :",command_alias_manager:"Gestionnaire d'alias de commandes",new_alias:"Nouvel alias",edit_alias:"Modifier l'alias",alias_name:"Nom de l'alias :",use_alphanumeric_characters_only_no_spaces:"Utilisez uniquement des caract√®res alphanum√©riques, pas d'espaces",description:"Description :",target:"$Target",example_target_self_power_exec_science_team_team_healing_target:"Exemple : target_self $$ +power_exec Science_Team $$ team Healing [$Target]",use_in_communication_commands_to_include_target_name:"- Utilisez dans les commandes de communication pour inclure le nom de la cible",preview:"Aper√ßu :",alias_myalias_command_sequence:'alias MonAlias "s√©quence de commandes"',save_alias:"Enregistrer l'alias",select_key:"S√©lectionner une touche",common_keys1:"Touches communes",find_other_keys:"Trouver d'autres touches...",vfx_manager:"Gestionnaire VFX",select_visual_effects_to_disable_using_dynfxsetfxexlusionlist_aliases_effects_are_organized_by_environment:"S√©lectionnez les effets visuels √† d√©sactiver en utilisant les alias dynFxSetFXExlusionList. Les effets sont organis√©s par environnement.",space_effects:"Effets d'espace",select_all:"Tout s√©lectionner",clear_all:"Tout effacer",selected:"s√©lectionn√©",ground_effects:"Effets de sol",generated_aliases:"Alias g√©n√©r√©s :",space_alias:"Alias d'espace :",no_space_effects_selected:"Aucun effet d'espace s√©lectionn√©",ground_alias:"Alias de sol :",no_ground_effects_selected:"Aucun effet de sol s√©lectionn√©",show_player_say:"Afficher le Say du joueur",generate_aliases:"G√©n√©rer les alias",about_sto_tools_keybind_manager:"√Ä propos de STO Tools Keybind Manager",a_comprehensive_web_based_tool_for_creating_editing_and_managing_star_trek_online_keybind_configurations_with_visual_editing_and_advanced_features:"Un outil web complet pour cr√©er, modifier et g√©rer les configurations de raccourcis Star Trek Online avec √©dition visuelle et fonctionnalit√©s avanc√©es.",features:"Fonctionnalit√©s :",visual_keybind_editor:"√âditeur visuel de raccourcis",sto_command_library_with_search_and_categorization:"Biblioth√®que de commandes STO avec recherche et cat√©gorisation",multiple_profile_management_create_clone_rename_delete:"Gestion de profils multiples (cr√©er, cloner, renommer, supprimer)",custom_alias_system_for_complex_command_sequences:"Syst√®me d'alias personnalis√© pour les s√©quences de commandes complexes",vertigo_inspired_vfx_manager_for_visual_effects_control:"Gestionnaire VFX inspir√© de VERTIGO pour le contr√¥le des effets visuels",import_export_keybind_and_alias_files_and_project_backups:"Import/export de fichiers de raccourcis et d'alias, et sauvegardes de projet",real_time_validation_and_command_preview:"Validation en temps r√©el et aper√ßu des commandes",quick_start:"D√©marrage rapide :",create_a_new_profile_or_use_the_default_profile:"Cr√©ez un nouveau profil ou utilisez le profil par d√©faut",select_keys_from_the_grid_and_add_commands_from_the_library:"S√©lectionnez des touches dans la grille et ajoutez des commandes depuis la biblioth√®que",use_the_command_chain_editor_to_build_complex_sequences:"Utilisez l'√©diteur de cha√Ænes de commandes pour construire des s√©quences complexes",export_your_keybinds_as_txt_files_for_use_in_sto:"Exportez vos raccourcis en fichiers .txt pour utilisation dans STO",resources:"Ressources :",copyright:"¬© 2025 STO Tools. Tous droits r√©serv√©s.",got_it:"Compris !",file_explorer:"Explorateur de fichiers",select_an_item_on_the_left_to_preview_export:"S√©lectionnez un √©l√©ment √† gauche pour pr√©visualiser l'export",close:"Fermer",select_export_format:"S√©lectionner le format d'export",export_as:"Exporter en :",sto_keybind_file_txt:"Fichier de raccourcis STO (.txt)",json_profile_json:"Profil JSON (.json)",complete_project_json:"Projet complet (.json)",csv_data_csv:"Donn√©es CSV (.csv)",html_report_html:"Rapport HTML (.html)",alias_file_txt:"Fichier d'alias (.txt)",environment:"Environnement :",export:"Exporter",filter_keys:"Filtrer les touches...",search_commands:"Rechercher des commandes...",e_g_f5_ctrl_a_shift_1:"ex. F5, Ctrl+A, Maj+1",enter_profile_name:"Entrez le nom du profil",describe_this_keybind_profile:"D√©crivez ce profil de raccourcis",myalias:"MonAlias",brief_description_of_what_this_alias_does:"Br√®ve description de ce que fait cet alias",enter_command_sequence_use_to_separate_commands:"Entrez la s√©quence de commandes (utilisez $$ pour s√©parer les commandes)",search_keys:"Rechercher des touches...",open_project_json:"Ouvrir le JSON du projet",save_project_json:"Enregistrer le JSON du projet",keybind_operations:"Op√©rations de raccourcis",alias_operations:"Op√©rations d'alias",settings:"Param√®tres",select_profile:"S√©lectionner un profil",new_profile:"Nouveau profil",clone_profile:"Cloner le profil",rename_profile:"Renommer le profil",delete_profile:"Supprimer le profil",space_mode:"Mode espace",ground_mode:"Mode sol",unsaved_changes:"Modifications non enregistr√©es",validation_status:"Statut de validation",bound_keys:"Touches li√©es",toggle_between_grid_and_categorized_view:"Basculer entre la vue grille et cat√©goris√©e",ensures_consistent_execution_order_by_mirroring_commands_phase_1_left_to_right_phase_2_right_to_left:"Assure un ordre d'ex√©cution coh√©rent en miroir des commandes (Phase 1 : gauche √† droite, Phase 2 : droite √† gauche)",validate_command_chain:"Valider la cha√Æne de commandes",clear_all_commands:"Effacer toutes les commandes",copy_to_clipboard:"Copier dans le presse-papiers",collapse_expand:"R√©duire/D√©velopper",insert_target_variable:"Ins√©rer la variable $Target",sto_keybind_report:"Rapport de raccourcis STO",mode:"Mode :",generated:"G√©n√©r√© :",created_by:"Cr√©√© par :",statistics:"Statistiques",keys_bound:"Touches li√©es :",total_commands:"Total des commandes :",aliases_defined:"Alias d√©finis :",no_keybinds_defined:"Aucun raccourci d√©fini.",command_aliases:"Alias de commandes",report_footer:"Ce rapport a √©t√© g√©n√©r√© par STO Tools Keybind Manager. Pour plus d'informations sur les raccourcis Star Trek Online, visitez le Wiki STO.",command_categories:{targeting:"Ciblage",combat:"Combat",tray:"Ex√©cution de plateau",power:"Gestion des boucliers",movement:"Mouvement",camera:"Cam√©ra",communication:"Communication",system:"Syst√®me"},command_definitions:{target:{name:"Cibler par nom",description:"Cibler une entit√© par son nom (n√©cessite des guillemets)"},target_enemy_near:{name:"Cibler l'ennemi le plus proche",description:"Cibler l'ennemi le plus proche en vue"},target_friend_near:{name:"Cibler l'alli√© le plus proche",description:"Cibler l'entit√© amie la plus proche"},target_self:{name:"Se cibler soi-m√™me",description:"Cibler votre propre vaisseau/personnage"},target_clear:{name:"Effacer la cible",description:"Supprimer le verrouillage de cible actuel"},target_teammate_1:{name:"Cibler co√©quipier 1",description:"Cibler le premier membre de l'√©quipe"},target_teammate_2:{name:"Cibler co√©quipier 2",description:"Cibler le deuxi√®me membre de l'√©quipe"},target_teammate_3:{name:"Cibler co√©quipier 3",description:"Cibler le troisi√®me membre de l'√©quipe"},target_teammate_4:{name:"Cibler co√©quipier 4",description:"Cibler le quatri√®me membre de l'√©quipe"},fire_all:{name:"Tirer toutes les armes",description:"Tirer toutes les armes"},fire_phasers:{name:"Tirer armes √† √©nergie",description:"Tirer toutes les armes √† √©nergie"},fire_torps:{name:"Tirer torpilles",description:"Tirer toutes les torpilles"},fire_mines:{name:"Tirer mines",description:"Tirer toutes les mines"},fire_phasers_torps:{name:"Tirer phasers et torpilles",description:"Tirer phasers et torpilles"},fire_projectiles:{name:"Tirer projectiles",description:"Tirer torpilles et mines"},custom_tray:{name:"Ex√©cution de plateau",description:"Ex√©cuter un emplacement de plateau sp√©cifique"},tray_with_backup:{name:"Ex√©cution de plateau avec sauvegarde",description:"Ex√©cuter un emplacement de plateau sp√©cifique avec capacit√© de sauvegarde"},tray_range:{name:"Ex√©cution de plage de plateau",description:"Ex√©cuter une plage d'emplacements de plateau"},tray_range_with_backup:{name:"Plage de plateau avec sauvegarde",description:"Ex√©cuter une plage d'emplacements de plateau avec capacit√©s de sauvegarde"},whole_tray:{name:"Ex√©cution de plateau entier",description:"Ex√©cuter tous les emplacements d'un plateau"},whole_tray_with_backup:{name:"Plateau entier avec sauvegarde",description:"Ex√©cuter tous les emplacements d'un plateau avec plateau de sauvegarde"},distribute_shields:{name:"Distribuer les boucliers",description:"Distribue uniform√©ment les boucliers comme si on cliquait au milieu de l'ic√¥ne vaisseau et boucliers"},reroute_shields_rear:{name:"Rediriger boucliers arri√®re",description:"Rediriger l'√©nergie des boucliers vers l'arri√®re"},reroute_shields_left:{name:"Rediriger boucliers gauche",description:"Rediriger l'√©nergie des boucliers vers la gauche"},reroute_shields_right:{name:"Rediriger boucliers droite",description:"Rediriger l'√©nergie des boucliers vers la droite"},reroute_shields_forward:{name:"Rediriger boucliers avant",description:"Rediriger l'√©nergie des boucliers vers l'avant"},full_impulse:{name:"Impulsion maximale",description:"Engager le moteur √† impulsion maximale"},reverse:{name:"Marche arri√®re",description:"Moteurs en marche arri√®re"},throttle_adjust:{name:"Ajuster les gaz",description:"Augmenter ou diminuer les gaz d'une certaine quantit√©"},throttle_set:{name:"R√©gler les gaz",description:"R√©gler les gaz √† une position sp√©cifique (n√©gatif = marche arri√®re, 0 = arr√™t)"},throttle_toggle:{name:"Basculer les gaz",description:"Alterner entre gaz maximum et arr√™t complet"},turn_left:{name:"Tourner √† gauche",description:"Tourner le vaisseau √† gauche (continu tant que maintenu)"},turn_right:{name:"Tourner √† droite",description:"Tourner le vaisseau √† droite (continu tant que maintenu)"},pitch_up:{name:"Cabrer",description:"Cabrer le nez du vaisseau vers le haut (changement d'altitude dans l'espace)"},pitch_down:{name:"Piquer",description:"Piquer le nez du vaisseau vers le bas (changement d'altitude dans l'espace)"},strafe_left:{name:"D√©placement lat√©ral gauche",description:"D√©placer le vaisseau lat√©ralement √† gauche"},strafe_right:{name:"D√©placement lat√©ral droite",description:"D√©placer le vaisseau lat√©ralement √† droite"},forward:{name:"Avancer",description:"Avancer"},backward:{name:"Reculer",description:"Reculer"},auto_forward:{name:"Avance automatique",description:"Le personnage avance jusqu'√† ce que de nouvelles commandes de mouvement soient donn√©es"},follow:{name:"Suivre la cible",description:"Suivre l'entit√© cibl√©e"},follow_cancel:{name:"Annuler le suivi",description:"Arr√™ter de suivre et oublier la cible"},zoom_in:{name:"Zoomer",description:"Zoomer la cam√©ra"},zoom_out:{name:"D√©zoomer",description:"D√©zoomer la cam√©ra"},zoom_in_small:{name:"Zoomer l√©g√®rement",description:"Zoomer l√©g√®rement la cam√©ra"},zoom_out_small:{name:"D√©zoomer l√©g√®rement",description:"D√©zoomer l√©g√®rement la cam√©ra"},cam_distance:{name:"D√©finir distance cam√©ra",description:"D√©finir la distance de la cam√©ra par rapport au joueur"},cam_reset:{name:"R√©initialiser cam√©ra",description:"R√©initialiser la position de la cam√©ra par d√©faut"},cam_target_lock:{name:"Verrouiller cam√©ra sur cible",description:"Verrouiller ou d√©verrouiller la cam√©ra sur la cible"},cam_cycle_distance:{name:"Alterner distance cam√©ra",description:"Alterner la distance de la cam√©ra entre plusieurs valeurs pr√©d√©finies"},cam_mouse_look:{name:"Vue souris",description:"Activer le contr√¥le de cam√©ra par vue souris"},cam_turn_to_face:{name:"Tourner vers la cam√©ra",description:"Tourner le vaisseau pour faire face √† la direction de la cam√©ra"},look_up:{name:"Regarder vers le haut",description:"Changer le point de vue pour regarder droit vers le haut"},look_down:{name:"Regarder vers le bas",description:"Changer le point de vue pour regarder droit vers le bas"},team_message:{name:"Message d'√©quipe",description:"Envoyer un message √† l'√©quipe"},local_message:{name:"Message local",description:"Envoyer un message √† la zone locale"},zone_message:{name:"Message de zone",description:"Envoyer un message √† la zone"},toggle_hud:{name:"Basculer HUD",description:"Basculer la visibilit√© du HUD"},screenshot:{name:"Capture d'√©cran",description:"Prendre une capture d'√©cran"},screenshot_jpg:{name:"Capture d'√©cran JPG",description:"Sauvegarder une capture d'√©cran en JPG"},autofire_toggle:{name:"Basculer tir automatique",description:"Basculer le tir automatique des armes"},bind_save_file:{name:"Sauvegarder raccourcis vers fichier",description:"Sauvegarder tous vos raccourcis dans un fichier texte"},bind_load_file:{name:"Charger raccourcis depuis fichier",description:"Charger un fichier de raccourcis dans le client"},combat_log:{name:"Basculer journal de combat",description:"Activer/d√©sactiver l'enregistrement du journal de combat (1=activ√©, 0=d√©sactiv√©)"},missions:{name:"Afficher/Masquer missions",description:"Afficher/masquer le journal des missions"},inventory:{name:"Afficher/Masquer inventaire",description:"Afficher/masquer votre inventaire"},map:{name:"Afficher/Masquer carte",description:"Afficher/masquer la fen√™tre de carte"}},category_descriptions:{targeting:"S√©lection et gestion des cibles",combat:"Tir d'armes et actions de combat",tray:"Ex√©cuter des capacit√©s depuis les plateaux d'action",power:"Gestion de l'√©nergie et distribution des boucliers",movement:"Mouvement et navigation du vaisseau",camera:"Contr√¥le de cam√©ra et gestion de vue",communication:"Chat et communication d'√©quipe",system:"Commandes UI et syst√®me"},no_aliases:"Aucun alias",create_aliases_hint:"Cr√©ez des alias de commandes pour simplifier les s√©quences de commandes complexes.",alias_deleted:'Alias "{{alias}}" supprim√©',please_select_a_key_first:"Veuillez d'abord s√©lectionner une touche",alias_added_to_key:'Alias "{{alias}}" ajout√© √† {{key}}',no_active_profile:"Aucun profil actif",alias_exists:"Un alias avec ce nom existe d√©j√†",alias_template_exists:'L\'alias "{{alias}}" existe d√©j√†',alias_created_from_template:'Alias "{{alias}}" cr√©√© √† partir du mod√®le',template_not_found:"Mod√®le non trouv√©",alias_not_found:"Alias non trouv√©",alias_created:'Alias "{{alias}}" cr√©√©',alias_updated:'Alias "{{alias}}" mis √† jour',no_profile_selected_for_import:"Aucun profil s√©lectionn√© pour l'importation",no_keybinds_found_in_file:"Aucun raccourci trouv√© dans le fichier",import_failed:"√âchec de l'importation : {{error}}",no_aliases_found_in_file:"Aucun alias trouv√© dans le fichier",failed_to_get_profile_for_import:"√âchec de l'obtention du profil pour l'importation",import_completed_keybinds:"Importation termin√©e : {{count}} raccourcis",import_completed_keybinds_with_aliases:"Importation termin√©e : {{keyCount}} raccourcis ({{aliasCount}} alias ignor√©s - utilisez Importer les alias)",import_completed_aliases:"Importation termin√©e : {{count}} alias",no_profile_selected_to_export:"Aucun profil s√©lectionn√© pour l'exportation",keybind_file_exported:"Fichier de raccourcis export√© avec succ√®s",failed_to_export_keybind_file:"√âchec de l'exportation du fichier de raccourcis : {{error}}",profile_exported_json:"Profil export√© en JSON",failed_to_export_profile:"√âchec de l'exportation du profil : {{error}}",complete_project_exported:"Projet complet export√©",failed_to_export_project:"√âchec de l'exportation du projet : {{error}}",data_exported_csv:"Donn√©es export√©es en CSV",failed_to_export_csv:"√âchec de l'exportation CSV : {{error}}",html_report_exported:"Rapport HTML export√©",failed_to_export_html_report:"√âchec de l'exportation du rapport HTML : {{error}}",no_command_to_copy:"Aucune commande √† copier",no_profiles_to_export:"Aucun profil √† exporter",exporting_profiles:"Exportation de {{count}} profils...",aliases_exported_successfully:"Alias export√©s avec succ√®s",failed_to_export_aliases:"√âchec de l'exportation des alias : {{error}}",sync_folder_set:"Dossier de synchronisation s√©lectionn√©",failed_to_set_sync_folder:"√âchec de la s√©lection du dossier de synchronisation : {{error}}",no_sync_folder_selected:"Aucun dossier de synchronisation s√©lectionn√©",project_synced_successfully:"Projet synchronis√© avec succ√®s",permission_denied_to_folder:"Permission refus√©e pour √©crire dans le dossier",failed_to_sync_project:"√âchec de la synchronisation du projet : {{error}}",general:"G√©n√©ral",synchronization:"Synchronisation",appearance:"Apparence",advanced:"Avanc√©",general_settings:"Param√®tres g√©n√©raux",synchronization_settings:"Param√®tres de synchronisation",appearance_settings:"Param√®tres d'apparence",language_settings:"Param√®tres de langue",advanced_settings:"Param√®tres avanc√©s",auto_save:"Sauvegarde automatique",auto_save_description:"Sauvegarder automatiquement les modifications pendant le travail",validation_mode:"Mode de validation",validation_mode_description:"Niveau de validation des commandes et raccourcis",strict:"Strict",lenient:"Souple",disabled:"D√©sactiv√©",sync_folder_description:"Choisissez un dossier pour synchroniser automatiquement vos projets",auto_sync:"Synchronisation automatique",auto_sync_description:"Synchroniser automatiquement les modifications avec le dossier s√©lectionn√©",auto_sync_interval:"Intervalle de synchronisation automatique",auto_sync_interval_description:"√Ä quelle fr√©quence synchroniser automatiquement vos modifications",after_every_change:"Apr√®s chaque modification",every_1_minute:"Chaque minute",every_2_minutes:"Toutes les 2 minutes",every_5_minutes:"Toutes les 5 minutes",auto_sync_completed:"Synchronisation automatique termin√©e",selected_folder:"Dossier s√©lectionn√©",theme:"Th√®me",theme_description:"Choisissez entre les th√®mes clair et sombre",light_theme:"Clair",dark_theme:"Sombre",compact_mode:"Mode compact",compact_mode_description:"Utiliser une disposition d'interface plus compacte",interface_language:"Langue de l'interface",language_description:"Choisissez la langue de l'interface",debug_mode:"Mode d√©bogage",debug_mode_description:"Activer la journalisation de d√©bogage et les outils de d√©veloppement",backup_interval:"Intervalle de sauvegarde",backup_interval_description:"Fr√©quence de sauvegarde automatique de votre travail",every_15_minutes:"Toutes les 15 minutes",every_30_minutes:"Toutes les 30 minutes",every_hour:"Toutes les heures",preferences_saved:"Pr√©f√©rences sauvegard√©es avec succ√®s",failed_to_save_preferences:"√âchec de la sauvegarde des pr√©f√©rences",vfx_manager_description:"S√©lectionnez les effets visuels √† d√©sactiver en utilisant les alias dynFxSetFXExlusionList. Les effets sont organis√©s par environnement.",app_description:"Un outil web complet pour cr√©er, √©diter et g√©rer les configurations de raccourcis de Star Trek Online avec √©dition visuelle et fonctionnalit√©s avanc√©es.",csv_header:"Touche,Commande,Type,Description,Position",default_export_filename:"export.txt",select_a_space_ground_build_or_aliases_to_preview_export:"S√©lectionnez une construction Espace/Sol ou des Alias pour pr√©visualiser l'exportation."},Y={sto_tools_keybind_manager:"STO Tools Keybind Manager",open:"Abrir",save:"Guardar",explorer:"Explorador",keybinds:"Atajos de teclado",import_keybinds:"Importar atajos de teclado",export_keybinds:"Exportar atajos de teclado",aliases:"Alias",import_aliases:"Importar alias",export_aliases:"Exportar alias",import:"Importar",import_menu:"Importar",backup:"Respaldo",backup_menu:"Respaldo",backup_application_state:"Respaldar estado de la aplicaci√≥n",restore_application_state:"Restaurar estado de la aplicaci√≥n",preferences:"Preferencias",language:"Idioma",sync_folder_label:"Carpeta de sincronizaci√≥n:",no_folder_selected:"Ninguna carpeta seleccionada",download:"Descargar",vfx:"VFX",dark_mode:"Modo oscuro",load_default_data:"Cargar datos predeterminados",reset_application:"Restablecer aplicaci√≥n",set_sync_folder:"Establecer carpeta de sincronizaci√≥n",sync_now:"Sincronizar ahora",about:"Acerca de",new:"Nuevo",clone:"Clonar",rename:"Renombrar",delete:"Eliminar",space:"Espacio",ground:"Suelo",modified:"Modificado",valid:"V√°lido",keys:"teclas",key_singular:"tecla",all:"Todo",add_key:"Agregar tecla",copy:"Copiar",select_a_key_to_edit:"Selecciona una tecla para editar",commands:"comandos",command_singular:"comando",stabilize_execution_order:"Estabilizar orden de ejecuci√≥n",validate:"Validar",clear:"Limpiar",no_key_selected:"Ninguna tecla seleccionada",select_a_key_from_the_left_panel_to_view_and_edit_its_command_chain:"Selecciona una tecla del panel izquierdo para ver y editar su cadena de comandos.",generated_command:"Comando generado:",select_a_key_to_see_the_generated_command:"Selecciona una tecla para ver el comando generado",add_command:"Agregar comando",from_template:"Desde plantilla",add_alias:"Agregar alias",copy_from_key:"Copiar desde tecla",command_library:"Biblioteca de comandos",add_new_key:"Agregar nueva tecla",key_name:"Nombre de la tecla:",use_standard_key_names_like_f1_ctrl_a_shift_space_etc:"Use nombres de teclas est√°ndar como F1, Ctrl+A, May√∫s+Espacio, etc.",common_keys:"Teclas comunes:",ctrl:"Ctrl",alt:"Alt",shift:"May√∫s",cancel:"Cancelar",command_type:"Tipo de comando:",select_command_type:"Seleccionar tipo de comando...",targeting:"Apuntado",combat:"Combate",tray_execution:"Ejecuci√≥n de bandeja",shield_management:"Gesti√≥n de escudos",movement:"Movimiento",camera:"C√°mara",communication:"Comunicaci√≥n",system:"Sistema",alias:"Alias",custom_command:"Comando personalizado",select_a_command_type_to_see_preview:"Selecciona un tipo de comando para ver vista previa",profile:"Perfil",profile_name:"Nombre del perfil:",description_optional:"Descripci√≥n (opcional):",command_alias_manager:"Gestor de alias de comandos",new_alias:"Nuevo alias",edit_alias:"Editar alias",alias_name:"Nombre del alias:",use_alphanumeric_characters_only_no_spaces:"Use solo caracteres alfanum√©ricos, sin espacios",description:"Descripci√≥n:",target:"$Target",example_target_self_power_exec_science_team_team_healing_target:"Ejemplo: target_self $$ +power_exec Science_Team $$ team Healing [$Target]",use_in_communication_commands_to_include_target_name:"- Use en comandos de comunicaci√≥n para incluir nombre del objetivo",preview:"Vista previa:",alias_myalias_command_sequence:'alias MiAlias "secuencia de comandos"',save_alias:"Guardar alias",select_key:"Seleccionar tecla",common_keys1:"Teclas comunes",find_other_keys:"Encontrar otras teclas...",vfx_manager:"Gestor VFX",select_visual_effects_to_disable_using_dynfxsetfxexlusionlist_aliases_effects_are_organized_by_environment:"Selecciona efectos visuales para desactivar usando alias dynFxSetFXExlusionList. Los efectos est√°n organizados por entorno.",space_effects:"Efectos de espacio",select_all:"Seleccionar todo",clear_all:"Limpiar todo",selected:"seleccionado",ground_effects:"Efectos de suelo",generated_aliases:"Alias generados:",space_alias:"Alias de espacio:",no_space_effects_selected:"No hay efectos de espacio seleccionados",ground_alias:"Alias de suelo:",no_ground_effects_selected:"No hay efectos de suelo seleccionados",show_player_say:"Mostrar Say del jugador",generate_aliases:"Generar alias",about_sto_tools_keybind_manager:"Acerca de STO Tools Keybind Manager",a_comprehensive_web_based_tool_for_creating_editing_and_managing_star_trek_online_keybind_configurations_with_visual_editing_and_advanced_features:"Una herramienta web integral para crear, editar y gestionar configuraciones de atajos de teclado de Star Trek Online con edici√≥n visual y caracter√≠sticas avanzadas.",features:"Caracter√≠sticas:",visual_keybind_editor:"Editor visual de atajos de teclado",sto_command_library_with_search_and_categorization:"Biblioteca de comandos STO con b√∫squeda y categorizaci√≥n",multiple_profile_management_create_clone_rename_delete:"Gesti√≥n de m√∫ltiples perfiles (crear, clonar, renombrar, eliminar)",custom_alias_system_for_complex_command_sequences:"Sistema de alias personalizado para secuencias de comandos complejas",vertigo_inspired_vfx_manager_for_visual_effects_control:"Gestor VFX inspirado en VERTIGO para control de efectos visuales",import_export_keybind_and_alias_files_and_project_backups:"Importar/exportar archivos de atajos y alias, y respaldos de proyecto",real_time_validation_and_command_preview:"Validaci√≥n en tiempo real y vista previa de comandos",quick_start:"Inicio r√°pido:",create_a_new_profile_or_use_the_default_profile:"Crea un nuevo perfil o usa el perfil predeterminado",select_keys_from_the_grid_and_add_commands_from_the_library:"Selecciona teclas de la cuadr√≠cula y agrega comandos desde la biblioteca",use_the_command_chain_editor_to_build_complex_sequences:"Usa el editor de cadenas de comandos para construir secuencias complejas",export_your_keybinds_as_txt_files_for_use_in_sto:"Exporta tus atajos como archivos .txt para usar en STO",resources:"Recursos:",copyright:"¬© 2025 STO Tools. Todos los derechos reservados.",got_it:"¬°Entendido!",file_explorer:"Explorador de archivos",select_an_item_on_the_left_to_preview_export:"Selecciona un elemento a la izquierda para previsualizar exportaci√≥n",close:"Cerrar",select_export_format:"Seleccionar formato de exportaci√≥n",export_as:"Exportar como:",sto_keybind_file_txt:"Archivo de atajos STO (.txt)",json_profile_json:"Perfil JSON (.json)",complete_project_json:"Proyecto completo (.json)",csv_data_csv:"Datos CSV (.csv)",html_report_html:"Reporte HTML (.html)",alias_file_txt:"Archivo de alias (.txt)",environment:"Entorno:",export:"Exportar",filter_keys:"Filtrar teclas...",search_commands:"Buscar comandos...",e_g_f5_ctrl_a_shift_1:"ej. F5, Ctrl+A, May√∫s+1",enter_profile_name:"Ingresa nombre del perfil",describe_this_keybind_profile:"Describe este perfil de atajos de teclado",myalias:"MiAlias",brief_description_of_what_this_alias_does:"Breve descripci√≥n de lo que hace este alias",enter_command_sequence_use_to_separate_commands:"Ingresa secuencia de comandos (usa $$ para separar comandos)",search_keys:"Buscar teclas...",open_project_json:"Abrir JSON del proyecto",save_project_json:"Guardar JSON del proyecto",keybind_operations:"Operaciones de atajos",alias_operations:"Operaciones de alias",settings:"Configuraci√≥n",select_profile:"Seleccionar perfil",new_profile:"Nuevo perfil",clone_profile:"Clonar perfil",rename_profile:"Renombrar perfil",delete_profile:"Eliminar perfil",space_mode:"Modo espacio",ground_mode:"Modo suelo",unsaved_changes:"Cambios no guardados",validation_status:"Estado de validaci√≥n",bound_keys:"Teclas vinculadas",toggle_between_grid_and_categorized_view:"Alternar entre vista de cuadr√≠cula y categorizada",ensures_consistent_execution_order_by_mirroring_commands_phase_1_left_to_right_phase_2_right_to_left:"Asegura orden de ejecuci√≥n consistente reflejando comandos (Fase 1: izquierda a derecha, Fase 2: derecha a izquierda)",validate_command_chain:"Validar cadena de comandos",clear_all_commands:"Limpiar todos los comandos",copy_to_clipboard:"Copiar al portapapeles",collapse_expand:"Contraer/Expandir",insert_target_variable:"Insertar variable $Target",sto_keybind_report:"Reporte de atajos STO",mode:"Modo:",generated:"Generado:",created_by:"Creado por:",statistics:"Estad√≠sticas",keys_bound:"Teclas vinculadas:",total_commands:"Total de comandos:",aliases_defined:"Alias definidos:",no_keybinds_defined:"No hay atajos de teclado definidos.",command_aliases:"Alias de comandos",report_footer:"Este reporte fue generado por STO Tools Keybind Manager. Para m√°s informaci√≥n sobre atajos de teclado de Star Trek Online, visita el Wiki de STO.",command_categories:{targeting:"Selecci√≥n de objetivos",combat:"Combate",tray:"Ejecuci√≥n de bandeja",power:"Gesti√≥n de escudos",movement:"Movimiento",camera:"C√°mara",communication:"Comunicaci√≥n",system:"Sistema"},command_definitions:{target:{name:"Apuntar por nombre",description:"Apuntar entidad por nombre (requiere comillas)"},target_enemy_near:{name:"Apuntar enemigo m√°s cercano",description:"Apuntar al enemigo m√°s cercano visible"},target_friend_near:{name:"Apuntar aliado m√°s cercano",description:"Apuntar a la entidad aliada m√°s cercana"},target_self:{name:"Apuntarse a s√≠ mismo",description:"Apuntar a tu propia nave/personaje"},target_clear:{name:"Limpiar objetivo",description:"Eliminar el bloqueo de objetivo actual"},target_teammate_1:{name:"Apuntar compa√±ero 1",description:"Apuntar al primer miembro del equipo"},target_teammate_2:{name:"Apuntar compa√±ero 2",description:"Apuntar al segundo miembro del equipo"},target_teammate_3:{name:"Apuntar compa√±ero 3",description:"Apuntar al tercer miembro del equipo"},target_teammate_4:{name:"Apuntar compa√±ero 4",description:"Apuntar al cuarto miembro del equipo"},fire_all:{name:"Disparar todas las armas",description:"Disparar todas las armas"},fire_phasers:{name:"Disparar armas de energ√≠a",description:"Disparar todas las armas de energ√≠a"},fire_torps:{name:"Disparar torpedos",description:"Disparar todos los torpedos"},fire_mines:{name:"Disparar minas",description:"Disparar todas las minas"},fire_phasers_torps:{name:"Disparar phasers y torpedos",description:"Disparar phasers y torpedos"},fire_projectiles:{name:"Disparar proyectiles",description:"Disparar torpedos y minas"},custom_tray:{name:"Ejecuci√≥n de bandeja",description:"Ejecutar ranura espec√≠fica de bandeja"},tray_with_backup:{name:"Ejecuci√≥n de bandeja con respaldo",description:"Ejecutar ranura espec√≠fica de bandeja con habilidad de respaldo"},tray_range:{name:"Ejecuci√≥n de rango de bandeja",description:"Ejecutar un rango de ranuras de bandeja"},tray_range_with_backup:{name:"Rango de bandeja con respaldo",description:"Ejecutar un rango de ranuras de bandeja con habilidades de respaldo"},whole_tray:{name:"Ejecuci√≥n de bandeja completa",description:"Ejecutar todas las ranuras de una bandeja"},whole_tray_with_backup:{name:"Bandeja completa con respaldo",description:"Ejecutar todas las ranuras de una bandeja con bandeja de respaldo"},distribute_shields:{name:"Distribuir escudos",description:"Distribuye uniformemente los escudos como si hicieras clic en el medio del √≠cono de nave y escudos"},reroute_shields_rear:{name:"Redirigir escudos traseros",description:"Redirigir energ√≠a de escudos hacia atr√°s"},reroute_shields_left:{name:"Redirigir escudos izquierdos",description:"Redirigir energ√≠a de escudos hacia la izquierda"},reroute_shields_right:{name:"Redirigir escudos derechos",description:"Redirigir energ√≠a de escudos hacia la derecha"},reroute_shields_forward:{name:"Redirigir escudos delanteros",description:"Redirigir energ√≠a de escudos hacia adelante"},full_impulse:{name:"Impulso completo",description:"Activar motor de impulso completo"},reverse:{name:"Reversa",description:"Motores en reversa"},throttle_adjust:{name:"Ajustar acelerador",description:"Aumentar o disminuir el acelerador por cantidad"},throttle_set:{name:"Establecer acelerador",description:"Establecer el acelerador a una posici√≥n espec√≠fica (negativo = reversa, 0 = parar)"},throttle_toggle:{name:"Alternar acelerador",description:"Alternar entre acelerador completo y parada completa"},turn_left:{name:"Girar izquierda",description:"Girar nave a la izquierda (continuo mientras se mantiene)"},turn_right:{name:"Girar derecha",description:"Girar nave a la derecha (continuo mientras se mantiene)"},pitch_up:{name:"Cabecear arriba",description:"Cabecear nariz de nave hacia arriba (cambio de altitud espacial)"},pitch_down:{name:"Cabecear abajo",description:"Cabecear nariz de nave hacia abajo (cambio de altitud espacial)"},strafe_left:{name:"Desplazamiento lateral izquierdo",description:"Desplazar nave lateralmente a la izquierda"},strafe_right:{name:"Desplazamiento lateral derecho",description:"Desplazar nave lateralmente a la derecha"},forward:{name:"Adelante",description:"Moverse adelante"},backward:{name:"Atr√°s",description:"Moverse atr√°s"},auto_forward:{name:"Avance autom√°tico",description:"El personaje se mueve adelante hasta que se den nuevos comandos de movimiento"},follow:{name:"Seguir objetivo",description:"Seguir a la entidad objetivo"},follow_cancel:{name:"Cancelar seguimiento",description:"Dejar de seguir y olvidar el objetivo"},zoom_in:{name:"Acercar zoom",description:"Acercar la c√°mara"},zoom_out:{name:"Alejar zoom",description:"Alejar la c√°mara"},zoom_in_small:{name:"Acercar zoom ligeramente",description:"Acercar la c√°mara ligeramente"},zoom_out_small:{name:"Alejar zoom ligeramente",description:"Alejar la c√°mara ligeramente"},cam_distance:{name:"Establecer distancia de c√°mara",description:"Establecer la distancia de la c√°mara del jugador"},cam_reset:{name:"Reiniciar c√°mara",description:"Reiniciar la posici√≥n de la c√°mara por defecto"},cam_target_lock:{name:"Bloquear c√°mara al objetivo",description:"Bloquear o desbloquear la c√°mara al objetivo"},cam_cycle_distance:{name:"Alternar distancia de c√°mara",description:"Alternar la distancia de la c√°mara entre varios valores preestablecidos"},cam_mouse_look:{name:"Vista de rat√≥n",description:"Activar control de c√°mara con vista de rat√≥n"},cam_turn_to_face:{name:"Girar hacia la c√°mara",description:"Girar nave para mirar hacia la direcci√≥n de la c√°mara"},look_up:{name:"Mirar arriba",description:"Cambiar punto de vista para mirar directamente arriba"},look_down:{name:"Mirar abajo",description:"Cambiar punto de vista para mirar directamente abajo"},team_message:{name:"Mensaje de equipo",description:"Enviar mensaje al equipo"},local_message:{name:"Mensaje local",description:"Enviar mensaje al √°rea local"},zone_message:{name:"Mensaje de zona",description:"Enviar mensaje a la zona"},toggle_hud:{name:"Alternar HUD",description:"Alternar visibilidad del HUD"},screenshot:{name:"Captura de pantalla",description:"Tomar una captura de pantalla"},screenshot_jpg:{name:"Captura de pantalla JPG",description:"Guardar una captura de pantalla como JPG"},autofire_toggle:{name:"Alternar disparo autom√°tico",description:"Alternar disparo autom√°tico de armas"},bind_save_file:{name:"Guardar atajos a archivo",description:"Guardar todos tus atajos en un archivo de texto"},bind_load_file:{name:"Cargar atajos desde archivo",description:"Cargar un archivo de atajos en el cliente"},combat_log:{name:"Alternar registro de combate",description:"Activar/desactivar grabaci√≥n del registro de combate (1=activado, 0=desactivado)"},missions:{name:"Mostrar/Ocultar misiones",description:"Mostrar/ocultar el diario de misiones"},inventory:{name:"Mostrar/Ocultar inventario",description:"Mostrar/ocultar tu inventario"},map:{name:"Mostrar/Ocultar mapa",description:"Mostrar/ocultar la ventana del mapa"}},category_descriptions:{targeting:"Selecci√≥n y gesti√≥n de objetivos",combat:"Disparo de armas y acciones de combate",tray:"Ejecutar habilidades desde bandejas de acci√≥n",power:"Gesti√≥n de energ√≠a y distribuci√≥n de escudos",movement:"Movimiento y navegaci√≥n de nave",camera:"Control de c√°mara y gesti√≥n de vista",communication:"Chat y comunicaci√≥n de equipo",system:"Comandos de UI y sistema"},no_aliases:"Sin alias",create_aliases_hint:"Crea alias de comandos para simplificar secuencias de comandos complejas.",alias_deleted:'Alias "{{alias}}" eliminado',please_select_a_key_first:"Por favor selecciona una tecla primero",alias_added_to_key:'Alias "{{alias}}" agregado a {{key}}',no_active_profile:"Sin perfil activo",alias_exists:"Ya existe un alias con este nombre",alias_template_exists:'El alias "{{alias}}" ya existe',alias_created_from_template:'Alias "{{alias}}" creado desde plantilla',template_not_found:"Plantilla no encontrada",alias_not_found:"Alias no encontrado",alias_created:'Alias "{{alias}}" creado',alias_updated:'Alias "{{alias}}" actualizado',no_profile_selected_for_import:"Ning√∫n perfil seleccionado para importar",no_keybinds_found_in_file:"No se encontraron atajos en el archivo",import_failed:"Importaci√≥n fall√≥: {{error}}",no_aliases_found_in_file:"No se encontraron alias en el archivo",failed_to_get_profile_for_import:"Fall√≥ al obtener perfil para importar",import_completed_keybinds:"Importaci√≥n completada: {{count}} atajos",import_completed_keybinds_with_aliases:"Importaci√≥n completada: {{keyCount}} atajos ({{aliasCount}} alias ignorados - usa Importar Alias)",import_completed_aliases:"Importaci√≥n completada: {{count}} alias",no_profile_selected_to_export:"Ning√∫n perfil seleccionado para exportar",keybind_file_exported:"Archivo de atajos exportado exitosamente",failed_to_export_keybind_file:"Fall√≥ al exportar archivo de atajos: {{error}}",profile_exported_json:"Perfil exportado como JSON",failed_to_export_profile:"Fall√≥ al exportar perfil: {{error}}",complete_project_exported:"Proyecto completo exportado",failed_to_export_project:"Fall√≥ al exportar proyecto: {{error}}",data_exported_csv:"Datos exportados como CSV",failed_to_export_csv:"Fall√≥ al exportar CSV: {{error}}",html_report_exported:"Reporte HTML exportado",failed_to_export_html_report:"Fall√≥ al exportar reporte HTML: {{error}}",no_command_to_copy:"Ning√∫n comando para copiar",no_profiles_to_export:"Ning√∫n perfil para exportar",exporting_profiles:"Exportando {{count}} perfiles...",aliases_exported_successfully:"Alias exportados exitosamente",failed_to_export_aliases:"Fall√≥ al exportar alias: {{error}}",sync_folder_set:"Carpeta de sincronizaci√≥n seleccionada",failed_to_set_sync_folder:"Fall√≥ al seleccionar carpeta de sincronizaci√≥n: {{error}}",no_sync_folder_selected:"Ninguna carpeta de sincronizaci√≥n seleccionada",project_synced_successfully:"Proyecto sincronizado exitosamente",permission_denied_to_folder:"Permiso denegado para escribir en la carpeta",failed_to_sync_project:"Fall√≥ al sincronizar proyecto: {{error}}",general:"General",synchronization:"Sincronizaci√≥n",appearance:"Apariencia",advanced:"Avanzado",general_settings:"Configuraci√≥n general",synchronization_settings:"Configuraci√≥n de sincronizaci√≥n",appearance_settings:"Configuraci√≥n de apariencia",language_settings:"Configuraci√≥n de idioma",advanced_settings:"Configuraci√≥n avanzada",auto_save:"Guardado autom√°tico",auto_save_description:"Guardar autom√°ticamente los cambios mientras trabajas",validation_mode:"Modo de validaci√≥n",validation_mode_description:"Qu√© tan estrictamente validar comandos y atajos",strict:"Estricto",lenient:"Permisivo",disabled:"Deshabilitado",sync_folder_description:"Elige una carpeta para sincronizar autom√°ticamente tus proyectos",auto_sync:"Sincronizaci√≥n autom√°tica",auto_sync_description:"Sincronizar autom√°ticamente los cambios con la carpeta seleccionada",auto_sync_interval:"Intervalo de sincronizaci√≥n autom√°tica",auto_sync_interval_description:"Con qu√© frecuencia sincronizar autom√°ticamente sus cambios",after_every_change:"Despu√©s de cada cambio",every_1_minute:"Cada minuto",every_2_minutes:"Cada 2 minutos",every_5_minutes:"Cada 5 minutos",auto_sync_completed:"Sincronizaci√≥n autom√°tica completada",selected_folder:"Carpeta seleccionada",theme:"Tema",theme_description:"Elige entre temas claro y oscuro",light_theme:"Claro",dark_theme:"Oscuro",compact_mode:"Modo compacto",compact_mode_description:"Usar un dise√±o de interfaz m√°s compacto",interface_language:"Idioma de la interfaz",language_description:"Elige el idioma para la interfaz",debug_mode:"Modo de depuraci√≥n",debug_mode_description:"Habilitar registro de depuraci√≥n y herramientas de desarrollador",backup_interval:"Intervalo de respaldo",backup_interval_description:"Con qu√© frecuencia respaldar autom√°ticamente tu trabajo",every_15_minutes:"Cada 15 minutos",every_30_minutes:"Cada 30 minutos",every_hour:"Cada hora",preferences_saved:"Preferencias guardadas exitosamente",failed_to_save_preferences:"Fall√≥ al guardar las preferencias",vfx_manager_description:"Selecciona efectos visuales para desactivar usando alias de dynFxSetFXExlusionList. Los efectos est√°n organizados por entorno.",app_description:"Una herramienta integral basada en web para crear, editar y gestionar configuraciones de atajos de Star Trek Online con edici√≥n visual y caracter√≠sticas avanzadas.",csv_header:"Tecla,Comando,Tipo,Descripci√≥n,Posici√≥n",default_export_filename:"export.txt",select_a_space_ground_build_or_aliases_to_preview_export:"Selecciona una construcci√≥n de Espacio/Tierra o Alias para previsualizar la exportaci√≥n."};const Q=new Proxy({currentProfile:null,currentMode:"space",currentEnvironment:"space",selectedKey:null,isModified:!1,undoStack:[],redoStack:[],maxUndoSteps:50,commandIdCounter:0},{set:(e,t,a)=>(e[t]=a,n&&n.emit&&n.emit(`store:${t}`,a),!0)}),ee="directories";function te(){return new Promise((e,t)=>{const a=indexedDB.open("sto-sync-handles",1);a.onupgradeneeded=()=>{a.result.createObjectStore(ee)},a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})}const ae="sync-folder";async function ne(e,t,a){const n=t.split("/"),i=n.pop();let o=e;for(const e of n)o=await o.getDirectoryHandle(e,{create:!0});const r=await o.getFileHandle(i,{create:!0}),s=await r.createWritable();await s.write(a),await s.close()}const ie={space:[{label:"Advanced inhibiting turret shield bubble",effect:"Fx_Rep_Temporal_Ship_Chroniton_Stabilization_Proc"},{label:"Approaching Agony",effect:"Cfx_Lockboxfx_Cb29_Ship_Agony_Field"},{label:"Attack Pattern Alpha",effect:"Fx_Ship_Tac_Attackpatternalpha"},{label:"Attack Pattern Beta",effect:"Fx_Ship_Tac_Attackpatternbeta"},{label:"Attack Pattern Delta",effect:"Fx_Ship_Tac_Attackpatterndelta"},{label:"Attack Pattern Omega",effect:"Fx_Ship_Tac_Attackpatternomega"},{label:"Beacon of Kahless",effect:"Fx_Er_Bbs_Beacon_Of_Kahless_Flash"},{label:"Boost Morale",effect:"Fx_Ship_Spec_Powers_Command_Boost_Morale_Bufffx,Cfx_Ship_Spec_Powers_Command_Boost_Morale_Activate"},{label:"Brace for Impact",effect:"Fx_Bop_Braceforimpact,Cfx_Ship_Sci_Hazardemitter_Buff"},{label:"Breath of the Dragon",effect:"Fx_Ship_Cp_T6_Hysperian_Dragonbreath"},{label:"Call Emergency Artillery",effect:"Fx_Ships_Boffs_Cmd_Callartillery_Activate,Fx_Ships_Boffs_Cmd_Callartillery_Explosion"},{label:"Competitive Engine Buff Effect",effect:"Fx_Ship_Mod_Haste_Buff_Gen"},{label:"Co-opt Energy Weapons",effect:"Fx_Capt_Powers_Ship_Sci_Coopt_Energy_Wep_Aoe,Cfx_Capt_Powers_Ship_Sci_Coopt_Energy_Wep_Area"},{label:"Concentrate Fire Power",effect:"Fx_Ships_Boff_Cmd_Confire_Activatefx,Cfx_Ships_Boff_Cmd_Confire_Mark"},{label:"Cnidarian Jellyfish AoE",effect:"Cfx_Ship_Sp_T6_Jellyfish_Cnidarian_Defense_Aoe"},{label:"Dark Matter Anomaly",effect:"Cfx_Ship_Console_Dark_Matter_Anamoly_Costumefx"},{label:"Delphic Tear",effect:"Fx_Ships_Consoles_Cb21_Delphictear"},{label:"Destabilising Resonance Beam",effect:"P_Er_Ship_Destabilizing_Resonance_Beam_Aoe_Particles"},{label:"Elachi Walker Combat Pet (3 effects)",effect:"Soundfx_Elachiwalker_Footstep_Pet,Fx_Er_Tfo_Elachi_Walker_Combat_Pet_Deathfx,Soundfx_Elachiwalker_Petsummon"},{label:"Electrified Anomalies Trait",effect:"Fx_Tp_Ship_T6_Risian_Science_Electrified_Anomalies_Arc_Foe,Fx_Tp_Ship_T6_Risian_Science_Electrified_Anomalies_Arc_Friend"},{label:"Emergency Pwr to Shields",effect:"Fx_Ship_Eng_Emergencypowershields"},{label:"Emergency Pwr to Wep",effect:"Fx_Ship_Eng_Emergencypowerweapons"},{label:"Engineering Fleet III",effect:"Fx_Ship_Boff_Fleet_Capt_Engineering_Teambuff"},{label:"Engineering Team",effect:"Cfx_Ship_Crewteam_Engineeringteam_Buff"},{label:"EPS Power Transfer",effect:"Cfx_Ship_Eng_Epspowertransfer_Target"},{label:"Focus Frenzy",effect:"Fx_Skilltree_Ship_Ffrenzy_Activatefx"},{label:"Go Down Fighting",effect:"Fx_Bop_Godownfighting"},{label:"Hangar Pet Rank Up",effect:"Fx_Ship_Levelup_Fighter_Rankup"},{label:"Hazard Emitters",effect:"Cfx_Ship_Sci_Hazardemitter_Buff"},{label:"Intel Fleet III",effect:"Fx_Ship_Boff_Fleet_Capt_Intel_Teambuff"},{label:"Intel Team (uses 3 effects)",effect:"Cfx_Ship_Cruiser_Auras_Taunt,Cfx_Spc_Boffpowers_Intel_Intelteam_Buff,Fx_Ships_Intel_Lyinginwait"},{label:"Kemocite on ship animation",effect:"C1_E_Ship_Xindi_Lockboxcb15_Kemocite_Weaponry_Bufffx"},{label:"Kemocite HitFX ring",effect:"Fx_Ship_Xindi_Lockboxcb15_Kemocite_Weaponry_Aoe_Proc"},{label:"Kentari Ferocity Weapons Glow",effect:"P_Trait_Powers_Ship_Lukari_Colony_Kentari_Ferocity_Weapons_Glow"},{label:"Kobayashi Maru powerup silenced",effect:"Fx_Evr_Kmaru_Ship_Dev_Resupply_Drop_Powerup_Bufffx,Fx_Evr_Kmaru_Ship_Dev_Resupply_Drop_Powerup"},{label:"Less Obvious Loot Drop Common",effect:"Cfx_Space_Loot_Drop_Common_Costumefx"},{label:"Less Obvious Loot Drop Uncommon",effect:"Cfx_Space_Loot_Drop_Uncommon_Costumefx"},{label:"Less Obvious Loot Drop Rare",effect:"Cfx_Space_Loot_Drop_Rare_Costumefx"},{label:"Less Obvious Loot Drop Very Rare",effect:"Cfx_Space_Loot_Drop_Veryrare_Costumefx"},{label:"Less Obvious Loot Drop Lock Box",effect:"Cfx_Space_Loot_Drop_Chancebox_Costumefx"},{label:"Less Obvious Loot Drop Dilithium",effect:"Cfx_Space_Loot_Drop_Dilithium_Costumefx"},{label:"Miraculous Repairs",effect:"Fx_Bop_Miracleworker"},{label:"MW - Align Shield Frequencies",effect:"Fx_Spc_Boffpowers_Miracleworker_Alignshieldfrequencies_Hitfx"},{label:"MW - Destabilize Warp Core",effect:"Fx_Spc_Boffpowers_Miracleworker_Destabilizewarpcore"},{label:"MW - Exceed rated limits",effect:"Fx_Spc_Boffpowers_Miracleworker_Energyweaponsexceedratedlimits_Dot_Hitfx,Fx_Spc_Boffpowers_Miracleworker_Energyweaponsexceedratedlimits"},{label:"MW - Fix em up (and other green glows)",effect:"Fx_Ship_Mod_Damage_Buff"},{label:"MW - Mixed Armaments Synergy",effect:"Fx_Spc_Boffpowers_Miracleworker_Mixedarmamentssynergy"},{label:"MW - Narrow Sensor Bands",effect:"Fx_Spc_Boffpowers_Miracleworker_Narrowsensorbands"},{label:"MW - Null Pointer Flood",effect:"Fx_Spc_Boffpowers_Miracleworker_Nullpointerflood"},{label:"MW - Reroute shilds to Hull containment",effect:"Fx_Spc_Boffpowers_Miracleworker_Rerouteshieldstohullcontainment,Cfx_Spc_Boffpowers_Miracleworker_Rerouteshieldstohullcontainment"},{label:"Nadion Inversion",effect:"Fx_Bop_Nadioinversion"},{label:"Nanoprobe Shield Generator (Dyson Rep)",effect:"Cfx_Rp_Dyson_Ship_Reactive_Shielding"},{label:"Neutronic Eddies",effect:"Cfx_Ships_Cp_T6_Risian_Science_Neutronic_Edides_Costumefx"},{label:"Overwhelm Emitters",effect:"Fx_Ships_Boff_Cmd_Owemitters_Activatefx"},{label:"Photonic Officer",effect:"Fx_Bop_Photonicofficer_activate"},{label:"PILOT - Clean Getaway",effect:"Fx_Spc_Boff_Pilot_Cleangetaway_Activate"},{label:"PILOT - Coolant Ignition (mostly)",effect:"Fx_Spc_Boff_Pilot_Coolantinjection_Ignite,Fx_Spc_Boff_Pilot_Coolantinjection_Costumefx"},{label:"PILOT - Deploy Countermeasures",effect:"Fx_Spc_Boff_Pilot_Deploycm"},{label:"PILOT - Fly her apart",effect:"Cfx_Spc_Boff_Pilot_Flyapart_Dot"},{label:"PILOT - Form Up (mostly)",effect:"Fx_Spc_Boff_Pilot_Formup_Teleport,Fx_Spc_Boff_Pilot_Formup_Buff_Wepbuff"},{label:"PILOT - hold Together",effect:"Cfx_Spc_Boff_Pilot_Holdtogether"},{label:"PILOT - Lambda",effect:"Fx_Ship_Mod_Damage_Buff,Fx_Spc_Boff_Pilot_Aplambda_Bufffx,Fx_Spc_Boff_Pilot_Aplambda"},{label:"PILOT - Lock Trajectory",effect:"Fx_Spc_Boff_Pilot_Flares_Switch,Cfx_Spc_Boff_Pilot_Locktrajectory"},{label:"PILOT - Pilot Team",effect:"Cfx_Spc_Boff_Pilot_Pilotteam_Buff"},{label:"PILOT - Reroute Reserves to Weapons",effect:"Fx_Spc_Boff_Pilot_Reroute_Wepbuff,Fx_Spc_Boff_Pilot_Reroute_Activate"},{label:"PILOT - Subspace Boom",effect:"Cfx_Spc_Boff_Pilot_Ssboom_Costumefx_Neverdie,Fx_Spc_Boff_Pilot_Ssboom_Boom"},{label:"Plasma Storm",effect:"Cfx_Ship_Cp_Cb27_Generate_Plasma_Storm_Costumefx"},{label:"Rally Point Marker",effect:"Cfx_Ships_Boff_Cmd_Rallypoint_Marker"},{label:"Reverse Shield Polarity",effect:"Cfx_Ship_Eng_Reverseshieldpolarity_Buff"},{label:"Scattering Field",effect:"Cfx_Ship_Sci_Dampeningfield_Aoe,Cfx_Ship_Sci_Dampeningfield_Shield_Buff"},{label:"Science Team",effect:"Cfx_Ship_Crewteam_Scienceteam_Buff"},{label:"Science Fleet III",effect:"Fx_Ship_Boff_Fleet_Capt_Science_Teambuff"},{label:"Soliton Wave Generator (uses 4 effects)",effect:"Cfx_Ship_Risa_Loot_Soliton_Wave_Suckfx_Target,Cfx_Ship_Risa_Loot_Soliton_Wave_Suckfx,Cfx_Ship_Risa_Loot_Soliton_Wave_Out,Cfx_Ship_Risa_Loot_Soliton_Wave_In"},{label:"Spore Infused Anomalies",effect:"Fx_Trait_Powers_Ship_T6_Somerville_Sia_Blast"},{label:"Subspace Vortex Teleport Effect",effect:"Fx_Ship_Xindi_Lockboxcb15_Subspace_Vortex_Teleport"},{label:"Suppression Barrage",effect:"Cfx_Ships_Boff_Cmd_Sbarrage_Buff"},{label:"Surgical Strikes",effect:"Fx_Spc_Boffpowers_Int_Sstrikes_Buff"},{label:"Tactical Fleet III",effect:"Fx_Ship_Boff_Fleet_Capt_Tactical_Teambuff"},{label:"Tactical Initiative",effect:"Fx_Bop_Tacticalinitiative"},{label:"Tactical Team",effect:"Cfx_Ship_Crewteam_Tacticalteam_Buff"},{label:"Target Rich Environment",effect:"Fx_Ship_Trait_Cb20_Targetrichenvironment"},{label:"Temporal Anchor",effect:"Cfx_Ship_Trait_Temporal_Anchor_Costumefx"},{label:"Temporal Vortex Probe",effect:"C1_Eventreward_Fcd_Temporal_Vortex_Costumefx,Fx_Eventreward_Fcd_Temporal_Vortex_Blast"},{label:"Timeline Collapse (5 effects!)",effect:"Cfx_Ship_Temp_Tcollapse_Costume,Fx_Ship_Temp_Tcollapse_Hitfx,Fx_Ship_Temp_Tcollapse_Explode,Fx_Ship_Temp_Tcollapse_Beamhitfx,Fx_Ship_Temp_Tcollapse"},{label:"V'Ger Torpedo (Volatile Digital Transformation)",effect:"Fx_Ship_Torpedo_Plasma_Vger_Anniv_Explode,Cfx_Ship_Torpedo_Vger_Disintegrate_In_Tintable"},{label:"Viral Impulse Burst",effect:"Fx_Spc_Boffpowers_int_Viralimpulse"},{label:"Vulcan Jelly Fish Eject Red Matter",effect:"Cfx_ship_jellyfish_eject_red_matter_costumefx"},{label:"Vulnerability Assessment Sweep",effect:"Fx_Capt_Powers_Ship_Tac_Vulnerability_Assessment_Sweep"}],ground:[{label:"Agony Field Generator",effect:"Fx_Ground_Lockboxfx_Cb29_Agony_Field_Generator"},{label:"Anti-time ground",effect:"Cfx_Rep_Temp_Char_Kit_Sci_Antitime_Entanglement_Field_Costumefx"},{label:"Ball Lightning",effect:"Cfx_Char_Kit_Univ_Sum_Ball_Lightning_Costumefx"},{label:"Chaos Blaze",effect:"Cfx_Char_Chaos_Blaze_Aoe"},{label:"Conussive Tachyon Emission",effect:"fx_Char_Delta_Rep_Cte_Aoe"},{label:"Disco Ball (Party Bomb)",effect:"Cfx_Char_Device_Partybomb"},{label:"Dot-7 Drone Support Field",effect:"Cfx_Er_Bbs_char_Dot7_Drone_support_Field"},{label:"Eng Proficiency (Character Glow)",effect:"Cfx_Ground_Kit_Eng_Engineeringproficiency"},{label:"Ever Watchful",effect:"Cfx_Ground_Kit_Tac_Overwatch_Bufffx,Fx_Ground_Kit_Tac_Overwatch_Activatefx"},{label:"Herald AP Beam Projector ground weapon",effect:"Fx_Char_Icoenergy_Rifle_Energyblast,Fx_Char_Icoenergy_Assault_Beam_Lockbox"},{label:"Lava Floor",effect:"Cfx_Char_Kit_Univ_Sum_The_Floor_Is_Lava_Costumefx,Cfx_Char_Kit_Univ_Sum_The_Floor_Is_Lava_Geyser"},{label:"Less Obvious Loot Drop Common",effect:"Cfx_Gnd_Loot_Drop_Common_Costumefx"},{label:"Less Obvious Loot Drop Uncommon",effect:"Cfx_Gnd_Loot_Drop_Uncommon_Costumefx"},{label:"Less Obvious Loot Drop Rare",effect:"Cfx_Gnd_Loot_Drop_Rare_Costumefx"},{label:"Less Obvious Loot Drop Very Rare",effect:"Cfx_Gnd_Loot_Drop_Veryrare_Costumefx"},{label:"Less Obvious Loot Drop Lock Box",effect:"Cfx_Gnd_Loot_Drop_Chancebox_Costumefx"},{label:"Less Obvious Loot Drop Dilithium",effect:"Cfx_Gnd_Loot_Drop_Dilithium_Costumefx"},{label:"Motivation (Tac Kit Module)",effect:"Cfx_Ground_Kit_Tac_Motivation_Buff,Fx_Ground_Kit_Tac_Motivation"},{label:"Orbital Devastation",effect:"Fx_Char_Voth_Orbitalstrike_Chasebeam"},{label:"Pahvan Crystal Prism noisy tether",effect:"Cfx_Er_Tfo_Pahvan_Crystal_Prism_Tether_Beam"},{label:"Rally Cry",effect:"Fx_Ground_Kit_Tac_Rallycry"},{label:"Red Riker Gun Sound effect",effect:"Cfx_Ep_Winterevent_Redriker_Sniper_Chargefx"},{label:"Scientific Aptitude (character glow)",effect:"Cfx_Ground_Kit_Sci_Scientificaptitude"},{label:"Solar Gateway",effect:"Fx_Char_Ico_Capt_Portal,Fx_Char_Ico_Capt_Portal_Sunbeam"},{label:"Smoke Grenade",effect:"Fx_Char_Grenade_smoke_costume,Fx_Char_Grenade_Smoke_Explode"},{label:"Sompek Energy Rebounder",effect:"Fx_Env_Gnd_Qadhos_Arena_Phaserhazard_Cylinder_Turret"},{label:"Strike Team III (character red glow)",effect:"Cfx_Ground_Kit_Tac_Striketeam"},{label:"Symphony of Lightning Char Glow",effect:"Fx_Er_Featured_Char_Kuumaarke_Wristgun_Tir_bufffx"},{label:"Symphony of Lightning Drone AoE",effect:"Cfx_Er_Featured_Char_Kuumaarke_Set_Symphony_Of_Lightning_Drone_Aoe"},{label:"Symphony of Lightning STRIKE",effect:"Fx_Er_Featured_Char_Kuumaarke_Set_Symphony_Of_Lightning_Strike"},{label:"Trajectory Bending",effect:"Cfx_Char_Xindi_Cb15_Tac_Kit_Trajectory_Bending"},{label:"Visual Dampening Field",effect:"Cfx_Char_Trait_Mirror_Vdfield"}]};class oe{constructor(){this.currentCategory="general",this.settings={},this.settingDefinitions=this.defineSettings()}init(){this.setupEventListeners(),this.loadSettings()}defineSettings(){return{syncFolderName:{type:"folder",default:null,category:"sync",element:"currentSyncFolder"},autoSync:{type:"boolean",default:!1,category:"sync",element:"autoSync"},autoSyncInterval:{type:"select",default:"change",options:["change","60","120","300"],category:"sync",element:"autoSyncInterval"}}}setupEventListeners(){document.querySelectorAll(".category-item").forEach(e=>{n.onDom(e,"click","category-select",e=>{const t=e.currentTarget.dataset.category;this.switchCategory(t)})}),n.onDom("savePreferencesBtn","click","save-preferences",()=>{this.saveAllSettings()});const e=document.getElementById("setSyncFolderBtn");e&&e.addEventListener("click",async()=>{if("undefined"!=typeof stoSync&&stoSync.setSyncFolder)try{const e=await stoSync.setSyncFolder();e&&e.name&&(this.loadSettings(),this.updateFolderUI())}catch(e){console.error("Failed to set sync folder:",e)}else console.warn("Sync functionality not available")}),this.setupSettingControls()}setupSettingControls(){Object.entries(this.settingDefinitions).forEach(([e,t])=>{const a=document.getElementById(t.element);if(a)switch(t.type){case"boolean":n.onDom(a,"change",`setting-${e}`,t=>{this.updateSetting(e,t.target.checked)});break;case"select":n.onDom(a,"change",`setting-${e}`,t=>{this.updateSetting(e,t.target.value)})}})}switchCategory(e){document.querySelectorAll(".category-item").forEach(e=>{e.classList.remove("active")}),document.querySelector(`[data-category="${e}"]`).classList.add("active"),document.querySelectorAll(".settings-panel").forEach(e=>{e.classList.remove("active")}),document.getElementById(`${e}-settings`).classList.add("active"),this.currentCategory=e}loadSettings(){if("undefined"==typeof stoStorage)return void console.warn("stoStorage not available yet, deferring settings load");const e=stoStorage.getSettings();Object.entries(this.settingDefinitions).forEach(([t,a])=>{const n=void 0!==e[t]?e[t]:a.default;this.settings[t]=n,this.updateUI(t,n)})}updateUI(e,t){const a=this.settingDefinitions[e];if(!a)return;const n=document.getElementById(a.element);if(n){switch(a.type){case"boolean":n.checked=!!t;break;case"select":n.value=t;break;case"folder":this.updateFolderUI(t)}"autoSync"===e&&"undefined"!=typeof app&&app.autoSyncManager&&(app.autoSyncManager.isEnabled=!!t)}}updateFolderUI(e){const t=document.getElementById("currentSyncFolder");if(t){const e="undefined"!=typeof stoStorage?stoStorage.getSettings():{},a=e.syncFolderName,n=e.syncFolderPath;a&&"null"!==a?(t.textContent=a,t.title=n&&n!==a?n:`Selected sync folder: ${a}`):(t.textContent=void 0!==X?X.t("no_folder_selected"):"No folder selected",t.title="")}}updateSetting(e,t){switch(this.settings[e]=t,e){case"autoSync":case"autoSyncInterval":"undefined"!=typeof app&&app.autoSyncManager&&app.autoSyncManager.updateAutoSync()}}saveAllSettings(){"undefined"!=typeof stoStorage?stoStorage.saveSettings(this.settings)?("undefined"!=typeof stoUI&&stoUI.showToast(X.t("preferences_saved"),"success"),Object.entries(this.settings).forEach(([e,t])=>{}),"undefined"!=typeof modalManager&&modalManager.hide("preferencesModal")):"undefined"!=typeof stoUI&&stoUI.showToast(X.t("failed_to_save_preferences"),"error"):console.error("stoStorage not available")}showPreferences(){this.loadSettings(),this.updateFolderUI(),"undefined"!=typeof modalManager&&modalManager.show("preferencesModal"),this.switchCategory("sync")}getSetting(e){return void 0!==this.settings[e]?this.settings[e]:this.settingDefinitions[e]?.default}addSetting(e,t){this.settingDefinitions[e]=t,this.settings[e]=t.default}removeSetting(e){delete this.settingDefinitions[e],delete this.settings[e]}}class re{constructor(){this.syncTimer=null,this.pendingChanges=!1,this.lastSyncTime=null,this.isEnabled=!1,this.interval="change"}init(){this.loadSettings(),this.setupEventListeners(),this.updateAutoSync()}loadSettings(){if("undefined"==typeof stoStorage)return void console.warn("stoStorage not available yet, deferring auto-sync setup");const e=stoStorage.getSettings();this.isEnabled=e.autoSync||!1,this.interval=e.autoSyncInterval||"change"}setupEventListeners(){n.on("profile-modified",()=>{this.onDataChange()}),n.on("keybind-modified",()=>{this.onDataChange()}),n.on("alias-modified",()=>{this.onDataChange()}),n.on("command-modified",()=>{this.onDataChange()}),n.on("project-saved",()=>{this.onManualSave()}),n.on("project-synced",()=>{this.onManualSave()})}onDataChange(){this.isEnabled&&(this.pendingChanges=!0,"change"===this.interval?this.performAutoSync():this.scheduleSync())}onManualSave(){this.pendingChanges=!1,this.clearSyncTimer()}scheduleSync(){if(this.syncTimer)return;const e=1e3*parseInt(this.interval);this.syncTimer=setTimeout(()=>{this.performAutoSync()},e)}clearSyncTimer(){this.syncTimer&&(clearTimeout(this.syncTimer),this.syncTimer=null)}async performAutoSync(){if(this.isEnabled&&this.pendingChanges)if("undefined"!=typeof stoSync)if(await stoSync.getSyncFolderHandle())try{this.updateModifiedIndicator("syncing"),await stoSync.syncProject(),this.pendingChanges=!1,this.lastSyncTime=new Date,this.updateModifiedIndicator("synced"),"change"!==this.interval&&"undefined"!=typeof stoUI&&stoUI.showToast(X.t("auto_sync_completed"),"success"),this.clearSyncTimer(),n.emit("auto-sync-completed",{timestamp:this.lastSyncTime})}catch(e){console.error("Auto-sync failed:",e),this.updateModifiedIndicator("error"),"change"!==this.interval&&"undefined"!=typeof stoUI&&stoUI.showToast("Auto-sync failed: "+e.message,"error")}else console.warn("No sync folder configured for auto-sync");else console.warn("Sync manager not available")}updateModifiedIndicator(e){const t=document.getElementById("modifiedIndicator");if(t)switch(t.classList.remove("syncing","synced","error"),e){case"syncing":t.style.display="inline",t.classList.add("syncing"),t.innerHTML='<i class="fas fa-sync fa-spin"></i> Syncing...';break;case"synced":t.style.display="inline",t.classList.add("synced"),t.innerHTML='<i class="fas fa-check"></i> Synced',setTimeout(()=>{t.classList.contains("synced")&&(t.style.display="none",t.classList.remove("synced"))},2e3);break;case"error":t.style.display="inline",t.classList.add("error"),t.innerHTML='<i class="fas fa-exclamation-triangle"></i> Sync Error',setTimeout(()=>{t.classList.contains("error")&&(t.style.display="none",t.classList.remove("error"))},5e3);break;default:t.style.display="none",t.innerHTML=""}}updateAutoSync(){this.loadSettings(),this.isEnabled?(console.log(`Auto-sync enabled with interval: ${this.interval}`),this.pendingChanges&&"change"!==this.interval&&this.scheduleSync()):(console.log("Auto-sync disabled"),this.clearSyncTimer())}enable(){this.isEnabled=!0,this.updateAutoSync()}disable(){this.isEnabled=!1,this.clearSyncTimer()}setInterval(e){this.interval=e,this.clearSyncTimer(),this.isEnabled&&this.pendingChanges&&"change"!==e&&this.scheduleSync()}getStatus(){return{enabled:this.isEnabled,interval:this.interval,pendingChanges:this.pendingChanges,lastSyncTime:this.lastSyncTime,timerActive:!!this.syncTimer}}async forcSync(){this.pendingChanges=!0,await this.performAutoSync()}}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("appVersion");t&&(t.textContent=e);const a=document.getElementById("aboutVersion");a&&(a.textContent=e)});const se=new class{constructor(){this.storageKey="sto_keybind_manager",this.backupKey="sto_keybind_manager_backup",this.settingsKey="sto_keybind_settings",this.version="1.0.0",this.init()}init(){this.migrateData(),this.ensureStorageStructure()}getAllData(){try{const e=localStorage.getItem(this.storageKey),t=localStorage.getItem("sto_app_reset");if(!e)return t?(localStorage.removeItem("sto_app_reset"),this.getEmptyData()):this.getDefaultData();const a=JSON.parse(e);return this.isValidDataStructure(a,!0)?a:this.getDefaultData()}catch(e){return console.error("Error loading data from storage:",e),this.getDefaultData()}}saveAllData(e){try{this.createBackup();const t={...e,version:this.version,lastModified:(new Date).toISOString(),lastBackup:(new Date).toISOString()};return localStorage.setItem(this.storageKey,JSON.stringify(t)),!0}catch(e){return console.error("Error saving data to storage:",e),!1}}getProfile(e){return this.getAllData().profiles[e]||null}saveProfile(e,t){const a=this.getAllData();return a.profiles[e]={...t,lastModified:(new Date).toISOString()},this.saveAllData(a)}deleteProfile(e){const t=this.getAllData();if(t.profiles[e]){if(delete t.profiles[e],t.currentProfile===e){const e=Object.keys(t.profiles);t.currentProfile=e.length>0?e[0]:null}return this.saveAllData(t)}return!1}getSettings(){try{const e=localStorage.getItem(this.settingsKey);if(!e)return this.getDefaultSettings();const t=JSON.parse(e);return{...this.getDefaultSettings(),...t}}catch(e){return console.error("Error loading settings:",e),this.getDefaultSettings()}}saveSettings(e){try{const t={...this.getSettings(),...e};return localStorage.setItem(this.settingsKey,JSON.stringify(t)),!0}catch(e){return console.error("Error saving settings:",e),!1}}createBackup(){try{const e=localStorage.getItem(this.storageKey);if(e){const t={data:e,timestamp:(new Date).toISOString(),version:this.version};localStorage.setItem(this.backupKey,JSON.stringify(t))}}catch(e){console.error("Error creating backup:",e)}}restoreFromBackup(){try{const e=localStorage.getItem(this.backupKey);if(e){const t=JSON.parse(e);return localStorage.setItem(this.storageKey,t.data),!0}}catch(e){console.error("Error restoring from backup:",e)}return!1}exportData(){const e=this.getAllData();return JSON.stringify(e,null,2)}importData(e){try{const t=JSON.parse(e);return!!this.isValidDataStructure(t)&&this.saveAllData(t)}catch(t){return t instanceof SyntaxError&&e.includes("invalid")||console.error("Error importing data:",t),!1}}clearAllData(){try{return localStorage.removeItem(this.storageKey),localStorage.removeItem(this.backupKey),localStorage.removeItem(this.settingsKey),localStorage.setItem("sto_app_reset","true"),!0}catch(e){return console.error("Error clearing data:",e),!1}}getStorageInfo(){try{const e=localStorage.getItem(this.storageKey)?.length||0,t=localStorage.getItem(this.backupKey)?.length||0,a=localStorage.getItem(this.settingsKey)?.length||0;return{totalSize:e+t+a,dataSize:e,backupSize:t,settingsSize:a,available:this.getAvailableStorage()}}catch(e){return console.error("Error getting storage info:",e),null}}getDefaultData(){return{version:this.version,created:(new Date).toISOString(),lastModified:(new Date).toISOString(),currentProfile:"default_space",profiles:{default_space:{...STO_DATA.defaultProfiles.default_space},tactical_space:{...STO_DATA.defaultProfiles.tactical_space}},globalAliases:{},settings:this.getDefaultSettings()}}getEmptyData(){return{version:this.version,created:(new Date).toISOString(),lastModified:(new Date).toISOString(),currentProfile:null,profiles:{},globalAliases:{},settings:this.getDefaultSettings()}}getDefaultSettings(){return{theme:"default",autoSave:!0,showTooltips:!0,confirmDeletes:!0,maxUndoSteps:50,defaultMode:"space",compactView:!1,language:this.detectBrowserLanguage(),syncFolderName:null,syncFolderPath:null,autoSync:!1,autoSyncInterval:"change"}}detectBrowserLanguage(){try{if("undefined"==typeof navigator)return"en";const e=navigator.languages&&navigator.languages[0]||navigator.language;if(!e)return"en";const t=e.toLowerCase().split(/[-_]/)[0];return["en","de","es","fr"].includes(t)?t:"en"}catch(e){return console.error("Error detecting browser language:",e),"en"}}isValidDataStructure(e,t=!1){if(!e||"object"!=typeof e)return!1;const a=["profiles","currentProfile"];for(const t of a)if(!(t in e))return!1;if("object"!=typeof e.profiles)return!1;for(const[a,n]of Object.entries(e.profiles)){const e=this.isValidProfile(n),a=t&&this.needsProfileMigration(n);if(!e&&!a)return!1}return!0}isValidProfile(e){if(!e||"object"!=typeof e)return!1;if(!e.name)return!1;if(e.builds&&"object"==typeof e.builds){const t=e.builds;if(!t.space&&!t.ground)return!1;for(const[e,a]of Object.entries(t))if("space"===e||"ground"===e){if(!a||"object"!=typeof a)return!1;if(!a.keys||"object"!=typeof a.keys)return!1}return!0}return!(!e.mode||!e.keys||"object"!=typeof e.keys)}ensureStorageStructure(){const e=this.getAllData();e.globalAliases||(e.globalAliases={}),e.settings||(e.settings=this.getDefaultSettings()),0===Object.keys(e.profiles).length&&null!==e.currentProfile&&(e.profiles={default_space:{...STO_DATA.defaultProfiles.default_space}},e.currentProfile="default_space"),Object.keys(e.profiles).length>0&&!e.profiles[e.currentProfile]&&(e.currentProfile=Object.keys(e.profiles)[0]),this.saveAllData(e)}migrateData(){const e=this.getAllData();let t=!1;e.version!==this.version&&(console.log(`Migrating data from ${e.version} to ${this.version}`),t=!0);for(const[a,n]of Object.entries(e.profiles))this.needsProfileMigration(n)&&(console.log(`Migrating profile "${n.name}" from old format to new format`),e.profiles[a]=this.migrateProfile(n),t=!0);t&&(e.version=this.version,this.saveAllData(e),console.log("Data migration completed"))}needsProfileMigration(e){return e&&e.mode&&e.keys&&!e.builds}migrateProfile(e){console.log(`Migrating profile: ${e.name}`);const t={name:e.name,description:e.description||"",currentEnvironment:this.mapOldModeToEnvironment(e.mode),builds:{space:{keys:{}},ground:{keys:{}}},aliases:e.aliases||{},keybindMetadata:e.keybindMetadata||{},created:e.created||(new Date).toISOString(),lastModified:(new Date).toISOString()},a=this.mapOldModeToEnvironment(e.mode);if(t.builds[a].keys=e.keys||{},e.keybindMetadata&&"object"==typeof e.keybindMetadata){const n=e.keybindMetadata.space||e.keybindMetadata.ground;t.keybindMetadata=n?e.keybindMetadata:{[a]:e.keybindMetadata}}return t}mapOldModeToEnvironment(e){if(!e)return"space";const t=("string"==typeof e?e:String(e)).toLowerCase();return"ground"===t||"ground mode"===t?"ground":"space"}getAvailableStorage(){try{let e="storage_test",t="0",a=0,n=0,i=10485760;for(;n<=i;){let o=Math.floor((n+i)/2);t="0".repeat(o);try{localStorage.setItem(e,t),localStorage.removeItem(e),a=o,n=o+1}catch(e){i=o-1}}return a}catch(e){return 0}}loadDefaultData(){const e=this.getDefaultData();return this.saveAllData(e)}},ce=se.getSettings();(async()=>{function e(e=document){e.querySelectorAll("[data-i18n]").forEach(e=>{const t=e.getAttribute("data-i18n"),a=e.getAttribute("data-i18n-attr");if(!t)return;const n=X.t(t);a?e.setAttribute(a,n):e.textContent=n}),e.querySelectorAll("[data-i18n-placeholder]").forEach(e=>{const t=e.getAttribute("data-i18n-placeholder");t&&e.setAttribute("placeholder",X.t(t))}),e.querySelectorAll("[data-i18n-title]").forEach(e=>{const t=e.getAttribute("data-i18n-title");t&&e.setAttribute("title",X.t(t))}),e.querySelectorAll("[data-i18n-alt]").forEach(e=>{const t=e.getAttribute("data-i18n-alt");t&&e.setAttribute("alt",X.t(t))})}await X.init({lng:ce.language||"en",fallbackLng:"en",resources:{en:{translation:H},de:{translation:J},fr:{translation:Z},es:{translation:Y}}}),window.i18next=X,window.localizeCommandData&&window.localizeCommandData(),window.applyTranslations=e,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>e()):e()})();const le=new class{constructor(){this.currentModal=null,this.languageListenersSetup=!1,this.eventListenersSetup=!1}init(){this.setupEventListeners()}setupEventListeners(){if(this.eventListenersSetup)return;this.eventListenersSetup=!0;const e=document.getElementById("profileSelect");if(e&&e.addEventListener("change",e=>{app.switchProfile(e.target.value)}),n.onDom("newProfileBtn","click","profile-new",()=>{this.showNewProfileModal()}),n.onDom("cloneProfileBtn","click","profile-clone",()=>{this.showCloneProfileModal()}),n.onDom("renameProfileBtn","click","profile-rename",()=>{this.showRenameProfileModal()}),n.onDom("deleteProfileBtn","click","profile-delete",()=>{this.confirmDeleteProfile()}),n.onDom("saveProfileBtn","click","profile-save",()=>{this.handleProfileSave()}),n.onDom("settingsBtn","click","settings-menu",e=>{e.stopPropagation(),this.toggleSettingsMenu()}),n.onDom("importMenuBtn","click","import-menu",e=>{e.stopPropagation(),this.toggleImportMenu()}),n.onDom("backupMenuBtn","click","backup-menu",e=>{e.stopPropagation(),this.toggleBackupMenu()}),n.on("project-open",()=>this.closeBackupMenu()),n.on("project-save",()=>this.closeBackupMenu()),n.onDom("importKeybindsBtn","click","keybinds-import",()=>{this.importKeybinds(),this.closeImportMenu()}),n.onDom("importAliasesBtn","click","aliases-import",()=>{this.importAliases(),this.closeImportMenu()}),n.onDom("loadDefaultDataBtn","click","load-default-data",()=>{this.loadDefaultData(),this.closeSettingsMenu()}),n.onDom("resetAppBtn","click","reset-app",()=>{this.confirmResetApp(),this.closeSettingsMenu()}),n.onDom("syncNowBtn","click","sync-now",()=>{stoSync.syncProject(),this.closeSettingsMenu()}),n.onDom("aboutBtn","click","about-open",()=>{modalManager.show("aboutModal")}),n.onDom("themeToggleBtn","click","theme-toggle",()=>{app.toggleTheme(),this.closeSettingsMenu()}),n.onDom("preferencesBtn","click","preferences-open",()=>{"undefined"!=typeof app&&app.preferencesManager?app.preferencesManager.showPreferences():modalManager.show("preferencesModal"),this.closeSettingsMenu()}),n.onDom("languageMenuBtn","click","language-menu",e=>{e.stopPropagation(),this.toggleLanguageMenu()}),!this.languageListenersSetup){const e=document.querySelectorAll(".language-option");e.length>0?(e.forEach(e=>{n.onDom(e,"click","language-change",e=>{const t=e.currentTarget.dataset.lang;t&&app.changeLanguage(t),this.closeLanguageMenu()})}),this.languageListenersSetup=!0):(console.warn("Language option elements not found during setup"),setTimeout(()=>{if(!this.languageListenersSetup){const e=document.querySelectorAll(".language-option");e.length>0?(e.forEach(e=>{n.onDom(e,"click","language-change",e=>{const t=e.currentTarget.dataset.lang;t&&app.changeLanguage(t),this.closeLanguageMenu()})}),this.languageListenersSetup=!0):console.error("Language option elements still not found after retry")}},1e3))}document.addEventListener("click",()=>{this.closeSettingsMenu(),this.closeImportMenu(),this.closeBackupMenu(),this.closeLanguageMenu()})}showNewProfileModal(){document.getElementById("profileModal");const e=document.getElementById("profileModalTitle"),t=document.getElementById("profileName"),a=document.getElementById("profileDescription");e&&(e.textContent=i18next.t("new_profile")),t&&(t.value="",t.placeholder="Enter profile name"),a&&(a.value=""),this.currentModal="new",modalManager.show("profileModal")}showCloneProfileModal(){const e=app.getCurrentProfile();if(!e)return void stoUI.showToast("No profile selected to clone","warning");document.getElementById("profileModal");const t=document.getElementById("profileModalTitle"),a=document.getElementById("profileName"),n=document.getElementById("profileDescription");t&&(t.textContent=i18next.t("clone_profile")),a&&(a.value=`${e.name} Copy`,a.placeholder="Enter new profile name"),n&&(n.value=`Copy of ${e.name}`),this.currentModal="clone",modalManager.show("profileModal")}showRenameProfileModal(){const e=app.getCurrentProfile();if(!e)return void stoUI.showToast("No profile selected to rename","warning");document.getElementById("profileModal");const t=document.getElementById("profileModalTitle"),a=document.getElementById("profileName"),n=document.getElementById("profileDescription");t&&(t.textContent=i18next.t("rename_profile")),a&&(a.value=e.name,a.placeholder="Enter profile name"),n&&(n.value=e.description||""),this.currentModal="rename",modalManager.show("profileModal")}handleProfileSave(){const e=document.getElementById("profileName"),t=document.getElementById("profileDescription");if(!e)return;const a=e.value.trim(),n=t?.value.trim()||"";if(!a)return stoUI.showToast("Profile name is required","error"),void e.focus();if(a.length>50)return stoUI.showToast("Profile name is too long (max 50 characters)","error"),void e.focus();const i=stoStorage.getAllData();if(Object.values(i.profiles).find(e=>e.name.toLowerCase()===a.toLowerCase()&&("rename"!==this.currentModal||e.name!==app.getCurrentProfile()?.name)))return stoUI.showToast("A profile with this name already exists","error"),void e.focus();try{switch(this.currentModal){case"new":this.createNewProfile(a,n);break;case"clone":this.cloneCurrentProfile(a,n);break;case"rename":this.renameCurrentProfile(a,n)}modalManager.hide("profileModal"),this.currentModal=null}catch(e){stoUI.showToast("Failed to save profile: "+e.message,"error")}}createNewProfile(e,t){const a=app.generateProfileId(e),n={name:e,description:t,mode:"space",keys:{},aliases:{},created:(new Date).toISOString(),lastModified:(new Date).toISOString()};if(!stoStorage.saveProfile(a,n))throw new Error("Failed to save profile");app.switchProfile(a),app.renderProfiles(),stoUI.showToast(`Profile "${e}" created`,"success")}cloneCurrentProfile(e,t){const a=app.getCurrentProfile();if(!a)throw new Error("No profile to clone");const n=app.generateProfileId(e),i={...JSON.parse(JSON.stringify(a)),name:e,description:t,created:(new Date).toISOString(),lastModified:(new Date).toISOString()};if(!stoStorage.saveProfile(n,i))throw new Error("Failed to save cloned profile");app.switchProfile(n),app.renderProfiles(),stoUI.showToast(`Profile "${e}" created from "${a.name}"`,"success")}renameCurrentProfile(e,t){const a=app.getCurrentProfile();if(!a)throw new Error("No profile to rename");const n=a.name;if(a.name=e,a.description=t,a.lastModified=(new Date).toISOString(),!stoStorage.saveProfile(Q.currentProfile,a))throw new Error("Failed to save renamed profile");app.renderProfiles(),app.setModified(!0),stoUI.showToast(`Profile renamed from "${n}" to "${e}"`,"success")}async confirmDeleteProfile(){const e=app.getCurrentProfile();if(!e)return void stoUI.showToast("No profile selected to delete","warning");const t=stoStorage.getAllData();Object.keys(t.profiles).length<=1?stoUI.showToast("Cannot delete the last profile","warning"):await stoUI.confirm(`Are you sure you want to delete the profile "${e.name}"?\n\nThis action cannot be undone.`,"Delete Profile","danger")&&this.deleteCurrentProfile()}deleteCurrentProfile(){const e=app.getCurrentProfile();if(!e)return;const t=e.name;app.deleteProfile(app.currentProfile)?stoUI.showToast(`Profile "${t}" deleted`,"success"):stoUI.showToast("Failed to delete profile","error")}toggleSettingsMenu(){const e=document.getElementById("settingsBtn");if(e){const t=e.closest(".dropdown");t&&t.classList.toggle("active")}}closeSettingsMenu(){const e=document.getElementById("settingsBtn");if(e){const t=e.closest(".dropdown");t&&t.classList.remove("active")}}toggleImportMenu(){this.closeSettingsMenu();const e=document.getElementById("importMenuBtn");if(e){const t=e.closest(".dropdown");t&&t.classList.toggle("active")}}closeImportMenu(){const e=document.getElementById("importMenuBtn");if(e){const t=e.closest(".dropdown");t&&t.classList.remove("active")}}toggleBackupMenu(){this.closeSettingsMenu();const e=document.getElementById("backupMenuBtn");if(e){const t=e.closest(".dropdown");t&&t.classList.toggle("active")}}closeBackupMenu(){const e=document.getElementById("backupMenuBtn");if(e){const t=e.closest(".dropdown");t&&t.classList.remove("active")}}toggleLanguageMenu(){const e=document.getElementById("languageMenuBtn");if(e){const t=e.closest(".dropdown");t&&t.classList.toggle("active")}}closeLanguageMenu(){const e=document.getElementById("languageMenuBtn");if(e){const t=e.closest(".dropdown");t&&t.classList.remove("active")}}importKeybinds(){const e=document.getElementById("fileInput");e&&(e.accept=".txt",e.onchange=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{try{stoKeybinds.importKeybindFile(e.target.result)}catch(e){stoUI.showToast("Failed to import keybind file: "+e.message,"error")}},e.readAsText(t)}e.target.value=""},e.click())}exportKeybinds(){const e=app.getCurrentProfile();e?e.keys&&0!==Object.keys(e.keys).length?stoExport.exportSTOKeybindFile(e):stoUI.showToast("No keybinds to export","warning"):stoUI.showToast("No profile selected to export","warning")}importAliases(){const e=document.createElement("input");e.type="file",e.accept=".txt",e.onchange=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{try{const t=e.target.result;stoKeybinds.importAliasFile(t),window.stoAliases&&"function"==typeof window.stoAliases.renderAliasList&&window.stoAliases.renderAliasList()}catch(e){stoUI.showToast("Failed to import aliases: "+e.message,"error")}},e.readAsText(t)}},e.click()}exportAliases(){const e=app.getCurrentProfile();e?e.aliases&&0!==Object.keys(e.aliases).length?stoExport.exportAliases(e):stoUI.showToast("No aliases to export","warning"):stoUI.showToast("No profile selected to export","warning")}async confirmResetApp(){await stoUI.confirm("Are you sure you want to reset the application?\n\nThis will delete all profiles, keybinds, and settings. This action cannot be undone.","Reset Application","danger")&&this.resetApplication()}resetApplication(){try{stoStorage.clearAllData(),app.currentProfile=null,app.selectedKey=null,app.setModified(!1),app.renderProfiles(),app.renderKeyGrid(),app.renderCommandChain(),app.updateProfileInfo(),stoUI.showToast("Application reset successfully. All data cleared.","success")}catch(e){stoUI.showToast("Failed to reset application: "+e.message,"error")}}loadDefaultData(){try{if(stoStorage.loadDefaultData()){const e=stoStorage.getAllData();app.currentProfile=e.currentProfile,app.selectedKey=null,app.setModified(!1),app.renderProfiles(),app.renderKeyGrid(),app.renderCommandChain(),app.updateProfileInfo(),stoUI.showToast("Default demo data loaded successfully","success")}else stoUI.showToast("Failed to load default data","error")}catch(e){stoUI.showToast("Failed to load default data: "+e.message,"error")}}getProfileAnalysis(e){const t={keyCount:Object.keys(e.keys).length,commandCount:0,aliasCount:Object.keys(e.aliases||{}).length,commandTypes:{},keyTypes:{function:0,number:0,letter:0,special:0,modifier:0},complexity:"Simple",recommendations:[]};return Object.entries(e.keys).forEach(([e,a])=>{t.commandCount+=a.length,/^F\d+$/.test(e)?t.keyTypes.function++:/^\d+$/.test(e)?t.keyTypes.number++:/^[A-Z]$/.test(e)?t.keyTypes.letter++:e.includes("+")?t.keyTypes.modifier++:t.keyTypes.special++,a.forEach(e=>{t.commandTypes[e.type]=(t.commandTypes[e.type]||0)+1})}),t.commandCount>50?t.complexity="Complex":t.commandCount>20&&(t.complexity="Moderate"),this.generateRecommendations(t,e),t}generateRecommendations(e,t){const a=[];e.commandTypes.targeting||e.commandTypes.combat||a.push({type:"setup",title:"Add Basic Combat Commands",description:"Consider adding targeting and firing commands for basic combat functionality.",priority:"high"}),e.commandTypes.power||a.push({type:"defensive",title:"Add Defensive Abilities",description:"Add shield management commands like shield distribution and shield routing.",priority:"medium"}),e.keyTypes.modifier<3&&e.keyCount>10&&a.push({type:"efficiency",title:"Use Modifier Keys",description:"Consider using Ctrl+, Alt+, and Shift+ combinations to access more commands efficiently.",priority:"low"}),0===e.aliasCount&&e.commandCount>15&&a.push({type:"organization",title:"Create Command Aliases",description:"Use aliases to group related commands and simplify complex sequences.",priority:"medium"});const n=["FireAll","target_nearest_enemy","+fullimpulse"],i=Object.values(t.keys).some(e=>e.some(e=>n.some(t=>e.command.includes(t))));"ground"===t.mode&&i&&a.push({type:"mode",title:"Check Profile Mode",description:"This profile contains space combat commands but is set to ground mode.",priority:"medium"}),e.recommendations=a}getProfileTemplates(){return{basic_space:{name:"Basic Space Combat",description:"Essential space combat keybinds for new players",mode:"space",keys:{Space:[{command:"target_nearest_enemy",type:"targeting",icon:"üéØ",text:"Target nearest enemy"},{command:"FireAll",type:"combat",icon:"üî•",text:"Fire all weapons"}],Tab:[{command:"target_nearest_friend",type:"targeting",icon:"ü§ù",text:"Target nearest friend"}],F1:[{command:"target_self",type:"targeting",icon:"üë§",text:"Target self"},{command:"+power_exec Distribute_Shields",type:"power",icon:"üõ°Ô∏è",text:"Distribute shields"}]},aliases:{}},advanced_tactical:{name:"Advanced Tactical",description:"Comprehensive DPS-focused space build",mode:"space",keys:{Space:[{command:"target_nearest_enemy",type:"targeting",icon:"üéØ",text:"Target nearest enemy"},{command:"+STOTrayExecByTray 0 0",type:"tray",icon:"‚ö°",text:"Execute Tray 1 Slot 1"},{command:"FireAll",type:"combat",icon:"üî•",text:"Fire all weapons"}],1:[{command:"+STOTrayExecByTray 1 0",type:"tray",icon:"‚ö°",text:"Execute Tray 2 Slot 1"}],2:[{command:"+STOTrayExecByTray 1 1",type:"tray",icon:"‚ö°",text:"Execute Tray 2 Slot 2"}],F1:[{command:"target_self",type:"targeting",icon:"üë§",text:"Target self"}],F2:[{command:"target_self",type:"targeting",icon:"üë§",text:"Target self"}]},aliases:{AlphaStrike:{name:"AlphaStrike",commands:"target_nearest_enemy $$ +STOTrayExecByTray 0 0 $$ +STOTrayExecByTray 0 1",description:"Full alpha strike sequence"}}},ground_combat:{name:"Ground Combat",description:"Ground combat and away team keybinds",mode:"ground",keys:{Space:[{command:"target_nearest_enemy",type:"targeting",icon:"üéØ",text:"Target nearest enemy"},{command:"+STOTrayExecByTray 0 0",type:"tray",icon:"‚ö°",text:"Primary attack"}],1:[{command:"+STOTrayExecByTray 0 1",type:"tray",icon:"‚ö°",text:"Secondary attack"}],2:[{command:"+STOTrayExecByTray 0 2",type:"tray",icon:"‚ö°",text:"Kit ability 1"}],F1:[{command:"target_self",type:"targeting",icon:"üë§",text:"Target self"},{command:"+STOTrayExecByTray 1 0",type:"tray",icon:"üíä",text:"Heal self"}]},aliases:{}}}}createProfileFromTemplate(e){const t=this.getProfileTemplates()[e];if(!t)return void stoUI.showToast("Template not found","error");let a=t.name,n=1;const i=stoStorage.getAllData();for(;Object.values(i.profiles).some(e=>e.name===a);)a=`${t.name} ${n}`,n++;const o=app.generateProfileId(a),r={...t,name:a,created:(new Date).toISOString(),lastModified:(new Date).toISOString()};Object.values(r.keys).forEach(e=>{e.forEach(e=>{e.id=app.generateCommandId()})}),stoStorage.saveProfile(o,r)?(app.switchProfile(o),app.renderProfiles(),stoUI.showToast(`Profile "${a}" created from template`,"success")):stoUI.showToast("Failed to create profile from template","error")}exportProfile(e){const t=stoStorage.getProfile(e);if(!t)return void stoUI.showToast("Profile not found","error");const a={version:"1.0.0",exported:(new Date).toISOString(),profile:t},n=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=`${t.name.replace(/[^a-zA-Z0-9]/g,"_")}_profile.json`,o.click(),URL.revokeObjectURL(i),stoUI.showToast(`Profile "${t.name}" exported`,"success")}async importProfile(e){try{const t=JSON.parse(e);if(!t.profile)throw new Error("Invalid profile file format");const a=t.profile;let n=a.name,i=1;const o=stoStorage.getAllData();for(;Object.values(o.profiles).some(e=>e.name===n);)n=`${a.name} (${i})`,i++;a.name=n,a.imported=(new Date).toISOString(),a.lastModified=(new Date).toISOString();const r=app.generateProfileId(n);if(stoStorage.saveProfile(r,a))return app.renderProfiles(),stoUI.showToast(`Profile "${n}" imported successfully`,"success"),!0;throw new Error("Failed to save imported profile")}catch(e){return stoUI.showToast("Failed to import profile: "+e.message,"error"),!1}}},de=new class{constructor(){this.keybindPatterns={standard:/^([a-zA-Z0-9_+\-\s\[\]]+)\s+"([^"]*)"(?:\s+"([^"]*)")?$/,bind:/^\/bind\s+([a-zA-Z0-9_+\-\s\[\]]+)\s+(.+)$/,alias:/^alias\s+([a-zA-Z_][a-zA-Z0-9_]*)\s+(?:"([^"]+)"|<&\s+(.+?)\s+&>)$/,comment:/^[#;].*$/},this.validKeys=this.generateValidKeys()}init(){this.setupEventListeners()}generateValidKeys(){const e=new Set;for(let t=1;t<=12;t++)e.add(`F${t}`);for(let t=0;t<=9;t++)e.add(t.toString());for(let t=65;t<=90;t++)e.add(String.fromCharCode(t));["Space","Tab","Enter","Escape","Backspace","Delete","Insert","Home","End","PageUp","PageDown","Up","Down","Left","Right","NumPad0","NumPad1","NumPad2","NumPad3","NumPad4","NumPad5","NumPad6","NumPad7","NumPad8","NumPad9","NumPadEnter","NumPadPlus","NumPadMinus","NumPadMultiply","NumPadDivide","numpad0","numpad1","numpad2","numpad3","numpad4","numpad5","numpad6","numpad7","numpad8","numpad9","divide","multiply","Button4","Button5","Button6","Button7","Button8","Lbutton","Rbutton","Mbutton","Leftdrag","Rightdrag","Middleclick","Mousechord","Wheelplus","Wheelminus","Semicolon","Equals","Comma","Minus","Period","Slash","Grave","LeftBracket","Backslash","RightBracket","Quote","[","]"].forEach(t=>e.add(t));const t=Array.from(e);return["Ctrl","Alt","Shift","Control"].forEach(a=>{t.forEach(t=>{e.add(`${a}+${t}`)})}),e.add("Ctrl+Alt"),e.add("Ctrl+Shift"),e.add("Alt+Shift"),e.add("Control+Alt"),e.add("Control+Shift"),t.forEach(t=>{e.add(`Ctrl+Alt+${t}`),e.add(`Ctrl+Shift+${t}`),e.add(`Alt+Shift+${t}`),e.add(`Control+Alt+${t}`),e.add(`Control+Shift+${t}`)}),Array.from(e).sort()}parseKeybindFile(e){const t=e.split("\n"),a={keybinds:{},aliases:{},comments:[],errors:[]};return t.forEach((e,t)=>{const n=e.trim();if(n)try{if(this.keybindPatterns.comment.test(n))a.comments.push({line:t+1,content:n});else if(this.keybindPatterns.alias.test(n)){const e=n.match(this.keybindPatterns.alias);if(e){const[,n,i,o]=e,r=i||o;a.aliases[n]={name:n,commands:r,line:t+1}}}else if(this.keybindPatterns.standard.test(n)){const e=n.match(this.keybindPatterns.standard);if(e){const[,n,i,o]=e,r=this.parseCommandString(i);a.keybinds[n]={key:n,commands:r,line:t+1,raw:i,optionalParam:o||null}}}else if(this.keybindPatterns.bind.test(n)){const e=n.match(this.keybindPatterns.bind);if(e){const[,n,i]=e,o=i.replace(/^"(.*)"$/,"$1"),r=this.parseCommandString(o);a.keybinds[n]={key:n,commands:r,line:t+1,raw:o}}}else a.errors.push({line:t+1,content:n,error:"Invalid keybind format"})}catch(e){a.errors.push({line:t+1,content:n,error:e.message})}}),a}generateMirroredCommandString(e){if(!e||e.length<=1)return e.map(e=>e.command||e).join(" $$ ");const t=e.map(e=>e.command||e),a=[...t].reverse().slice(1);return[...t,...a].join(" $$ ")}detectAndUnmirrorCommands(e){if(!e||"string"!=typeof e)return{isMirrored:!1,originalCommands:[]};const t=e.split(" $$ ").map(e=>e.trim()).filter(e=>e);if(t.length<=1)return{isMirrored:!1,originalCommands:t};if(t.length<3||t.length%2==0)return{isMirrored:!1,originalCommands:t};const a=Math.floor(t.length/2),n=t.slice(0,a+1),i=t.slice(a+1),o=n.slice(0,-1).reverse();return i.length===o.length&&i.every((e,t)=>e===o[t])?{isMirrored:!0,originalCommands:n}:{isMirrored:!1,originalCommands:t}}parseCommandString(e){return e.split("$$").map(e=>e.trim()).map((e,t)=>{const a={command:e,type:window.stoCommands?window.stoCommands.detectCommandType(e):"custom",icon:window.stoCommands?window.stoCommands.getCommandIcon(e):"‚öôÔ∏è",text:window.stoCommands?window.stoCommands.getCommandText(e):e,id:`imported_${Date.now()}_${t}`};if(e.includes("+STOTrayExecByTray")){const t=e.match(/\+STOTrayExecByTray\s+(\d+)\s+(\d+)/);t&&(a.parameters={tray:parseInt(t[1]),slot:parseInt(t[2])},a.text=`Execute Tray ${parseInt(t[1])+1} Slot ${parseInt(t[2])+1}`)}else if(e.includes('"')){const t=e.match(/^(\w+)\s+"([^"]+)"$/);t&&(a.parameters={message:t[2]},a.text=`${a.text}: ${t[2]}`)}return a})}importKeybindFile(e){const t=stoStorage.getProfile(Q.currentProfile);if(!t)return stoUI.showToast(X.t("no_profile_selected_for_import"),"warning"),{success:!1,error:"No active profile"};try{const a=this.parseKeybindFile(e),n=Object.keys(a.keybinds).length;if(0===n)return stoUI.showToast(X.t("no_keybinds_found_in_file"),"warning"),{success:!1,error:"No keybinds found"};t.builds||(t.builds={space:{keys:{}},ground:{keys:{}}}),t.builds[Q.currentEnvironment]||(t.builds[Q.currentEnvironment]={keys:{}});const i=t.builds[Q.currentEnvironment].keys;Object.entries(a.keybinds).forEach(([e,a])=>{const n=a.commands.map(e=>e.command).join(" $$ "),o=this.detectAndUnmirrorCommands(n);if(o.isMirrored){i[e]=this.parseCommandString(o.originalCommands.join(" $$ "));const a=Q.currentEnvironment;t.keybindMetadata||(t.keybindMetadata={}),t.keybindMetadata[a]||(t.keybindMetadata[a]={}),t.keybindMetadata[a][e]={stabilizeExecutionOrder:!0}}else i[e]=a.commands}),stoStorage.saveProfile(Q.currentProfile,t),app.setModified(!0),app.renderKeyGrid();const o=X.t("import_completed_keybinds",{count:n});return Object.keys(a.aliases).length>0?stoUI.showToast(X.t("import_completed_keybinds_with_aliases",{keyCount:n,aliasCount:Object.keys(a.aliases).length}),"success"):stoUI.showToast(o,"success"),{success:!0,imported:{keys:n},errors:a.errors}}catch(e){return stoUI.showToast(X.t("import_failed",{error:e.message}),"error"),{success:!1,error:e.message}}}importAliasFile(e){if(!app.getCurrentProfile())return stoUI.showToast(X.t("no_profile_selected_for_import"),"warning"),{success:!1,error:"No active profile"};try{const t=this.parseKeybindFile(e),a=Object.keys(t.aliases).length;if(0===a)return stoUI.showToast(X.t("no_aliases_found_in_file"),"warning"),{success:!1,error:"No aliases found"};const n=stoStorage.getProfile(Q.currentProfile);return n?(n.aliases||(n.aliases={}),Object.entries(t.aliases).forEach(([e,t])=>{n.aliases[e]={commands:t.commands,description:t.description||""}}),stoStorage.saveProfile(Q.currentProfile,n),app.setModified(!0),window.stoAliases&&"function"==typeof window.stoAliases.updateCommandLibrary&&window.stoAliases.updateCommandLibrary(),stoUI.showToast(X.t("import_completed_aliases",{count:a}),"success"),{success:!0,imported:{aliases:a},errors:t.errors}):(stoUI.showToast(X.t("failed_to_get_profile_for_import"),"error"),{success:!1,error:"Profile not found"})}catch(e){return stoUI.showToast(X.t("import_failed",{error:e.message}),"error"),{success:!1,error:e.message}}}exportProfile(e){let t="";return t+=`# ${e.name} - ${e.mode} mode\n`,t+="# Generated by STO Tools Keybind Manager\n",t+=`# ${(new Date).toLocaleString()}\n\n`,t+="# Keybind Commands\n",Object.keys(e.keys).sort(this.compareKeys.bind(this)).forEach(a=>{const n=e.keys[a];if(n&&n.length>0){let i,o=!1;if(e.keybindMetadata){const t=e.mode||"space";e.keybindMetadata[t]&&e.keybindMetadata[t][a]&&(o=!!e.keybindMetadata[t][a].stabilizeExecutionOrder)}i=o&&n.length>1?this.generateMirroredCommandString(n):n.map(e=>e.command).join(" $$ "),t+=`${a} "${i}" ""\n`}else t+=`${a} "" ""\n`}),t}compareKeys(e,t){const a=e.match(/^F(\d+)$/),n=t.match(/^F(\d+)$/);if(a&&n)return parseInt(a[1])-parseInt(n[1]);if(a&&!n)return-1;if(!a&&n)return 1;const i=/^\d+$/.test(e),o=/^\d+$/.test(t);if(i&&o)return parseInt(e)-parseInt(t);if(i&&!o)return-1;if(!i&&o)return 1;const r=/^[A-Z]$/.test(e),s=/^[A-Z]$/.test(t);if(r&&s)return e.localeCompare(t);if(r&&!s)return-1;if(!r&&s)return 1;const c=["Space","Tab","Enter","Escape"],l=c.indexOf(e),d=c.indexOf(t);return-1!==l&&-1!==d?l-d:-1!==l&&-1===d?-1:-1===l&&-1!==d?1:e.localeCompare(t)}isValidKey(e){return!(!e||"string"!=typeof e)&&this.validKeys.some(t=>t.toLowerCase()===e.toLowerCase())}isValidAliasName(e){return STO_DATA.validation.aliasNamePattern.test(e)}validateKeybind(e,t){const a=[];return this.isValidKey(e)||a.push(`Invalid key name: ${e}`),t&&0!==t.length?t.forEach((e,t)=>{e.command&&0!==e.command.trim().length||a.push(`Command ${t+1} is empty`)}):a.push("At least one command is required"),t&&t.length>STO_DATA.validation.maxCommandsPerKey&&a.push(`Too many commands (max ${STO_DATA.validation.maxCommandsPerKey})`),{valid:0===a.length,errors:a}}suggestKeys(e=""){const t=e.toLowerCase();return this.validKeys.filter(e=>e.toLowerCase().includes(t)).slice(0,20)}getCommonKeys(){return["Space","Tab","Enter","F1","F2","F3","F4","F5","F6","F7","F8","1","2","3","4","5","6","7","8","9","0","Ctrl+1","Ctrl+2","Ctrl+3","Ctrl+4","Alt+1","Alt+2","Alt+3","Alt+4","Shift+1","Shift+2","Shift+3","Shift+4"]}setupEventListeners(){}handleKeybindFileImport(e){const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=e=>{try{this.importKeybindFile(e.target.result)}catch(e){stoUI.showToast("Failed to import keybind file: "+e.message,"error")}},a.readAsText(t),e.target.value=""}generateKeybindId(){return"keybind_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}cloneKeybind(e){return JSON.parse(JSON.stringify(e))}getProfileStats(e){const t={totalKeys:Object.keys(e.keys).length,totalCommands:0,totalAliases:Object.keys(e.aliases||{}).length,commandTypes:{},mostUsedCommands:{}};return Object.values(e.keys).forEach(e=>{t.totalCommands+=e.length,e.forEach(e=>{t.commandTypes[e.type]=(t.commandTypes[e.type]||0)+1,t.mostUsedCommands[e.command]=(t.mostUsedCommands[e.command]||0)+1})}),t}},me=new class{constructor(){this.currentAlias=null}init(){this.setupEventListeners(),this.updateCommandLibrary()}setupEventListeners(){n.onDom("addAliasBtn","click","alias-manager-open",()=>{this.showAliasManager()}),n.onDom("newAliasBtn","click","alias-new",()=>{this.showEditAliasModal()}),n.onDom("saveAliasBtn","click","alias-save",()=>{this.saveAlias()}),document.addEventListener("input",e=>{["aliasName","aliasCommands","aliasDescription"].includes(e.target.id)&&this.updateAliasPreview()}),document.addEventListener("click",e=>{if(e.target.classList.contains("insert-target-btn")||e.target.closest(".insert-target-btn")){e.preventDefault();const t=(e.target.classList.contains("insert-target-btn")?e.target:e.target.closest(".insert-target-btn")).closest(".textarea-with-button"),a=t?t.querySelector("textarea"):null;a&&this.insertTargetVariable(a)}})}showAliasManager(){this.renderAliasList(),modalManager.show("aliasManagerModal")}renderAliasList(){const e=document.getElementById("aliasList");if(!e)return;const t=app.getCurrentProfile();if(!t||!t.aliases)return void(e.innerHTML=`\n                <div class="empty-state">\n                    <i class="fas fa-mask"></i>\n                    <h4>${X.t("no_aliases")}</h4>\n                    <p>${X.t("create_aliases_hint")}</p>\n                </div>\n            `);const a=Object.entries(t.aliases);0!==a.length?(e.innerHTML=`\n            <div class="alias-grid">\n                ${a.map(([e,t])=>this.createAliasCard(e,t)).join("")}\n            </div>\n        `,e.querySelectorAll(".alias-card").forEach(e=>{const t=e.dataset.alias;e.querySelector(".edit-alias-btn")?.addEventListener("click",()=>{this.editAlias(t)}),e.querySelector(".delete-alias-btn")?.addEventListener("click",()=>{this.confirmDeleteAlias(t)}),e.querySelector(".use-alias-btn")?.addEventListener("click",()=>{this.useAlias(t)})})):e.innerHTML=`\n                <div class="empty-state">\n                    <i class="fas fa-mask"></i>\n                    <h4>${X.t("no_aliases")}</h4>\n                    <p>${X.t("create_aliases_hint")}</p>\n                </div>\n            `}createAliasCard(e,t){const a=t.commands.length>60?t.commands.substring(0,60)+"...":t.commands;return`\n            <div class="alias-card" data-alias="${e}">\n                <div class="alias-header">\n                    <h4>${e}</h4>\n                    <div class="alias-actions">\n                        <button class="btn btn-small-icon edit-alias-btn" title="Edit Alias">\n                            <i class="fas fa-edit"></i>\n                        </button>\n                        <button class="btn btn-small-icon use-alias-btn" title="Add to Current Key">\n                            <i class="fas fa-plus"></i>\n                        </button>\n                        <button class="btn btn-small-icon btn-danger delete-alias-btn" title="Delete Alias">\n                            <i class="fas fa-trash"></i>\n                        </button>\n                    </div>\n                </div>\n                <div class="alias-description">\n                    ${t.description||"No description"}\n                </div>\n                <div class="alias-commands">\n                    <code>${a}</code>\n                </div>\n                <div class="alias-usage">\n                    Usage: <code>${e}</code>\n                </div>\n            </div>\n        `}showEditAliasModal(e=null){const t=document.getElementById("editAliasTitle"),a=document.getElementById("aliasName"),n=document.getElementById("aliasDescription"),i=document.getElementById("aliasCommands");if(e){const o=app.getCurrentProfile().aliases[e];t&&(t.textContent=X.t("edit_alias")),a&&(a.value=e,a.disabled=!0),n&&(n.value=o.description||""),i&&(i.value=o.commands),this.currentAlias=e}else t&&(t.textContent=X.t("new_alias")),a&&(a.value="",a.disabled=!1),n&&(n.value=""),i&&(i.value=""),this.currentAlias=null;this.updateAliasPreview(),modalManager.hide("aliasManagerModal"),modalManager.show("editAliasModal")}editAlias(e){this.showEditAliasModal(e)}async confirmDeleteAlias(e){await stoUI.confirm(`Are you sure you want to delete the alias "${e}"?`,"Delete Alias","danger")&&this.deleteAlias(e)}deleteAlias(e){const t=app.getCurrentProfile();t&&t.aliases&&t.aliases[e]&&(delete t.aliases[e],app.saveProfile(),app.setModified(!0),this.renderAliasList(),this.updateCommandLibrary(),stoUI.showToast(X.t("alias_deleted",{alias:e}),"success"))}useAlias(e){if(!Q.selectedKey)return void stoUI.showToast(X.t("please_select_a_key_first"),"warning");const t={command:e,type:"alias",icon:"üé≠",text:`Alias: ${e}`,id:app.generateCommandId()};app.addCommand(Q.selectedKey,t),modalManager.hide("aliasManagerModal"),stoUI.showToast(X.t("alias_added_to_key",{alias:e,key:Q.selectedKey}),"success")}saveAlias(){const e=document.getElementById("aliasName"),t=document.getElementById("aliasDescription"),a=document.getElementById("aliasCommands");if(!e||!a)return;const n=e.value.trim(),i=t?.value.trim()||"",o=a.value.trim(),r=this.validateAlias(n,o);if(!r.valid)return void stoUI.showToast(r.error,"error");const s=app.getCurrentProfile();if(!s)return void stoUI.showToast(X.t("no_active_profile"),"error");if(s.aliases||(s.aliases={}),!this.currentAlias&&s.aliases[n])return stoUI.showToast(X.t("alias_exists"),"error"),void e.focus();s.aliases[n]={name:n,description:i,commands:o,created:this.currentAlias?s.aliases[n]?.created:(new Date).toISOString(),lastModified:(new Date).toISOString()},app.saveProfile(),app.setModified(!0),this.updateCommandLibrary();const c=this.currentAlias?"updated":"created";stoUI.showToast(X.t(`alias_${c}`,{alias:n}),"success"),modalManager.hide("editAliasModal"),this.showAliasManager()}validateAlias(e,t){if(!e)return{valid:!1,error:"Alias name is required"};if(!STO_DATA.validation.aliasNamePattern.test(e))return{valid:!1,error:"Invalid alias name. Use only letters, numbers, and underscores. Must start with a letter."};if(e.length>30)return{valid:!1,error:"Alias name is too long (max 30 characters)"};if(["alias","bind","unbind","bind_load_file","bind_save_file"].includes(e.toLowerCase()))return{valid:!1,error:"This is a reserved command name"};if(!t)return{valid:!1,error:"Commands are required"};if(t.length>500)return{valid:!1,error:"Command sequence is too long (max 500 characters)"};if("undefined"!=typeof app&&app.getCurrentProfile){const a=app.getCurrentProfile();if(a&&a.aliases&&Object.keys(a.aliases).some(a=>t.includes(a)&&a!==e))return{valid:!1,error:"Potential circular reference detected"}}return{valid:!0}}updateAliasPreview(){const e=document.getElementById("aliasPreview"),t=document.getElementById("aliasName"),a=document.getElementById("aliasCommands");if(!e||!t||!a)return;const n=t.value.trim()||"AliasName",i=a.value.trim()||"command sequence";e.textContent=`alias ${n} <& ${i} &>`}updateCommandLibrary(){const e=app.getCurrentProfile();if(!e||!e.aliases)return;const t=document.getElementById("commandCategories");if(!t)return;const a=t.querySelector('[data-category="aliases"]');a&&a.remove();const n=t.querySelector('[data-category="vertigo-aliases"]');n&&n.remove();const i=Object.entries(e.aliases),o=i.filter(([e,t])=>!e.startsWith("dynFxSetFXExlusionList_")),r=i.filter(([e,t])=>e.startsWith("dynFxSetFXExlusionList_"));if(o.length>0){const e=this.createAliasCategoryElement(o,"aliases","Command Aliases","fas fa-mask");t.appendChild(e)}if(r.length>0){const e=this.createAliasCategoryElement(r,"vertigo-aliases","VFX Aliases","fas fa-eye-slash");t.appendChild(e)}}createAliasCategoryElement(e,t="aliases",a="Command Aliases",n="fas fa-mask"){const i=document.createElement("div");i.className="category",i.dataset.category=t;const o=`commandCategory_${t}_collapsed`,r="true"===localStorage.getItem(o),s="vertigo-aliases"===t,c=s?"üëÅÔ∏è":"üé≠",l=s?"command-item vertigo-alias-item":"command-item alias-item";return i.innerHTML=`\n            <h4 class="${r?"collapsed":""}" data-category="${t}">\n                <i class="fas fa-chevron-right category-chevron"></i>\n                <i class="${n}"></i> \n                ${a}\n                <span class="command-count">(${e.length})</span>\n            </h4>\n            <div class="category-commands ${r?"collapsed":""}">\n                ${e.map(([e,t])=>`\n                    <div class="${l}" data-alias="${e}" title="${t.description||t.commands}">\n                        ${c} ${e}\n                    </div>\n                `).join("")}\n            </div>\n        `,i.querySelector("h4").addEventListener("click",()=>{this.toggleAliasCategory(t,i)}),i.addEventListener("click",e=>{if(e.target.classList.contains("alias-item")||e.target.classList.contains("vertigo-alias-item")){const t=e.target.dataset.alias;this.addAliasToKey(t)}}),i}toggleAliasCategory(e,t){const a=t.querySelector("h4"),n=t.querySelector(".category-commands"),i=a.querySelector(".category-chevron"),o=`commandCategory_${e}_collapsed`;n.classList.contains("collapsed")?(n.classList.remove("collapsed"),a.classList.remove("collapsed"),i.style.transform="rotate(90deg)",localStorage.setItem(o,"false")):(n.classList.add("collapsed"),a.classList.add("collapsed"),i.style.transform="rotate(0deg)",localStorage.setItem(o,"true"))}addAliasToKey(e){if(!Q.selectedKey)return void stoUI.showToast(X.t("please_select_a_key_first"),"warning");const t=app.getCurrentProfile().aliases[e];if(!t)return void stoUI.showToast(X.t("alias_not_found"),"error");const a={command:e,type:"alias",icon:"üé≠",text:`Alias: ${e}`,description:t.description,id:app.generateCommandId()};app.addCommand(Q.selectedKey,a)}getAliasTemplates(){return{space_combat:{name:"Space Combat",description:"Aliases for space combat scenarios",templates:{AttackRun:{name:"AttackRun",description:"Full attack sequence with targeting",commands:"target_nearest_enemy $$ +STOTrayExecByTray 0 0 $$ +STOTrayExecByTray 0 1"},DefensiveMode:{name:"DefensiveMode",description:"Defensive abilities and shield management",commands:"target_self $$ +power_exec Distribute_Shields $$ +STOTrayExecByTray 2 0 $$ +STOTrayExecByTray 2 1"},HealSelf:{name:"HealSelf",description:"Self-healing sequence",commands:"target_self $$ +STOTrayExecByTray 3 0 $$ +STOTrayExecByTray 3 1"}}},ground_combat:{name:"Ground Combat",description:"Aliases for ground combat scenarios",templates:{GroundAttack:{name:"GroundAttack",description:"Basic ground combat sequence",commands:"target_nearest_enemy $$ +STOTrayExecByTray 0 0 $$ +STOTrayExecByTray 0 1"},GroundHeal:{name:"GroundHeal",description:"Ground healing sequence",commands:"target_self $$ +STOTrayExecByTray 1 0 $$ +STOTrayExecByTray 1 1"}}},communication:{name:"Communication",description:"Aliases for team communication",templates:{TeamReady:{name:"TeamReady",description:"Announce ready status to team",commands:"team Ready!"},NeedHealing:{name:"NeedHealing",description:"Request healing from team",commands:"team Need healing!"},Incoming:{name:"Incoming",description:"Warn team of incoming enemies",commands:"team Incoming enemies!"}}}}}createAliasFromTemplate(e,t){const a=this.getAliasTemplates(),n=a[e]?.templates?.[t];if(!n)return void stoUI.showToast(X.t("template_not_found"),"error");const i=app.getCurrentProfile();i.aliases&&i.aliases[n.name]?stoUI.showToast(X.t("alias_template_exists",{alias:n.name}),"warning"):(i.aliases||(i.aliases={}),i.aliases[n.name]={...n,created:(new Date).toISOString(),lastModified:(new Date).toISOString()},app.saveProfile(),app.setModified(!0),this.updateCommandLibrary(),this.renderAliasList(),stoUI.showToast(X.t("alias_created_from_template",{alias:n.name}),"success"))}getAliasUsage(e){const t=app.getCurrentProfile();if(!t)return[];const a=[];return Object.entries(t.keys).forEach(([t,n])=>{n.forEach((n,i)=>{(n.command===e||n.command.includes(e))&&a.push({type:"keybind",key:t,position:i+1,context:`Key "${t}", command ${i+1}`})})}),Object.entries(t.aliases||{}).forEach(([t,n])=>{t!==e&&n.commands.includes(e)&&a.push({type:"alias",alias:t,context:`Alias "${t}"`})}),a}insertTargetVariable(e){const t=e.selectionStart,a=e.value,n=a.slice(0,t)+"$Target"+a.slice(t);e.value=n,e.setSelectionRange(t+7,t+7),e.focus(),e.dispatchEvent(new Event("input",{bubbles:!0}))}},ue=new class{constructor(){this.exportFormats=null}init(){this.exportFormats={sto_keybind:X.t("sto_keybind_file_txt"),json_profile:X.t("json_profile_json"),json_project:X.t("complete_project_json"),csv_data:X.t("csv_data_csv"),html_report:X.t("html_report_html"),alias_file:X.t("alias_file_txt")},this.setupEventListeners()}setupEventListeners(){n.onDom("exportKeybindsBtn","click","exportKeybinds",()=>{this.showExportOptions()}),n.onDom("confirmExportBtn","click","export-confirm",()=>{this.performExport()}),n.onDom("copyPreviewBtn","click","copyPreview",()=>{this.copyCommandPreview()})}async showExportOptions(){app.getCurrentProfile()?stoUI.showModal("exportModal"):stoUI.showToast(X.t("no_profile_selected_to_export"),"warning")}performExport(){const e=app.getCurrentProfile();if(!e)return void stoUI.showToast(X.t("no_profile_selected_to_export"),"warning");const t=document.getElementById("exportFormat"),a=t?t.value:"sto_keybind",n=document.getElementById("exportEnvironment"),i=n&&n.value?n.value:e.currentEnvironment||"space";switch(a){case"sto_keybind":this.exportSTOKeybindFile(e,i);break;case"json_profile":this.exportJSONProfile(e,i);break;case"json_project":this.exportCompleteProject();break;case"csv_data":this.exportCSVData(e,i);break;case"html_report":this.exportHTMLReport(e,i);break;case"alias_file":this.exportAliases(e)}stoUI.hideModal("exportModal")}exportSTOKeybindFile(e,t=e.currentEnvironment||"space"){try{const a=this.generateSTOKeybindFile(e,{environment:t});this.downloadFile(a,this.generateFileName(e,"txt",t),"text/plain"),stoUI.showToast(X.t("keybind_file_exported"),"success")}catch(e){stoUI.showToast(X.t("failed_to_export_keybind_file",{error:e.message}),"error")}}generateSTOKeybindFile(e,t={}){let a="";return a+=this.generateFileHeader(e,t.syncFilename),a+=this.generateKeybindSection(e.keys,{...t,profile:e,environment:t.environment||e.currentEnvironment||"space"}),a+=this.generateFileFooter(),a}generateFileHeader(e,t=null){const a=(new Date).toLocaleString();let n;"undefined"!=typeof stoKeybinds&&stoKeybinds.getProfileStats?n=stoKeybinds.getProfileStats(e):(n={totalKeys:Object.keys(e.keys||{}).length,totalCommands:0},Object.values(e.keys||{}).forEach(e=>{n.totalCommands+=e.length}));const i=t||this.generateFileName(e,"txt");return`; ================================================================\n; ${e.name} - STO Keybind Configuration\n; ================================================================\n; Mode: ${(e.currentEnvironment||"space").toUpperCase()}\n; Generated: ${a}\n; Created by: STO Tools Keybind Manager v${STO_DATA.settings.version}\n;\n; Keybind Statistics:\n; - Keys bound: ${n.totalKeys}\n; - Total commands: ${n.totalCommands}\n;\n; Note: Aliases are exported separately\n; To use this file in Star Trek Online:\n; 1. Save this file to your STO Live folder\n; 2. In game, type: /bind_load_file ${i}\n; ================================================================\n\n`}generateAliasSection(e){if(!e||0===Object.keys(e).length)return"";let t="; Command Aliases\n; ================================================================\n; Aliases allow you to create custom commands that execute\n; multiple commands in sequence. Use them in keybinds like any\n; other command.\n; ================================================================\n\n";return Object.entries(e).sort(([e],[t])=>e.localeCompare(t)).forEach(([e,a])=>{a.description&&(t+=`; ${a.description}\n`),t+=`alias ${e} <& ${a.commands} &>\n\n`}),t}generateKeybindSection(e,t={}){if(!e||0===Object.keys(e).length)return"; No keybinds defined\n\n";let a,n="; Keybind Commands\n; ================================================================\n; Each line binds a key to one or more commands.\n; Multiple commands are separated by $$";t.stabilizeExecutionOrder&&(n+="\n; EXECUTION ORDER STABILIZATION: ON\n; Commands are mirrored to ensure consistent execution order\n; Phase 1: left-to-right, Phase 2: right-to-left"),n+="\n; ================================================================\n\n",a="undefined"!=typeof stoKeybinds&&stoKeybinds.compareKeys?Object.keys(e).sort(stoKeybinds.compareKeys.bind(stoKeybinds)):Object.keys(e).sort(this.compareKeys.bind(this));const i=this.groupKeysByType(a,e);return Object.entries(i).forEach(([a,i])=>{0!==i.length&&(n+=`; ${a}\n`,n+=`; ${"-".repeat(a.length)}\n`,i.forEach(a=>{const i=e[a];if(i&&i.length>0){let e;const o=t.stabilizeExecutionOrder;let r=!1;if(t.profile&&t.profile.keybindMetadata&&t.environment&&t.profile.keybindMetadata[t.environment]){const e=t.profile.keybindMetadata[t.environment];r=!!(e&&e[a]&&e[a].stabilizeExecutionOrder)}e=(o||r)&&i.length>1&&stoKeybinds?stoKeybinds.generateMirroredCommandString(i):i.map(e=>e.command).join(" $$ "),n+=`${a} "${e}"\n`}}),n+="\n")}),n}compareKeys(e,t){const a=e.match(/^F(\d+)$/),n=t.match(/^F(\d+)$/);if(a&&n)return parseInt(a[1])-parseInt(n[1]);if(a&&!n)return-1;if(!a&&n)return 1;const i=/^\d+$/.test(e),o=/^\d+$/.test(t);if(i&&o)return parseInt(e)-parseInt(t);if(i&&!o)return-1;if(!i&&o)return 1;const r=/^[A-Z]$/.test(e),s=/^[A-Z]$/.test(t);if(r&&s)return e.localeCompare(t);if(r&&!s)return-1;if(!r&&s)return 1;const c=["Space","Tab","Enter","Escape"],l=c.indexOf(e),d=c.indexOf(t);return-1!==l&&-1!==d?l-d:-1!==l&&-1===d?-1:-1===l&&-1!==d?1:e.localeCompare(t)}groupKeysByType(e,t){const a={"Function Keys":[],"Number Keys":[],"Letter Keys":[],"Special Keys":[],"Modifier Combinations":[]};return e.forEach(e=>{/^F\d+$/.test(e)?a["Function Keys"].push(e):/^\d+$/.test(e)?a["Number Keys"].push(e):/^[A-Z]$/.test(e)?a["Letter Keys"].push(e):e.includes("+")?a["Modifier Combinations"].push(e):a["Special Keys"].push(e)}),a}generateFileFooter(){return"; ================================================================\n; End of keybind file\n; ================================================================\n; \n; Additional STO Commands Reference:\n; \n; Targeting:\n;   target_nearest_enemy    - Target closest hostile\n;   target_nearest_friend   - Target closest friendly\n;   target_self            - Target your own ship\n; \n; Combat:\n;   FireAll               - Fire all weapons\n;   FirePhasers          - Fire beam weapons only\n;   FireTorps            - Fire torpedo weapons only\n; \n; Shield Management:\n;   +power_exec <ability> - Execute bridge officer ability\n;   Examples: +power_exec Distribute_Shields \n; \n; Tray Execution:\n;   +STOTrayExecByTray <tray> <slot> - Execute ability from tray\n;   Example: +STOTrayExecByTray 0 0  (Tray 1, Slot 1)\n; \n; For more commands and help, visit the STO Wiki or community forums.\n; ================================================================\n"}exportJSONProfile(e,t=e.currentEnvironment||"space"){try{const a={version:STO_DATA.settings.version,exported:(new Date).toISOString(),type:"profile",profile:this.sanitizeProfileForExport(e)},n=JSON.stringify(a,null,2);this.downloadFile(n,this.generateFileName(e,"json",t),"application/json"),stoUI.showToast(X.t("profile_exported_json"),"success")}catch(e){stoUI.showToast(X.t("failed_to_export_profile",{error:e.message}),"error")}}exportCompleteProject(){try{const e=stoStorage.getAllData(),t={version:STO_DATA.settings.version,exported:(new Date).toISOString(),type:"project",data:e},a=JSON.stringify(t,null,2),n=`STO_Tools_Keybinds_Project_${(new Date).toISOString().split("T")[0]}.json`;this.downloadFile(a,n,"application/json"),stoUI.showToast(X.t("complete_project_exported"),"success")}catch(e){stoUI.showToast(X.t("failed_to_export_project",{error:e.message}),"error")}}exportCSVData(e,t=e.currentEnvironment||"space"){try{const a=this.generateCSVData(e);this.downloadFile(a,this.generateFileName(e,"csv",t),"text/csv"),stoUI.showToast(X.t("data_exported_csv"),"success")}catch(e){stoUI.showToast(X.t("failed_to_export_csv",{error:e.message}),"error")}}generateCSVData(e){let t=X.t("csv_header")+"\n";return Object.entries(e.keys).forEach(([e,a])=>{a.forEach((a,n)=>{const i=[this.escapeCSV(e),this.escapeCSV(a.command),this.escapeCSV(a.type),this.escapeCSV(a.text||""),n+1].join(",");t+=i+"\n"})}),t}escapeCSV(e){return"string"!=typeof e&&(e=String(e)),e.includes(",")||e.includes('"')||e.includes("\n")?'"'+e.replace(/"/g,'""')+'"':e}exportHTMLReport(e,t=e.currentEnvironment||"space"){try{const a=this.generateHTMLReport(e);this.downloadFile(a,this.generateFileName(e,"html",t),"text/html"),stoUI.showToast(X.t("html_report_exported"),"success")}catch(e){stoUI.showToast(X.t("failed_to_export_html_report",{error:e.message}),"error")}}generateHTMLReport(e){const t=stoKeybinds.getProfileStats(e),a=(new Date).toLocaleString();return`<!DOCTYPE html>\n<html lang="${X.language}">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>${e.name} - ${X.t("sto_keybind_report")}</title>\n    <style>\n        body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }\n        .header { border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 30px; }\n        .stats { background: #f5f5f5; padding: 20px; border-radius: 5px; margin-bottom: 30px; }\n        .keybind-group { margin-bottom: 30px; }\n        .keybind-group h3 { color: #333; border-bottom: 1px solid #ccc; padding-bottom: 5px; }\n        .keybind { margin-bottom: 15px; padding: 10px; background: #fafafa; border-left: 4px solid #007acc; }\n        .key { font-weight: bold; color: #007acc; }\n        .commands { margin-top: 5px; }\n        .command { display: inline-block; margin: 2px 5px 2px 0; padding: 2px 8px; background: #e0e0e0; border-radius: 3px; font-size: 0.9em; }\n        .command.targeting { background: #d4edda; }\n        .command.combat { background: #f8d7da; }\n        .command.tray { background: #cce5ff; }\n        .command.power { background: #fff3cd; }\n        .command.alias { background: #e2e3e5; }\n        .aliases { margin-top: 30px; }\n        .alias { margin-bottom: 15px; padding: 10px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 5px; }\n        .alias-name { font-weight: bold; color: #495057; }\n        .alias-commands { font-family: monospace; background: #e9ecef; padding: 5px; margin-top: 5px; border-radius: 3px; }\n    </style>\n</head>\n<body>\n    <div class="header">\n        <h1>${e.name}</h1>\n        <p><strong>${X.t("mode")}</strong> ${(e.currentEnvironment||"space").toUpperCase()}</p>\n        <p><strong>${X.t("generated")}</strong> ${a}</p>\n        <p><strong>${X.t("created_by")}</strong> STO Tools Keybind Manager v${STO_DATA.settings.version}</p>\n    </div>\n\n    <div class="stats">\n        <h2>${X.t("statistics")}</h2>\n        <ul>\n            <li><strong>${X.t("keys_bound")}</strong> ${t.totalKeys}</li>\n            <li><strong>${X.t("total_commands")}</strong> ${t.totalCommands}</li>\n            <li><strong>${X.t("aliases_defined")}</strong> ${t.totalAliases}</li>\n        </ul>\n    </div>\n\n    ${this.generateHTMLKeybindSection(e.keys)}\n    ${this.generateHTMLAliasSection(e.aliases)}\n\n    <div style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #ccc; color: #666; font-size: 0.9em;">\n        <p>${X.t("report_footer")}</p>\n    </div>\n</body>\n</html>`}generateHTMLKeybindSection(e){if(!e||0===Object.keys(e).length)return`<div class="keybind-group"><h2>${X.t("keybinds")}</h2><p>${X.t("no_keybinds_defined")}</p></div>`;const t=Object.keys(e).sort(stoKeybinds.compareKeys.bind(stoKeybinds)),a=this.groupKeysByType(t,e);let n=`<div class="keybind-group"><h2>${X.t("keybinds")}</h2>`;return Object.entries(a).forEach(([t,a])=>{0!==a.length&&(n+=`<h3>${t}</h3>`,a.forEach(t=>{const a=e[t];a&&a.length>0&&(n+=`<div class="keybind">\n                        <div class="key">${t}</div>\n                        <div class="commands">\n                            ${a.map(e=>`<span class="command ${e.type}">${e.text||e.command}</span>`).join("")}\n                        </div>\n                    </div>`)}))}),n+="</div>",n}generateHTMLAliasSection(e){if(!e||0===Object.keys(e).length)return"";let t=`<div class="aliases"><h2>${X.t("command_aliases")}</h2>`;return Object.entries(e).sort(([e],[t])=>e.localeCompare(t)).forEach(([e,a])=>{t+=`<div class="alias">\n                <div class="alias-name">${e}</div>\n                ${a.description?`<div>${a.description}</div>`:""}\n                <div class="alias-commands">${a.commands}</div>\n            </div>`}),t+="</div>",t}copyCommandPreview(){const e=document.getElementById("commandPreview");e&&e.textContent.trim()?stoUI.copyToClipboard(e.textContent):stoUI.showToast(X.t("no_command_to_copy"),"warning")}generateFileName(e,t,a=e.currentEnvironment||"space"){const n=a||e.currentEnvironment||"space";return`${e.name.replace(/[^a-zA-Z0-9\-_]/g,"_")}_${n}_${(new Date).toISOString().split("T")[0]}.${t}`}downloadFile(e,t,a){const n=new Blob([e],{type:a}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}sanitizeProfileForExport(e){const t=JSON.parse(JSON.stringify(e));return t.keys&&Object.values(t.keys).forEach(e=>{e.forEach(e=>{delete e.id})}),t}exportAllProfiles(){const e=stoStorage.getAllData().profiles;e&&0!==Object.keys(e).length?(Object.entries(e).forEach(([e,t])=>{setTimeout(()=>{this.exportSTOKeybindFile(t)},100)}),stoUI.showToast(X.t("exporting_profiles",{count:Object.keys(e).length}),"info")):stoUI.showToast(X.t("no_profiles_to_export"),"warning")}async importFromFile(e){return new Promise((t,a)=>{const n=new FileReader;n.onload=n=>{try{const i=n.target.result;switch(e.name.split(".").pop().toLowerCase()){case"txt":t(stoKeybinds.importKeybindFile(i));break;case"json":t(this.importJSONFile(i));break;default:a(new Error("Unsupported file format"))}}catch(e){a(e)}},n.onerror=()=>a(new Error("Failed to read file")),n.readAsText(e)})}importJSONFile(e){try{const t=JSON.parse(e);if("profile"===t.type&&t.profile)return stoProfiles.importProfile(e);if("project"===t.type&&t.data)return stoStorage.importData(JSON.stringify(t.data));throw new Error("Unknown JSON file format")}catch(e){throw new Error("Invalid JSON file: "+e.message)}}exportAliases(e){try{const t=this.generateAliasFile(e);this.downloadFile(t,this.generateAliasFileName(e,"txt"),"text/plain"),stoUI.showToast(X.t("aliases_exported_successfully"),"success")}catch(e){stoUI.showToast(X.t("failed_to_export_aliases",{error:e.message}),"error")}}generateAliasFile(e){let t="";const a=(new Date).toLocaleString(),n=Object.keys(e.aliases||{}).length;return t+=`; ================================================================\n; ${e.name} - STO Alias Configuration\n; ================================================================\n; Mode: ${(e.currentEnvironment||"space").toUpperCase()}\n; Generated: ${a}\n; Created by: STO Tools Keybind Manager v${STO_DATA.settings.version}\n;\n; Alias Statistics:\n; - Total aliases: ${n}\n;\n; To use these aliases in Star Trek Online:\n; 1. Save this file as "CommandAliases.txt" (exactly, without quotes)\n; 2. Place it in your STO directory:\n;    [STO Install]\\Star Trek Online\\Live\\localdata\\CommandAliases.txt\n; 3. The aliases will be available when you start the game\n;\n; Alternative: You can append these aliases to an existing CommandAliases.txt\n; file if you already have one with other aliases.\n;\n; Common STO installation paths:\n; - Steam: C:\\Program Files (x86)\\Steam\\steamapps\\common\\Star Trek Online\n; - Epic: C:\\Program Files\\Epic Games\\Star Trek Online  \n; - Arc: C:\\Program Files (x86)\\Perfect World Entertainment\\Arc Games\\Star Trek Online\n; ================================================================\n\n`,e.aliases&&Object.keys(e.aliases).length>0?t+=this.generateAliasSection(e.aliases):t+="; No aliases defined\n\n",t}generateAliasFileName(e,t){return`${e.name.replace(/[^a-zA-Z0-9\-_]/g,"_")}_aliases_${(new Date).toISOString().split("T")[0]}.${t}`}async syncToFolder(e){const t=stoStorage.getAllData(),a={version:STO_DATA.settings.version,exported:(new Date).toISOString(),type:"project",data:t};await ne(e,"project.json",JSON.stringify(a,null,2));const n=t.profiles||{};for(const t of Object.values(n)){const a=t.name.replace(/[^a-zA-Z0-9\-_]/g,"_");if(t.builds?.space){const n={name:t.name,currentEnvironment:"space",keys:t.builds.space.keys||{},keybindMetadata:t.keybindMetadata||{}},i=`${a}_space.txt`,o=this.generateSTOKeybindFile(n,{environment:"space",syncFilename:i,profile:n});await ne(e,`${a}/${i}`,o)}if(t.builds?.ground){const n={name:t.name,currentEnvironment:"ground",keys:t.builds.ground.keys||{},keybindMetadata:t.keybindMetadata||{}},i=`${a}_ground.txt`,o=this.generateSTOKeybindFile(n,{environment:"ground",syncFilename:i,profile:n});await ne(e,`${a}/${i}`,o)}const n=t.aliases||{},i={name:t.name,currentEnvironment:t.currentEnvironment||"space",aliases:n},o=this.generateAliasFile(i);await ne(e,`${a}/${a}_aliases.txt`,o)}}},pe=new class{constructor(){this.overlayId="modalOverlay"}getOverlay(){return document.getElementById(this.overlayId)}show(e){const t="string"==typeof e?document.getElementById(e):e,a=this.getOverlay();if(a&&t){a.classList.add("active"),t.classList.add("active"),document.body.classList.add("modal-open");const e=t.querySelector("input, textarea, select");return e&&setTimeout(()=>e.focus(),100),!0}return!1}hide(e){const t="string"==typeof e?document.getElementById(e):e,a=this.getOverlay();return!(!a||!t||(t.classList.remove("active"),document.querySelector(".modal.active")||(a.classList.remove("active"),document.body.classList.remove("modal-open")),0))}},_e=new class{constructor(){this.toastQueue=[],this.dragState={isDragging:!1,dragElement:null,dragData:null},this.init()}init(){this.setupGlobalEventListeners(),this.setupTooltips()}showToast(e,t="info",a=3e3){const n=this.createToast(e,t,a),i=document.getElementById("toastContainer");i&&(i.appendChild(n),requestAnimationFrame(()=>{n.classList.add("show")}),setTimeout(()=>{this.removeToast(n)},a))}createToast(e,t,a){const n=document.createElement("div");n.className=`toast toast-${t}`;const i={success:"fa-check-circle",error:"fa-exclamation-circle",warning:"fa-exclamation-triangle",info:"fa-info-circle"};return n.innerHTML=`\n            <div class="toast-content">\n                <i class="fas ${i[t]||i.info}"></i>\n                <span class="toast-message">${e}</span>\n                <button class="toast-close">\n                    <i class="fas fa-times"></i>\n                </button>\n            </div>\n        `,n.querySelector(".toast-close").addEventListener("click",()=>{this.removeToast(n)}),n}hideToast(e){e&&e.parentNode&&this.removeToast(e)}removeToast(e){e.classList.add("removing"),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300)}showModal(e,t=null){return document.getElementById(e),!!modalManager.show(e)&&(t&&this.populateModalData(e,t),!0)}hideModal(e){return document.getElementById(e),!!modalManager.hide(e)&&(this.clearModalData(e),!0)}hideAllModals(){document.querySelectorAll(".modal.active").forEach(e=>{modalManager.hide(e.id)})}populateModalData(e,t){const a=document.getElementById(e);a&&Object.entries(t).forEach(([e,t])=>{const n=a.querySelector(`[data-field="${e}"], #${e}`);n&&("checkbox"===n.type?n.checked=t:n.value=t)})}clearModalData(e){const t=document.getElementById(e);t&&t.querySelectorAll("input, textarea, select").forEach(e=>{"checkbox"===e.type?e.checked=!1:e.value=""})}showLoading(e,t="Loading..."){if("string"==typeof e&&(e=document.getElementById(e)),e){e.classList.add("loading");const a=e.innerHTML;e.dataset.originalContent=a,e.innerHTML=`\n                <div class="loading-spinner">\n                    <i class="fas fa-spinner fa-spin"></i>\n                    <span>${t}</span>\n                </div>\n            `,e.disabled=!0}}hideLoading(e){"string"==typeof e&&(e=document.getElementById(e)),e&&e.classList.contains("loading")&&(e.classList.remove("loading"),e.innerHTML=e.dataset.originalContent||"",e.disabled=!1,delete e.dataset.originalContent)}async confirm(e,t="Confirm",a="warning"){return new Promise(n=>{const i=this.createConfirmModal(e,t,a),o="confirmModal";i.id=o,document.body.appendChild(i);const r=e=>{modalManager.hide(o),document.body.removeChild(i),n(e)};i.querySelector(".confirm-yes").addEventListener("click",()=>{r(!0)}),i.querySelector(".confirm-no").addEventListener("click",()=>{r(!1)}),requestAnimationFrame(()=>{modalManager.show(o)})})}createConfirmModal(e,t,a){const n=document.createElement("div");n.className="modal confirm-modal";const i={warning:"fa-exclamation-triangle",danger:"fa-exclamation-circle",info:"fa-info-circle"};return n.innerHTML=`\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h3>\n                        <i class="fas ${i[a]||i.warning}"></i>\n                        ${t}\n                    </h3>\n                </div>\n                <div class="modal-body">\n                    <p>${e}</p>\n                </div>\n                <div class="modal-footer">\n                    <button class="btn btn-primary confirm-yes">Yes</button>\n                    <button class="btn btn-secondary confirm-no">No</button>\n                </div>\n            </div>\n        `,n}initDragAndDrop(e,t={}){const{dragSelector:a=".draggable",dropZoneSelector:n=".drop-zone",onDragStart:i=null,onDragEnd:o=null,onDrop:r=null}=t;e.addEventListener("dragstart",e=>{e.target.matches(a)&&(this.dragState.isDragging=!0,this.dragState.dragElement=e.target,this.dragState.dragData=e.target.dataset,e.target.classList.add("dragging"),e.dataTransfer.effectAllowed="move",i&&i(e,this.dragState))}),e.addEventListener("dragend",e=>{e.target.matches(a)&&(e.target.classList.remove("dragging"),this.dragState.isDragging=!1,this.dragState.dragElement=null,this.dragState.dragData=null,o&&o(e))}),e.addEventListener("dragover",e=>{e.preventDefault();const t=e.target.closest(n);t&&t.classList.add("drag-over")}),e.addEventListener("dragleave",e=>{const t=e.target.closest(n);t&&t.classList.remove("drag-over")}),e.addEventListener("drop",e=>{e.preventDefault();const t=e.target.closest(n);t&&(t.classList.remove("drag-over"),r&&r(e,this.dragState,t))})}validateForm(e){const t=[];return e.querySelectorAll("input[required], textarea[required], select[required]").forEach(e=>{const a=e.value.trim(),n=e.dataset.fieldName||e.name||e.id;a?(e.classList.remove("error"),"email"!==e.type||this.isValidEmail(a)||(t.push(`${n} must be a valid email`),e.classList.add("error"))):(t.push(`${n} is required`),e.classList.add("error"))}),{isValid:0===t.length,errors:t}}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}async copyToClipboard(e){try{return await navigator.clipboard.writeText(e),this.showToast("Copied to clipboard","success"),!0}catch(t){const a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select();try{return document.execCommand("copy"),this.showToast("Copied to clipboard","success"),!0}catch(e){return this.showToast("Failed to copy to clipboard","error"),!1}finally{document.body.removeChild(a)}}}fadeIn(e,t=300){e.style.opacity="0",e.style.display="block";let a=null;const n=i=>{a||(a=i);const o=i-a,r=Math.min(o/t,1);e.style.opacity=r,o<t&&requestAnimationFrame(n)};requestAnimationFrame(n)}fadeOut(e,t=300){let a=null;const n=i=>{a||(a=i);const o=i-a,r=Math.max(1-o/t,0);e.style.opacity=r,o<t?requestAnimationFrame(n):e.style.display="none"};requestAnimationFrame(n)}debounce(e,t){let a;return function(...n){clearTimeout(a),a=setTimeout(()=>{clearTimeout(a),e(...n)},t)}}throttle(e,t){let a;return function(){const n=arguments;a||(e.apply(this,n),a=!0,setTimeout(()=>a=!1,t))}}setupGlobalEventListeners(){document.addEventListener("keydown",e=>{"Escape"===e.key&&this.hideAllModals()}),document.addEventListener("click",e=>{e.target.classList.contains("modal-overlay")&&this.hideAllModals()})}setupTooltips(){document.addEventListener("mouseenter",e=>{e.target&&"function"==typeof e.target.hasAttribute&&e.target.hasAttribute("title")&&e.target.getAttribute("title").trim()&&this.showTooltip(e.target,e.target.getAttribute("title"))},!0),document.addEventListener("mouseleave",e=>{e.target&&"function"==typeof e.target.hasAttribute&&e.target.hasAttribute("title")&&this.hideTooltip()},!0)}showTooltip(e,t){this.hideTooltip();const a=document.createElement("div");a.className="tooltip",a.textContent=t,a.id="active-tooltip",document.body.appendChild(a);const n=e.getBoundingClientRect(),i=a.getBoundingClientRect();let o=n.left+n.width/2-i.width/2,r=n.top-i.height-8;o<8&&(o=8),o+i.width>window.innerWidth-8&&(o=window.innerWidth-i.width-8),r<8&&(r=n.bottom+8,a.classList.add("tooltip-bottom")),a.style.left=o+"px",a.style.top=r+"px",requestAnimationFrame(()=>{a.classList.add("show")})}hideTooltip(){const e=document.getElementById("active-tooltip");e&&e.remove()}},fe=new class{constructor(){this.currentCommand=null,this.commandBuilders=new Map,this.init()}init(){this.setupCommandBuilders(),this.setupEventListeners()}setupCommandBuilders(){this.commandBuilders.set("targeting",{build:(e,t={})=>{const a=STO_DATA.commands.targeting.commands[e];return a?{command:a.command,type:"targeting",icon:a.icon,text:a.name,description:a.description}:null},getUI:()=>this.createTargetingUI()}),this.commandBuilders.set("combat",{build:(e,t={})=>{const a=STO_DATA.commands.combat.commands[e];return a?{command:a.command,type:"combat",icon:a.icon,text:a.name,description:a.description}:null},getUI:()=>this.createCombatUI()}),this.commandBuilders.set("tray",{build:(e,t={})=>{const a=t.tray||0,n=t.slot||0;if("tray_with_backup"===e){const e=t.backup_tray||0,i=t.backup_slot||0,o=t.active||"on";return{command:`TrayExecByTrayWithBackup ${a} ${n} ${e} ${i} ${"on"===o?1:0}`,type:"tray",icon:"‚ö°",text:`Execute Tray ${a+1} Slot ${n+1} (with backup)`,description:`Execute ability in tray ${a+1}, slot ${n+1} with backup in tray ${e+1}, slot ${i+1}`,parameters:{tray:a,slot:n,backup_tray:e,backup_slot:i,active:o}}}if("tray_range"===e){const e=t.start_tray||0,a=t.start_slot||0,n=t.end_tray||0,i=t.end_slot||0,o=t.command_type||"STOTrayExecByTray";return this.generateTrayRangeCommands(e,a,n,i,o).map((t,r)=>({command:t,type:"tray",icon:"‚ö°",text:0===r?`Execute Range: Tray ${e+1} Slot ${a+1} to Tray ${n+1} Slot ${i+1}`:t,description:0===r?`Execute abilities from tray ${e+1} slot ${a+1} to tray ${n+1} slot ${i+1}`:t,parameters:0===r?{start_tray:e,start_slot:a,end_tray:n,end_slot:i,command_type:o}:void 0}))}if("tray_range_with_backup"===e){const e=t.active||1,a=t.start_tray||0,n=t.start_slot||0,i=t.end_tray||0,o=t.end_slot||0,r=t.backup_start_tray||0,s=t.backup_start_slot||0,c=t.backup_end_tray||0,l=t.backup_end_slot||0;return this.generateTrayRangeWithBackupCommands(e,a,n,i,o,r,s,c,l).map((t,d)=>({command:t,type:"tray",icon:"‚ö°",text:0===d?`Execute Range with Backup: Tray ${a+1}-${i+1}`:t,description:0===d?`Execute abilities from tray ${a+1} to ${i+1} with backup range`:t,parameters:0===d?{active:e,start_tray:a,start_slot:n,end_tray:i,end_slot:o,backup_start_tray:r,backup_start_slot:s,backup_end_tray:c,backup_end_slot:l}:void 0}))}if("whole_tray"===e){const e=t.command_type||"STOTrayExecByTray";return this.generateWholeTrayCommands(a,e).map((t,n)=>({command:t,type:"tray",icon:"‚ö°",text:0===n?`Execute Whole Tray ${a+1}`:t,description:0===n?`Execute all abilities in tray ${a+1}`:t,parameters:0===n?{tray:a,command_type:e}:void 0}))}if("whole_tray_with_backup"===e){const e=t.active||1,n=t.backup_tray||0;return this.generateWholeTrayWithBackupCommands(e,a,n).map((t,i)=>({command:t,type:"tray",icon:"‚ö°",text:0===i?`Execute Whole Tray ${a+1} (with backup Tray ${n+1})`:t,description:0===i?`Execute all abilities in tray ${a+1} with backup from tray ${n+1}`:t,parameters:0===i?{active:e,tray:a,backup_tray:n}:void 0}))}const i=t.command_type||"STOTrayExecByTray";return{command:`+${i} ${a} ${n}`,type:"tray",icon:"‚ö°",text:`Execute Tray ${a+1} Slot ${n+1}`,description:`Execute ability in tray ${a+1}, slot ${n+1}`,parameters:{tray:a,slot:n,command_type:i}}},getUI:()=>this.createTrayUI()}),this.commandBuilders.set("power",{build:(e,t={})=>{const a=STO_DATA.commands.power.commands[e];return a?{command:a.command,type:"power",icon:a.icon,text:a.name,description:a.description}:null},getUI:()=>this.createPowerUI()}),this.commandBuilders.set("movement",{build:(e,t={})=>{const a=STO_DATA.commands.movement.commands[e];if(!a)return null;let n=a.command;return a.customizable&&t&&("throttle_adjust"===e&&void 0!==t.amount?n=`${a.command} ${t.amount}`:"throttle_set"===e&&void 0!==t.position&&(n=`${a.command} ${t.position}`)),{command:n,type:"movement",icon:a.icon,text:a.name,description:a.description}},getUI:()=>this.createMovementUI()}),this.commandBuilders.set("camera",{build:(e,t={})=>{const a=STO_DATA.commands.camera.commands[e];if(!a)return null;let n=a.command;return a.customizable&&t&&"cam_distance"===e&&void 0!==t.distance&&(n=`${a.command} ${t.distance}`),{command:n,type:"camera",icon:a.icon,text:a.name,description:a.description}},getUI:()=>this.createCameraUI()}),this.commandBuilders.set("communication",{build:(e,t={})=>{const a=STO_DATA.commands.communication.commands[e];if(!a)return null;const n=t.message||"Message text here";return{command:`${a.command} ${n}`,type:"communication",icon:a.icon,text:`${a.name}: ${n}`,description:a.description,parameters:{message:n}}},getUI:()=>this.createCommunicationUI()}),this.commandBuilders.set("system",{build:(e,t={})=>{const a=STO_DATA.commands.system.commands[e];if(!a)return null;let n=a.command;return a.customizable&&t&&("bind_save_file"!==e&&"bind_load_file"!==e||!t.filename?"combat_log"===e&&void 0!==t.state&&(n=`${a.command} ${t.state}`):n=`${a.command} ${t.filename}`),{command:n,type:"system",icon:a.icon,text:a.name,description:a.description}},getUI:()=>this.createSystemUI()}),this.commandBuilders.set("alias",{build:(e,t={})=>{const a=t.alias_name||"";return a.trim()?{command:a,type:"alias",icon:"üìù",text:`Alias: ${a}`,description:"Execute custom alias",parameters:{alias_name:a}}:null},getUI:()=>this.createAliasUI()}),this.commandBuilders.set("custom",{build:(e,t={})=>{const a=t.command||"",n=t.text||"Custom Command";return{command:a,type:"custom",icon:"‚öôÔ∏è",text:n,description:"Custom command",parameters:{command:a,text:n}}},getUI:()=>this.createCustomUI()})}createTargetingUI(){const e=STO_DATA.commands.targeting.commands;return`\n            <div class="command-selector">\n                <label for="targetingCommand">Targeting Command:</label>\n                <select id="targetingCommand">\n                    <option value="">Select targeting command...</option>\n                    ${Object.entries(e).map(([e,t])=>`<option value="${e}">${t.name}</option>`).join("")}\n                </select>\n            </div>\n        `}createCombatUI(){const e=STO_DATA.commands.combat.commands;return`\n            <div class="command-selector">\n                <label for="combatCommand">Combat Command:</label>\n                <select id="combatCommand">\n                    <option value="">Select combat command...</option>\n                    ${Object.entries(e).map(([e,t])=>`<option value="${e}">${t.name}</option>`).join("")}\n                </select>\n                <div id="combatCommandWarning" class="command-warning" style="display: none;">\n                    <i class="fas fa-exclamation-triangle"></i>\n                    <span id="combatWarningText"></span>\n                </div>\n            </div>\n        `}createTrayUI(){return`\n            <div class="tray-builder">\n                <div class="form-group">\n                    <label for="trayCommandType">Command Type:</label>\n                    <select id="trayCommandType">\n                        <option value="custom_tray">Single Tray Slot</option>\n                        <option value="tray_with_backup">Single Tray with Backup</option>\n                        <option value="tray_range">Tray Range</option>\n                        <option value="tray_range_with_backup">Tray Range with Backup</option>\n                        <option value="whole_tray">Whole Tray</option>\n                        <option value="whole_tray_with_backup">Whole Tray with Backup</option>\n                    </select>\n                </div>\n                \n                \x3c!-- Single Tray Configuration --\x3e\n                <div id="singleTrayConfig" class="tray-config-section">\n                    <div class="form-row">\n                        <div class="form-group">\n                            <label for="trayNumber">Tray Number:</label>\n                            <select id="trayNumber">\n                                ${Array.from({length:10},(e,t)=>`<option value="${t}">Tray ${t+1}</option>`).join("")}\n                            </select>\n                        </div>\n                        <div class="form-group">\n                            <label for="slotNumber">Slot Number:</label>\n                            <select id="slotNumber">\n                                ${Array.from({length:10},(e,t)=>`<option value="${t}">Slot ${t+1}</option>`).join("")}\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                \n                \x3c!-- Backup Configuration --\x3e\n                <div id="backupConfig" class="tray-config-section" style="display: none;">\n                    <h4>Backup Configuration</h4>\n                    <div class="form-row">\n                        <div class="form-group">\n                            <label for="backupTrayNumber">Backup Tray:</label>\n                            <select id="backupTrayNumber">\n                                ${Array.from({length:10},(e,t)=>`<option value="${t}">Tray ${t+1}</option>`).join("")}\n                            </select>\n                        </div>\n                        <div class="form-group">\n                            <label for="backupSlotNumber">Backup Slot:</label>\n                            <select id="backupSlotNumber">\n                                ${Array.from({length:10},(e,t)=>`<option value="${t}">Slot ${t+1}</option>`).join("")}\n                            </select>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label for="activeState">Active State:</label>\n                        <select id="activeState">\n                            <option value="1">Active (1)</option>\n                            <option value="0">Inactive (0)</option>\n                        </select>\n                    </div>\n                </div>\n                \n                \x3c!-- Range Configuration --\x3e\n                <div id="rangeConfig" class="tray-config-section" style="display: none;">\n                    <h4>Range Configuration</h4>\n                    <div class="form-row">\n                        <div class="form-group">\n                            <label for="startTrayNumber">Start Tray:</label>\n                            <select id="startTrayNumber">\n                                ${Array.from({length:10},(e,t)=>`<option value="${t}">Tray ${t+1}</option>`).join("")}\n                            </select>\n                        </div>\n                        <div class="form-group">\n                            <label for="startSlotNumber">Start Slot:</label>\n                            <select id="startSlotNumber">\n                                ${Array.from({length:10},(e,t)=>`<option value="${t}">Slot ${t+1}</option>`).join("")}\n                            </select>\n                        </div>\n                    </div>\n                    <div class="form-row">\n                        <div class="form-group">\n                            <label for="endTrayNumber">End Tray:</label>\n                            <select id="endTrayNumber">\n                                ${Array.from({length:10},(e,t)=>`<option value="${t}">Tray ${t+1}</option>`).join("")}\n                            </select>\n                        </div>\n                        <div class="form-group">\n                            <label for="endSlotNumber">End Slot:</label>\n                            <select id="endSlotNumber">\n                                ${Array.from({length:10},(e,t)=>`<option value="${t}">Slot ${t+1}</option>`).join("")}\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                \n                \x3c!-- Backup Range Configuration --\x3e\n                <div id="backupRangeConfig" class="tray-config-section" style="display: none;">\n                    <h4>Backup Range Configuration</h4>\n                    <div class="form-row">\n                        <div class="form-group">\n                            <label for="backupStartTrayNumber">Backup Start Tray:</label>\n                            <select id="backupStartTrayNumber">\n                                ${Array.from({length:10},(e,t)=>`<option value="${t}">Tray ${t+1}</option>`).join("")}\n                            </select>\n                        </div>\n                        <div class="form-group">\n                            <label for="backupStartSlotNumber">Backup Start Slot:</label>\n                            <select id="backupStartSlotNumber">\n                                ${Array.from({length:10},(e,t)=>`<option value="${t}">Slot ${t+1}</option>`).join("")}\n                            </select>\n                        </div>\n                    </div>\n                    <div class="form-row">\n                        <div class="form-group">\n                            <label for="backupEndTrayNumber">Backup End Tray:</label>\n                            <select id="backupEndTrayNumber">\n                                ${Array.from({length:10},(e,t)=>`<option value="${t}">Tray ${t+1}</option>`).join("")}\n                            </select>\n                        </div>\n                        <div class="form-group">\n                            <label for="backupEndSlotNumber">Backup End Slot:</label>\n                            <select id="backupEndSlotNumber">\n                                ${Array.from({length:10},(e,t)=>`<option value="${t}">Slot ${t+1}</option>`).join("")}\n                            </select>\n                        </div>\n                    </div>\n                </div>\n                \n                \x3c!-- Command Type Selection --\x3e\n                <div id="commandTypeConfig" class="tray-config-section" style="display: none;">\n                    <div class="form-group">\n                        <label for="trayCommandVariant">Command Variant:</label>\n                        <select id="trayCommandVariant">\n                            <option value="STOTrayExecByTray">STOTrayExecByTray (shows key binding on UI)</option>\n                            <option value="TrayExecByTray">TrayExecByTray (no UI indication)</option>\n                        </select>\n                    </div>\n                </div>\n                \n                <div class="tray-visual" id="trayVisual">\n                    \x3c!-- Visual tray representation will be generated here --\x3e\n                </div>\n            </div>\n        `}createPowerUI(){const e=STO_DATA.commands.power.commands;return`\n            <div class="command-selector">\n                <label for="powerCommand">Shield Command:</label>\n                <select id="powerCommand">\n                    <option value="">Select shield command...</option>\n                    ${Object.entries(e).map(([e,t])=>`<option value="${e}">${t.name}</option>`).join("")}\n                </select>\n                <div id="powerCommandWarning" class="command-warning" style="display: none;">\n                    <i class="fas fa-exclamation-triangle"></i>\n                    <span id="powerWarningText"></span>\n                </div>\n            </div>\n        `}createMovementUI(){const e=STO_DATA.commands.movement.commands;return`\n            <div class="command-selector">\n                <label for="movementCommand">Movement Command:</label>\n                <select id="movementCommand">\n                    <option value="">Select movement command...</option>\n                    ${Object.entries(e).map(([e,t])=>`<option value="${e}">${t.name}</option>`).join("")}\n                </select>\n                <div id="movementParams" style="display: none;">\n                    <div class="form-group">\n                        <label for="movementAmount">Amount (-1 to 1):</label>\n                        <input type="number" id="movementAmount" min="-1" max="1" step="0.05" value="0.25">\n                    </div>\n                    <div class="form-group">\n                        <label for="movementPosition">Position (-1 to 1):</label>\n                        <input type="number" id="movementPosition" min="-1" max="1" step="0.1" value="1">\n                    </div>\n                </div>\n            </div>\n        `}createCommunicationUI(){const e=STO_DATA.commands.communication.commands;return`\n            <div class="communication-builder">\n                <div class="form-group">\n                    <label for="commCommand">Communication Type:</label>\n                    <select id="commCommand">\n                        <option value="">Select communication type...</option>\n                        ${Object.entries(e).map(([e,t])=>`<option value="${e}">${t.name}</option>`).join("")}\n                    </select>\n                </div>\n                <div class="form-group">\n                    <label for="commMessage">Message:</label>\n                    <div class="input-with-button">\n                        <input type="text" id="commMessage" placeholder="Enter your message" maxlength="100">\n                        <button type="button" class="btn btn-small insert-target-btn" title="Insert $Target variable">\n                            <i class="fas fa-crosshairs"></i> $Target\n                        </button>\n                    </div>\n                    <small>Maximum 100 characters</small>\n                </div>\n                <div class="variable-help">\n                    <h4><i class="fas fa-info-circle"></i> STO Variables</h4>\n                    <div class="variable-info">\n                        <strong>$Target</strong> - Replaced with your current target's name<br>\n                        <em>Example:</em> <code>team Attacking [$Target]</code> ‚Üí <code>team Attacking [Borg Cube]</code>\n                    </div>\n                </div>\n            </div>\n        `}createCameraUI(){const e=STO_DATA.commands.camera.commands;return`\n            <div class="command-selector">\n                <label for="cameraCommand">Camera Command:</label>\n                <select id="cameraCommand">\n                    <option value="">Select camera command...</option>\n                    ${Object.entries(e).map(([e,t])=>`<option value="${e}">${t.name}</option>`).join("")}\n                </select>\n                <div id="cameraParams" style="display: none;">\n                    <div class="form-group">\n                        <label for="cameraDistance">Distance:</label>\n                        <input type="number" id="cameraDistance" min="1" max="500" value="50">\n                    </div>\n                </div>\n            </div>\n        `}createSystemUI(){const e=STO_DATA.commands.system.commands;return`\n            <div class="command-selector">\n                <label for="systemCommand">System Command:</label>\n                <select id="systemCommand">\n                    <option value="">Select system command...</option>\n                    ${Object.entries(e).map(([e,t])=>`<option value="${e}">${t.name}</option>`).join("")}\n                </select>\n                <div id="systemParams" style="display: none;">\n                    <div class="form-group">\n                        <label for="systemFilename">Filename:</label>\n                        <input type="text" id="systemFilename" value="my_binds.txt">\n                    </div>\n                    <div class="form-group">\n                        <label for="systemState">State (0/1):</label>\n                        <input type="number" id="systemState" min="0" max="1" value="1">\n                    </div>\n                </div>\n            </div>\n        `}createAliasUI(){const e=app?.getCurrentProfile(),t=e?.aliases||{},a=Object.entries(t);return 0===a.length?'\n                <div class="alias-builder">\n                    <div class="empty-state">\n                        <i class="fas fa-mask"></i>\n                        <h4>No Aliases Available</h4>\n                        <p>Create aliases in the Alias Manager first.</p>\n                        <button type="button" class="btn btn-primary" id="openAliasManager">\n                            <i class="fas fa-plus"></i> Create Alias\n                        </button>\n                    </div>\n                </div>\n            ':`\n            <div class="alias-builder">\n                <div class="form-group">\n                    <label for="aliasSelect">Available Aliases:</label>\n                    <select id="aliasSelect">\n                        <option value="">Select an alias...</option>\n                        ${a.map(([e,t])=>`<option value="${e}">${e}${t.description?" - "+t.description:""}</option>`).join("")}\n                    </select>\n                </div>\n                <div id="aliasPreviewSection" style="display: none;">\n                    <div class="alias-info">\n                        <label>Alias Commands:</label>\n                        <div class="command-preview" id="selectedAliasPreview"></div>\n                    </div>\n                </div>\n            </div>\n        `}createCustomUI(){return'\n            <div class="custom-builder">\n                <div class="form-group">\n                    <label for="customCommand">Command:</label>\n                    <div class="input-with-button">\n                        <input type="text" id="customCommand" placeholder="Enter STO command" autocomplete="off">\n                        <button type="button" class="btn btn-small insert-target-btn" title="Insert $Target variable">\n                            <i class="fas fa-crosshairs"></i> $Target\n                        </button>\n                    </div>\n                    <small>Enter the exact STO command syntax</small>\n                </div>\n                <div class="form-group">\n                    <label for="customText">Display Text:</label>\n                    <input type="text" id="customText" placeholder="Descriptive name for this command" autocomplete="off">\n                </div>\n                <div class="command-help">\n                    <h4>Common Commands:</h4>\n                    <div class="command-examples">\n                        <button type="button" class="example-cmd" data-cmd="target_nearest_enemy">target_nearest_enemy</button>\n                        <button type="button" class="example-cmd" data-cmd="FireAll">FireAll</button>\n                        <button type="button" class="example-cmd" data-cmd="+power_exec Distribute_Shields">+power_exec Distribute_Shields</button>\n                        <button type="button" class="example-cmd" data-cmd="+STOTrayExecByTray 0 0">+STOTrayExecByTray 0 0</button>\n                        <button type="button" class="example-cmd" data-cmd=\'team Attacking [$Target]\'>team Attacking [$Target]</button>\n                    </div>\n                </div>\n                <div class="variable-help">\n                    <h4><i class="fas fa-info-circle"></i> STO Variables</h4>\n                    <div class="variable-info">\n                        <strong>$Target</strong> - Replaced with your current target\'s name<br>\n                        <em>Example:</em> <code>team Focus fire on [$Target]</code>\n                    </div>\n                </div>\n            </div>\n        '}setupEventListeners(){document.addEventListener("change",e=>{"commandType"===e.target.id&&this.handleCommandTypeChange(e.target.value)}),document.addEventListener("change",e=>{"trayNumber"!==e.target.id&&"slotNumber"!==e.target.id||(this.updateTrayVisual(),this.updateCommandPreview())}),document.addEventListener("input",e=>{"commMessage"===e.target.id&&this.updateCommandPreview()}),document.addEventListener("input",e=>{"customCommand"!==e.target.id&&"customText"!==e.target.id||this.updateCommandPreview()}),document.addEventListener("click",e=>{if(e.target.classList.contains("example-cmd")){const t=e.target.dataset.cmd,a=document.getElementById("customCommand");a&&(a.value=t,this.updateCommandPreview())}}),document.addEventListener("click",e=>{if(e.target.classList.contains("insert-target-btn")||e.target.closest(".insert-target-btn")){e.preventDefault();const t=(e.target.classList.contains("insert-target-btn")?e.target:e.target.closest(".insert-target-btn")).closest(".input-with-button"),a=t?t.querySelector("input"):null;a&&this.insertTargetVariable(a)}}),document.addEventListener("change",e=>{["targetingCommand","combatCommand","powerCommand","movementCommand","cameraCommand","systemCommand","commCommand","aliasSelect"].includes(e.target.id)&&this.updateCommandPreview()})}handleCommandTypeChange(e){const t=document.getElementById("commandBuilder"),a=document.getElementById("modalCommandPreview"),n=document.getElementById("saveCommandBtn");if(t)if(e&&this.commandBuilders.has(e)){const a=this.commandBuilders.get(e).getUI();t.innerHTML=a,this.setupTypeSpecificListeners(e),n&&(n.disabled=!1),this.updateCommandPreview()}else t.innerHTML=`<p class="text-muted">${i18next.t("select_a_command_type_to_see_preview")}</p>`,a&&(a.textContent=i18next.t("select_a_command_type_to_see_preview")),n&&(n.disabled=!0)}setupTypeSpecificListeners(e){if("tray"===e){this.updateTrayVisual();const e=document.getElementById("trayCommandType");e&&(e.addEventListener("change",()=>{this.updateTrayConfigSections(e.value),this.updateCommandPreview()}),this.updateTrayConfigSections(e.value)),["trayNumber","slotNumber","backupTrayNumber","backupSlotNumber","activeState","startTrayNumber","startSlotNumber","endTrayNumber","endSlotNumber","backupStartTrayNumber","backupStartSlotNumber","backupEndTrayNumber","backupEndSlotNumber","trayCommandVariant"].forEach(e=>{const t=document.getElementById(e);t&&t.addEventListener("change",()=>{this.updateTrayVisual(),this.updateCommandPreview()})})}else if("power"===e){const e=document.getElementById("powerCommand");e&&e.addEventListener("change",()=>{this.showPowerWarning(e.value)})}else if("combat"===e){const e=document.getElementById("combatCommand");e&&e.addEventListener("change",()=>{this.showCombatWarning(e.value)})}else if("alias"===e){const e=document.getElementById("aliasSelect");e&&e.addEventListener("change",()=>{this.updateAliasPreview(e.value),this.updateCommandPreview()});const t=document.getElementById("openAliasManager");t&&t.addEventListener("click",()=>{"undefined"!=typeof stoAliases&&stoAliases.showAliasManager?stoAliases.showAliasManager():(stoUI.hideModal("addCommandModal"),stoUI.showModal("aliasManagerModal"))})}}updateTrayConfigSections(e){const t={singleTrayConfig:document.getElementById("singleTrayConfig"),backupConfig:document.getElementById("backupConfig"),rangeConfig:document.getElementById("rangeConfig"),backupRangeConfig:document.getElementById("backupRangeConfig"),commandTypeConfig:document.getElementById("commandTypeConfig")};switch(Object.values(t).forEach(e=>{e&&(e.style.display="none")}),e){case"custom_tray":case"whole_tray":t.singleTrayConfig&&(t.singleTrayConfig.style.display="block"),t.commandTypeConfig&&(t.commandTypeConfig.style.display="block");break;case"tray_with_backup":case"whole_tray_with_backup":t.singleTrayConfig&&(t.singleTrayConfig.style.display="block"),t.backupConfig&&(t.backupConfig.style.display="block");break;case"tray_range":t.rangeConfig&&(t.rangeConfig.style.display="block"),t.commandTypeConfig&&(t.commandTypeConfig.style.display="block");break;case"tray_range_with_backup":t.rangeConfig&&(t.rangeConfig.style.display="block"),t.backupRangeConfig&&(t.backupRangeConfig.style.display="block"),t.backupConfig&&(t.backupConfig.style.display="block")}}showPowerWarning(e){const t=document.getElementById("powerCommandWarning"),a=document.getElementById("powerWarningText");if(t&&a){if(e&&STO_DATA.commands.power.commands[e]){const n=STO_DATA.commands.power.commands[e];if(n.warning)return a.textContent=n.warning,void(t.style.display="block")}t.style.display="none"}}showCombatWarning(e){const t=document.getElementById("combatCommandWarning"),a=document.getElementById("combatWarningText");if(t&&a){if(e&&STO_DATA.commands.combat.commands[e]){const n=STO_DATA.commands.combat.commands[e];if(n.warning)return a.textContent=n.warning,void(t.style.display="block")}t.style.display="none"}}updateAliasPreview(e){const t=document.getElementById("aliasPreviewSection"),a=document.getElementById("selectedAliasPreview");if(t&&a)if(e){const n=app?.getCurrentProfile(),i=n?.aliases?.[e];i?(a.textContent=i.commands,t.style.display="block"):t.style.display="none"}else t.style.display="none"}updateCommandPreview(){const e=document.getElementById("modalCommandPreview");if(!e)return void console.log("DEBUG: modalCommandPreview element not found");const t=this.buildCurrentCommand();if(console.log("DEBUG: buildCurrentCommand returned:",t),t){if(Array.isArray(t)){console.log("DEBUG: Command is array with length:",t.length);const a=t.map(e=>e.command);console.log("DEBUG: Command strings:",a),e.textContent=a.join(" $$ ")}else console.log("DEBUG: Command is single object:",t.command),e.textContent=t.command;e.className="command-preview valid"}else console.log("DEBUG: No command returned, showing default message"),e.textContent="Configure command options to see preview",e.className="command-preview"}buildCurrentCommand(){const e=document.getElementById("commandType");if(!e||!e.value)return null;const t=e.value,a=this.commandBuilders.get(t);if(!a)return null;let n=null,i={};switch(t){case"targeting":n=document.getElementById("targetingCommand")?.value;break;case"combat":n=document.getElementById("combatCommand")?.value;break;case"tray":switch(n=document.getElementById("trayCommandType")?.value||"custom_tray",n){case"custom_tray":i={tray:parseInt(document.getElementById("trayNumber")?.value||0),slot:parseInt(document.getElementById("slotNumber")?.value||0),command_type:document.getElementById("trayCommandVariant")?.value||"STOTrayExecByTray"};break;case"tray_with_backup":i={tray:parseInt(document.getElementById("trayNumber")?.value||0),slot:parseInt(document.getElementById("slotNumber")?.value||0),backup_tray:parseInt(document.getElementById("backupTrayNumber")?.value||0),backup_slot:parseInt(document.getElementById("backupSlotNumber")?.value||0),active:parseInt(document.getElementById("activeState")?.value||1)};break;case"tray_range":i={start_tray:parseInt(document.getElementById("startTrayNumber")?.value||0),start_slot:parseInt(document.getElementById("startSlotNumber")?.value||0),end_tray:parseInt(document.getElementById("endTrayNumber")?.value||0),end_slot:parseInt(document.getElementById("endSlotNumber")?.value||0),command_type:document.getElementById("trayCommandVariant")?.value||"STOTrayExecByTray"};break;case"tray_range_with_backup":i={active:parseInt(document.getElementById("activeState")?.value||1),start_tray:parseInt(document.getElementById("startTrayNumber")?.value||0),start_slot:parseInt(document.getElementById("startSlotNumber")?.value||0),end_tray:parseInt(document.getElementById("endTrayNumber")?.value||0),end_slot:parseInt(document.getElementById("endSlotNumber")?.value||0),backup_start_tray:parseInt(document.getElementById("backupStartTrayNumber")?.value||0),backup_start_slot:parseInt(document.getElementById("backupStartSlotNumber")?.value||0),backup_end_tray:parseInt(document.getElementById("backupEndTrayNumber")?.value||0),backup_end_slot:parseInt(document.getElementById("backupEndSlotNumber")?.value||0)};break;case"whole_tray":i={tray:parseInt(document.getElementById("trayNumber")?.value||0),command_type:document.getElementById("trayCommandVariant")?.value||"STOTrayExecByTray"};break;case"whole_tray_with_backup":i={active:parseInt(document.getElementById("activeState")?.value||1),tray:parseInt(document.getElementById("trayNumber")?.value||0),backup_tray:parseInt(document.getElementById("backupTrayNumber")?.value||0)}}break;case"power":n=document.getElementById("powerCommand")?.value;break;case"movement":n=document.getElementById("movementCommand")?.value,"throttle_adjust"===n?i.amount=parseFloat(document.getElementById("movementAmount")?.value||.25):"throttle_set"===n&&(i.position=parseFloat(document.getElementById("movementPosition")?.value||1));break;case"camera":n=document.getElementById("cameraCommand")?.value,"cam_distance"===n&&(i.distance=parseInt(document.getElementById("cameraDistance")?.value||50));break;case"communication":n=document.getElementById("commCommand")?.value,i={message:document.getElementById("commMessage")?.value||"Message text here"};break;case"system":n=document.getElementById("systemCommand")?.value,"bind_save_file"===n||"bind_load_file"===n?i.filename=document.getElementById("systemFilename")?.value||"my_binds.txt":"combat_log"===n&&(i.state=parseInt(document.getElementById("systemState")?.value||1));break;case"alias":n="alias",i={alias_name:document.getElementById("aliasSelect")?.value||""};break;case"custom":n="custom",i={command:document.getElementById("customCommand")?.value||"",text:document.getElementById("customText")?.value||"Custom Command"}}return n||"custom"===t?a.build(n,i):null}updateTrayVisual(){const e=document.getElementById("trayVisual"),t=document.getElementById("trayNumber")?.value||0,a=document.getElementById("slotNumber")?.value||0;e&&(e.innerHTML=`\n            <div class="tray-grid">\n                <div class="tray-label">Tray ${parseInt(t)+1}</div>\n                <div class="slot-grid">\n                    ${Array.from({length:10},(e,t)=>`\n                        <div class="slot ${t==a?"selected":""}" data-slot="${t}">\n                            ${t+1}\n                        </div>\n                    `).join("")}\n                </div>\n            </div>\n        `,e.querySelectorAll(".slot").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById("slotNumber");t&&(t.value=e.dataset.slot,this.updateTrayVisual(),this.updateCommandPreview())})}))}generateTrayRangeCommands(e,t,a,n,i){const o=[],r="STOTrayExecByTray"===i?"+":"";if(e===a)for(let a=t;a<=n;a++)o.push(`${r}${i} ${e} ${a}`);else{for(let a=t;a<=9;a++)o.push(`${r}${i} ${e} ${a}`);for(let t=e+1;t<a;t++)for(let e=0;e<=9;e++)o.push(`${r}${i} ${t} ${e}`);if(a>e)for(let e=0;e<=n;e++)o.push(`${r}${i} ${a} ${e}`)}return o}generateTrayRangeWithBackupCommands(e,t,a,n,i,o,r,s,c){const l=[],d=this.generateTraySlotList(t,a,n,i),m=this.generateTraySlotList(o,r,s,c);for(let t=0;t<Math.max(d.length,m.length);t++){const a=d[t]||d[d.length-1],n=m[t]||m[m.length-1];l.push(`TrayExecByTrayWithBackup ${e} ${a.tray} ${a.slot} ${n.tray} ${n.slot}`)}return l}generateWholeTrayCommands(e,t){const a=[],n="STOTrayExecByTray"===t?"+":"";for(let i=0;i<=9;i++)a.push(`${n}${t} ${e} ${i}`);return a}generateWholeTrayWithBackupCommands(e,t,a){const n=[];for(let i=0;i<=9;i++)n.push(`TrayExecByTrayWithBackup ${e} ${t} ${i} ${a} ${i}`);return n}generateTraySlotList(e,t,a,n){const i=[];if(e===a)for(let a=t;a<=n;a++)i.push({tray:e,slot:a});else{for(let a=t;a<=9;a++)i.push({tray:e,slot:a});for(let t=e+1;t<a;t++)for(let e=0;e<=9;e++)i.push({tray:t,slot:e});if(a>e)for(let e=0;e<=n;e++)i.push({tray:a,slot:e})}return i}getCurrentCommand(){return this.buildCurrentCommand()}validateCommand(e){if(Array.isArray(e)){for(let t=0;t<e.length;t++){const a=this.validateCommand(e[t]);if(!a.valid)return{valid:!1,error:`Command ${t+1}: ${a.error}`}}return{valid:!0}}let t;if("string"==typeof e)t=e;else{if(!e||!e.command)return{valid:!1,error:"No command provided"};t=e.command}if(!t||0===t.trim().length)return{valid:!1,error:"Command cannot be empty"};const a=t.trim();return["quit","exit","shutdown"].some(e=>a.toLowerCase().includes(e))?{valid:!1,error:"Dangerous command not allowed"}:this.hasUnquotedPipeCharacter(a)?{valid:!1,error:"Invalid characters in command (|)"}:{valid:!0}}hasUnquotedPipeCharacter(e){let t=!1,a=null;for(let n=0;n<e.length;n++){const i=e[n];if(t||'"'!==i&&"'"!==i){if(t&&i===a){let i=0;for(let t=n-1;t>=0&&"\\"===e[t];t--)i++;i%2==0&&(t=!1,a=null)}else if(!t&&"|"===i)return!0}else t=!0,a=i}return!1}getTemplateCommands(e){if(!STO_DATA.templates)return[];const t=[];return Object.entries(STO_DATA.templates).forEach(([a,n])=>{Object.entries(n).forEach(([n,i])=>{i.commands.some(t=>this.detectCommandType(t)===e)&&t.push({id:`${a}_${n}`,name:i.name,description:i.description,scenario:a,commands:i.commands.map(e=>({command:e,type:this.detectCommandType(e),icon:this.getCommandIcon(e),text:this.getCommandText(e)}))})})}),t}detectCommandType(e){if(!e||"string"!=typeof e)return"custom";const t=e.toLowerCase().trim();return t.includes("+stotrayexecbytray")?"tray":t.startsWith("say ")||t.startsWith("team ")||t.startsWith("zone ")||t.startsWith("tell ")||t.includes('"')?"communication":t.includes("+power_exec")||t.includes("distribute_shields")||t.includes("reroute_shields")?"power":t.includes("+fullimpulse")||t.includes("+reverse")||t.includes("throttle")||t.includes("+turn")||t.includes("+up")||t.includes("+down")||t.includes("+left")||t.includes("+right")||t.includes("+forward")||t.includes("+backward")||t.includes("follow")?"movement":t.includes("cam")||t.includes("look")||t.includes("zoom")?"camera":t.includes("fire")||t.includes("attack")||"fireall"===t||"firephasers"===t||"firetorps"===t||"firephaserstorps"===t?"combat":t.includes("target")||"target_enemy_near"===t||"target_self"===t||"target_friend_near"===t||"target_clear"===t?"targeting":t.includes("+gentoggle")||"screenshot"===t||t.includes("hud")||"interactwindow"===t?"system":"custom"}getCommandIcon(e){return{targeting:"üéØ",combat:"üî•",tray:"‚ö°",power:"üîã",communication:"üí¨",movement:"üöÄ",camera:"üìπ",system:"‚öôÔ∏è"}[this.detectCommandType(e)]||"‚öôÔ∏è"}getCommandText(e){if(e.includes("+STOTrayExecByTray")){const t=e.match(/\+STOTrayExecByTray\s+(\d+)\s+(\d+)/);if(t)return`Execute Tray ${parseInt(t[1])+1} Slot ${parseInt(t[2])+1}`}for(const[t,a]of Object.entries(STO_DATA.commands))for(const[t,n]of Object.entries(a.commands))if(n.command===e)return n.name;return e.replace(/[_+]/g," ").replace(/([A-Z])/g," $1").trim()}insertTargetVariable(e){const t=e.selectionStart,a=e.value,n=a.slice(0,t)+"$Target"+a.slice(t);e.value=n,e.setSelectionRange(t+7,t+7),e.focus(),e.dispatchEvent(new Event("input",{bubbles:!0}))}},he=new class{constructor(){this.modalId="fileExplorerModal",this.treeId="fileTree",this.contentId="fileContent",this.selectedNode=null}init(){this.setupEventListeners()}setupEventListeners(){n.onDom("fileExplorerBtn","click","fileExplorer-open",()=>{this.openExplorer()}),n.onDom(this.treeId,"click","fileExplorer-tree-click",e=>{const t=e.target.closest(".tree-node");t&&this.selectNode(t)}),n.onDom("copyFileContentBtn","click","copyFileContent",()=>{const e=document.getElementById(this.contentId);if(!e)return;const t=e.textContent||"";t.trim()?(stoUI.copyToClipboard(t),stoUI.showToast("Content copied to clipboard","success")):stoUI.showToast("Nothing to copy","warning")}),n.onDom("downloadFileBtn","click","download-file",()=>{if(!this.selectedNode)return;const{type:e,profileId:t,environment:a}=this.selectedNode,n=document.getElementById(this.contentId);if(!n)return;const i=n.textContent||"";if(!i.trim())return;let o=i18next.t("default_export_filename");const r=stoStorage.getProfile(t);"build"===e?o=stoExport.generateFileName(r,"txt",a):"aliases"===e&&(o=stoExport.generateAliasFileName(r,"txt")),stoExport.downloadFile(i,o,"text/plain")})}openExplorer(){this.buildTree();const e=document.getElementById(this.contentId);e&&(e.textContent=i18next.t("select_an_item_on_the_left_to_preview_export")),stoUI.showModal(this.modalId)}buildTree(){const e=document.getElementById(this.treeId);if(!e)return;e.innerHTML="";const t=stoStorage.getAllData().profiles||{};Object.entries(t).forEach(([t,a])=>{const n=this.createNode("profile",a.name,{profileId:t}),i=document.createElement("div");if(i.className="tree-children",a.builds&&a.builds.space){const e=this.createNode("build","Space Build",{profileId:t,environment:"space"});i.appendChild(e)}if(a.builds&&a.builds.ground){const e=this.createNode("build","Ground Build",{profileId:t,environment:"ground"});i.appendChild(e)}const o=this.createNode("aliases","Aliases",{profileId:t});i.appendChild(o),n.appendChild(i),e.appendChild(n)})}createNode(e,t,a={}){const n=document.createElement("div");return n.className=`tree-node ${e}`,n.textContent=t,n.dataset.type=e,Object.entries(a).forEach(([e,t])=>{n.setAttribute(`data-${e}`,t)}),n}selectNode(e){const t=document.querySelector(".tree-node.selected");t&&t.classList.remove("selected"),e.classList.add("selected");const a=e.dataset.type||e.getAttribute("data-type"),n=e.getAttribute("data-profileid"),i=e.getAttribute("data-environment");if(this.selectedNode={type:a,profileId:n,environment:i},n)try{let e="";e="build"===a?this.generateBuildExport(n,i):"aliases"===a?this.generateAliasExport(n):i18next.t("select_a_space_ground_build_or_aliases_to_preview_export");const t=document.getElementById(this.contentId);t&&(t.textContent=e||"No content available.")}catch(e){console.error("Failed to generate export content:",e),stoUI.showToast("Failed to generate export","error")}}generateBuildExport(e,t){const a=stoStorage.getProfile(e);if(!a||!a.builds||!a.builds[t])return"";const n=a.builds[t],i={name:`${a.name} ${t}`,mode:t,keys:n.keys||{},keybindMetadata:a.keybindMetadata||{},aliases:n.aliases||{}};return stoExport.generateSTOKeybindFile(i,{environment:t})}generateAliasExport(e){const t=stoStorage.getProfile(e);if(!t)return"";const a={...t.aliases||{},...t.builds?.space?.aliases||{},...t.builds?.ground?.aliases||{}},n={name:t.name,mode:t.currentEnvironment||"space",aliases:a};return stoExport.generateAliasFile(n)}},ye=new class{constructor(){this.selectedEffects={space:new Set,ground:new Set},this.showPlayerSay=!1}generateAlias(e){if(!this.selectedEffects[e])throw new InvalidEnvironmentError(e);const t=Array.from(this.selectedEffects[e]);if(0===t.length)return"";let a=`alias dynFxSetFXExlusionList_${e.charAt(0).toUpperCase()+e.slice(1)} <& dynFxSetFXExlusionList ${t.join(",")}`;return this.showPlayerSay&&(a+=" $$ PlayerSay VFX Supression Loaded"),a+=" &>",a}getSelectedEffects(e){if(!this.selectedEffects[e])throw new InvalidEnvironmentError(e);return Array.from(this.selectedEffects[e])}toggleEffect(e,t){if(!this.selectedEffects[e])throw new InvalidEnvironmentError(e);if(!t)throw new InvalidEffectError(t,e);this.selectedEffects[e].has(t)?this.selectedEffects[e].delete(t):this.selectedEffects[e].add(t)}clearAllEffects(){this.selectedEffects.space.clear(),this.selectedEffects.ground.clear()}selectAllEffects(e){if(!ie[e])throw new InvalidEnvironmentError(e);if(!this.selectedEffects[e])throw new InvalidEnvironmentError(e);ie[e].forEach(t=>{this.selectedEffects[e].add(t.effect)})}getEffectCount(e){if(!this.selectedEffects[e])throw new InvalidEnvironmentError(e);return this.selectedEffects[e].size}isEffectSelected(e,t){if(!this.selectedEffects[e])throw new InvalidEnvironmentError(e);return this.selectedEffects[e].has(t)}saveState(e){e.vertigoSettings||(e.vertigoSettings={}),e.vertigoSettings={selectedEffects:{space:Array.from(this.selectedEffects.space),ground:Array.from(this.selectedEffects.ground)},showPlayerSay:this.showPlayerSay}}loadState(e){if(e&&e.vertigoSettings){const t=e.vertigoSettings;this.selectedEffects.space=new Set(t.selectedEffects?.space||[]),this.selectedEffects.ground=new Set(t.selectedEffects?.ground||[]),this.showPlayerSay=t.showPlayerSay||!1}else this.selectedEffects.space.clear(),this.selectedEffects.ground.clear(),this.showPlayerSay=!1}},ge=new class{constructor(e=null){this.storage=e}async setSyncFolder(e=!1){try{const t=await window.showDirectoryPicker();await async function(e,t){const a=await te(),n=a.transaction(ee,"readwrite");n.objectStore(ee).put(t,e),await new Promise((e,t)=>{n.oncomplete=()=>e(),n.onerror=()=>t(n.error),n.onabort=()=>t(n.error)}),a.close()}(ae,t);const a=t.name;if(this.storage){const t=this.storage.getSettings();t.syncFolderName=a,t.syncFolderPath=`Selected folder: ${a}`,t.autoSync=e,this.storage.saveSettings(t)}return stoUI.showToast(X.t("sync_folder_set"),"success"),t}catch(e){return e&&"AbortError"!==e.name&&stoUI.showToast(X.t("failed_to_set_sync_folder",{error:e.message}),"error"),null}}async getSyncFolderHandle(){try{return await async function(e){const t=await te(),a=t.transaction(ee,"readonly").objectStore(ee).get(e),n=await new Promise((e,t)=>{a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)});return t.close(),n||null}(ae)}catch(e){return console.error("Failed to retrieve directory handle",e),null}}async ensurePermission(e){if(!e)return!1;try{const t={mode:"readwrite"};return"granted"===await e.queryPermission(t)||"granted"===await e.requestPermission(t)}catch(e){return console.error("Permission request failed",e),!1}}async syncProject(){const e=await this.getSyncFolderHandle();if(e)if(await this.ensurePermission(e))try{await stoExport.syncToFolder(e);const t=app?.autoSyncManager?.isEnabled,a="change"===app?.autoSyncManager?.interval;t&&a||stoUI.showToast(X.t("project_synced_successfully"),"success"),n.emit("project-synced")}catch(e){stoUI.showToast(X.t("failed_to_sync_project",{error:e.message}),"error")}else stoUI.showToast(X.t("permission_denied_to_folder"),"error");else stoUI.showToast(X.t("no_sync_folder_selected"),"warning")}}(se);Object.assign(window,{stoStorage:se,stoProfiles:le,stoKeybinds:de,stoAliases:me,stoExport:ue,modalManager:pe,stoUI:_e,stoCommands:fe,stoFileExplorer:he,vertigoManager:ye,stoSync:ge,VFX_EFFECTS:ie});const be=new class{constructor(){this.store=Q,this.eventListeners=new Map,this.preferencesManager=new oe,this.autoSyncManager=new re,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.init()):this.init()}get currentProfile(){return this.store.currentProfile}set currentProfile(e){this.store.currentProfile=e}get currentMode(){return this.store.currentMode}set currentMode(e){this.store.currentMode=e}get currentEnvironment(){return this.store.currentEnvironment}set currentEnvironment(e){this.store.currentEnvironment=e}get selectedKey(){return this.store.selectedKey}set selectedKey(e){this.store.selectedKey=e}get isModified(){return this.store.isModified}set isModified(e){this.store.isModified=e}get undoStack(){return this.store.undoStack}set undoStack(e){this.store.undoStack=e}get redoStack(){return this.store.redoStack}set redoStack(e){this.store.redoStack=e}get maxUndoSteps(){return this.store.maxUndoSteps}set maxUndoSteps(e){this.store.maxUndoSteps=e}get commandIdCounter(){return this.store.commandIdCounter}set commandIdCounter(e){this.store.commandIdCounter=e}async init(){try{if("undefined"==typeof stoStorage||"undefined"==typeof stoUI)throw new Error("Required dependencies not loaded");await this.loadData(),this.applyTheme(),await this.applyLanguage(),this.setupEventListeners(),this.setupCommandLibrary(),this.setupDragAndDrop(),this.preferencesManager.init(),this.autoSyncManager.init(),this.renderProfiles(),this.renderKeyGrid(),this.renderCommandChain(),this.updateModeButtons();const e=stoStorage.getSettings();this.updateThemeToggleButton(e.theme||"default"),this.isFirstTime()&&this.showWelcomeMessage(),stoUI.showToast("STO Tools Keybind Manager loaded successfully","success"),n.emit("sto-app-ready",{app:this})}catch(e){console.error("Failed to initialize application:",e),"undefined"!=typeof stoUI&&stoUI.showToast&&stoUI.showToast("Failed to load application","error"),n.emit("sto-app-error",{error:e})}}async loadData(){const e=stoStorage.getAllData();this.currentProfile=e.currentProfile;const t=e.profiles[this.currentProfile];this.currentEnvironment=t&&t.currentEnvironment||"space",e.profiles[this.currentProfile]||(this.currentProfile=Object.keys(e.profiles)[0],this.saveCurrentProfile())}saveData(){const e=stoStorage.getAllData();return e.currentProfile=this.currentProfile,e.lastModified=(new Date).toISOString(),!!stoStorage.saveAllData(e)&&(this.setModified(!1),!0)}saveCurrentProfile(){const e=stoStorage.getAllData();return e.currentProfile=this.currentProfile,stoStorage.saveAllData(e)}setModified(e=!0){this.isModified=e;const t=document.getElementById("modifiedIndicator");t&&(t.style.display=e?"inline":"none"),e&&n.emit("profile-modified")}getCurrentProfile(){const e=stoStorage.getProfile(this.currentProfile);return e?this.getCurrentBuild(e):null}getCurrentBuild(e){return e?(e.builds||(e.builds={space:{keys:{}},ground:{keys:{}}}),e.builds[this.currentEnvironment]||(e.builds[this.currentEnvironment]={keys:{}}),e.builds[this.currentEnvironment].keys||(e.builds[this.currentEnvironment].keys={}),{...e,keys:e.builds[this.currentEnvironment].keys,aliases:e.aliases||{}}):null}switchProfile(e){if(e!==this.currentProfile){this.currentProfile=e,this.selectedKey=null;const t=stoStorage.getProfile(e);t&&(this.currentEnvironment=t.currentEnvironment||"space"),this.saveCurrentProfile(),this.renderKeyGrid(),this.renderCommandChain(),this.updateProfileInfo();const a=this.getCurrentProfile();stoUI.showToast(`Switched to profile: ${a.name} (${this.currentEnvironment})`,"success")}}createProfile(e,t="",a="space"){const n=this.generateProfileId(e),i={name:e,description:t,currentEnvironment:a,builds:{space:{keys:{}},ground:{keys:{}}},aliases:{},created:(new Date).toISOString(),lastModified:(new Date).toISOString()};return stoStorage.saveProfile(n,i)?(this.switchProfile(n),this.renderProfiles(),stoUI.showToast(`Profile "${e}" created`,"success"),n):(stoUI.showToast("Failed to create profile","error"),null)}cloneProfile(e,t){const a=stoStorage.getProfile(e);if(!a)return null;const n=this.generateProfileId(t),i={...JSON.parse(JSON.stringify(a)),name:t,description:`Copy of ${a.name}`,created:(new Date).toISOString(),lastModified:(new Date).toISOString()};return stoStorage.saveProfile(n,i)?(this.renderProfiles(),stoUI.showToast(`Profile "${t}" created from "${a.name}"`,"success"),n):(stoUI.showToast("Failed to clone profile","error"),null)}deleteProfile(e){const t=stoStorage.getProfile(e);if(!t)return!1;const a=stoStorage.getAllData();if(Object.keys(a.profiles).length<=1)return stoUI.showToast("Cannot delete the last profile","warning"),!1;if(stoStorage.deleteProfile(e)){if(this.currentProfile===e){const e=Object.keys(stoStorage.getAllData().profiles);this.switchProfile(e[0])}return this.renderProfiles(),stoUI.showToast(`Profile "${t.name}" deleted`,"success"),!0}return stoUI.showToast("Failed to delete profile","error"),!1}generateProfileId(e){const t=e.toLowerCase().replace(/[^a-z0-9]/g,"_");let a=t,n=1;const i=stoStorage.getAllData();for(;i.profiles[a];)a=`${t}_${n}`,n++;return a}selectKey(e){this.selectedKey=e;const t=this.getCurrentProfile(),a=document.getElementById("stabilizeExecutionOrder");if(a&&t&&t.keybindMetadata){let n=!1;if(t.keybindMetadata[this.currentEnvironment]){const a=t.keybindMetadata[this.currentEnvironment];n=!(!a[e]||!a[e].stabilizeExecutionOrder)}a.checked=n}else a&&(a.checked=!1);this.renderKeyGrid(),this.renderCommandChain(),this.updateChainActions()}addKey(e){if(!this.isValidKeyName(e))return stoUI.showToast("Invalid key name","error"),!1;const t=this.getCurrentProfile();return t.keys[e]?(stoUI.showToast(`Key "${e}" already exists`,"warning"),!1):(t.keys[e]=[],stoStorage.saveProfile(this.currentProfile,t),this.renderKeyGrid(),this.selectKey(e),this.setModified(!0),stoUI.showToast(`Key "${e}" added`,"success"),!0)}deleteKey(e){const t=this.getCurrentProfile();return!!t.keys[e]&&(delete t.keys[e],stoStorage.saveProfile(this.currentProfile,t),this.selectedKey===e&&(this.selectedKey=null),this.renderKeyGrid(),this.renderCommandChain(),this.setModified(!0),stoUI.showToast(`Key "${e}" deleted`,"success"),!0)}isValidKeyName(e){return STO_DATA.validation.keyNamePattern.test(e)&&e.length<=20}addCommand(e,t){const a=this.getCurrentProfile();a.keys[e]||(a.keys[e]=[]),Array.isArray(t)?(t.forEach(t=>{t.id||(t.id=this.generateCommandId()),a.keys[e].push(t)}),stoUI.showToast(`${t.length} commands added`,"success")):(t.id||(t.id=this.generateCommandId()),a.keys[e].push(t),stoUI.showToast("Command added","success")),stoStorage.saveProfile(this.currentProfile,a),this.renderCommandChain(),this.renderKeyGrid(),this.setModified(!0),n.emit("command-modified",{keyName:e,command:t,action:"add"})}deleteCommand(e,t){const a=this.getCurrentProfile();if(a.keys[e]&&a.keys[e][t]){const i=a.keys[e][t];a.keys[e].splice(t,1),stoStorage.saveProfile(this.currentProfile,a),this.renderCommandChain(),this.renderKeyGrid(),this.setModified(!0),stoUI.showToast("Command deleted","success"),n.emit("command-modified",{keyName:e,command:i,action:"delete"})}}moveCommand(e,t,a){const i=this.getCurrentProfile(),o=i.keys[e];if(o&&t>=0&&t<o.length&&a>=0&&a<o.length){const[r]=o.splice(t,1);o.splice(a,0,r),stoStorage.saveProfile(this.currentProfile,i),this.renderCommandChain(),this.setModified(!0),n.emit("command-modified",{keyName:e,command:r,action:"move",fromIndex:t,toIndex:a})}}generateCommandId(){return"cmd_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}renderProfiles(){const e=document.getElementById("profileSelect");if(!e)return;const t=stoStorage.getAllData();if(e.innerHTML="",0===Object.keys(t.profiles).length){const t=document.createElement("option");t.value="",t.textContent="No profiles available",t.disabled=!0,e.appendChild(t)}else Object.entries(t.profiles).forEach(([t,a])=>{const n=document.createElement("option");n.value=t,n.textContent=a.name,t===this.currentProfile&&(n.selected=!0),e.appendChild(n)});this.updateProfileInfo()}updateProfileInfo(){const e=this.getCurrentProfile();document.querySelectorAll(".mode-btn").forEach(t=>{t.classList.toggle("active",e&&t.dataset.mode===this.currentEnvironment),t.disabled=!this.currentProfile});const t=document.getElementById("keyCount");if(t)if(e){const a=Object.keys(e.keys).length;t.textContent=`${a} key${1!==a?"s":""}`}else t.textContent="No profile"}renderKeyGrid(){const e=document.getElementById("keyGrid");if(!e)return;const t=this.getCurrentProfile();if(!t)return;if(e.innerHTML="",!t)return void(e.innerHTML='\n                <div class="empty-state">\n                    <i class="fas fa-folder-open"></i>\n                    <h4>No Profile Selected</h4>\n                    <p>Create a new profile or load default data to get started.</p>\n                </div>\n            ');const a=Object.keys(t.keys),n=[...new Set([...a,"Space","1","2","3","4","5","F1","F2","F3","F4"])].sort(),i=localStorage.getItem("keyViewMode")||"key-types";"categorized"===i?this.renderCategorizedKeyView(e,t,n):"key-types"===i?this.renderKeyTypeView(e,t,n):this.renderSimpleKeyGrid(e,n),this.updateViewToggleButton(i);const o=document.getElementById("keyFilter");o&&o.value.trim()&&this.filterKeys(o.value.trim())}renderSimpleKeyGrid(e,t){e.classList.remove("categorized"),t.forEach(t=>{const a=this.createKeyElement(t);e.appendChild(a)})}renderCategorizedKeyView(e,t,a){e.classList.add("categorized");const n=this.categorizeKeys(t.keys,a);Object.entries(n).sort(([e,t],[a,n])=>t.priority!==n.priority?t.priority-n.priority:t.name.localeCompare(n.name)).forEach(([t,a])=>{const n=this.createKeyCategoryElement(t,a);e.appendChild(n)})}categorizeKeys(e,t){const a={};return a.unknown={name:"Unknown",icon:"fas fa-question-circle",keys:new Set,priority:0},Object.entries(STO_DATA.commands).forEach(([e,t])=>{a[e]={name:t.name,icon:t.icon,keys:new Set,priority:1}}),t.forEach(t=>{const n=e[t]||[];if(!n||0===n.length)return void a.unknown.keys.add(t);const i=new Set;n.forEach(e=>{if(e.type&&a[e.type])i.add(e.type);else if(window.stoCommands){const t=window.stoCommands.detectCommandType(e.command);a[t]&&i.add(t)}}),i.size>0?i.forEach(e=>{a[e].keys.add(t)}):(a.custom||(a.custom={name:"Custom Commands",icon:"fas fa-cog",keys:new Set,priority:2}),a.custom.keys.add(t))}),Object.values(a).forEach(e=>{e.keys=Array.from(e.keys).sort(this.compareKeys.bind(this))}),a}createKeyCategoryElement(e,t,a="command"){const n=document.createElement("div");n.className="category",n.dataset.category=e;const i="key-type"===a?`keyTypeCategory_${e}_collapsed`:`keyCategory_${e}_collapsed`,o="true"===localStorage.getItem(i);return n.innerHTML=`\n            <h4 class="${o?"collapsed":""}" data-category="${e}" data-mode="${a}">\n                <i class="fas fa-chevron-right category-chevron"></i>\n                <i class="${t.icon}"></i> \n                ${t.name} \n                <span class="key-count">(${t.keys.length})</span>\n            </h4>\n            <div class="category-commands ${o?"collapsed":""}">\n                ${t.keys.map(e=>this.createKeyElementHTML(e)).join("")}\n            </div>\n        `,n.querySelector("h4").addEventListener("click",()=>{this.toggleKeyCategory(e,n,a)}),n.querySelectorAll(".command-item").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.key;this.selectKey(t)})}),n}createKeyElementHTML(e){const t=this.getCurrentProfile().keys[e]||[],a=this.selectedKey===e,n=e.length;let i;return i=n<=6?"short":n<=12?"medium":"long",`\n            <div class="command-item ${a?"active":""}" data-key="${e}" data-length="${i}">\n                <span class="key-label">${e}</span>\n                ${t.length>0?`\n                    <span class="command-count-badge">${t.length}</span>\n                `:""}\n            </div>\n        `}toggleKeyCategory(e,t,a="command"){const n=t.querySelector("h4"),i=t.querySelector(".category-commands"),o=n.querySelector(".category-chevron"),r="key-type"===a?`keyTypeCategory_${e}_collapsed`:`keyCategory_${e}_collapsed`;i.classList.contains("collapsed")?(i.classList.remove("collapsed"),n.classList.remove("collapsed"),o.style.transform="rotate(90deg)",localStorage.setItem(r,"false")):(i.classList.add("collapsed"),n.classList.add("collapsed"),o.style.transform="rotate(0deg)",localStorage.setItem(r,"true"))}formatKeyName(e){return e.includes("+")?e.replace(/\+/g,"<br>+<br>"):e}detectKeyTypes(e){const t=[];e.includes("+")&&e.split("+").some(e=>e.match(/^(Ctrl|Control|Alt|Shift|Win|Cmd|Super)$/i))&&t.push("modifiers");const a=e.split("+").pop();return a.match(/^F\d+$/)?t.push("function"):a.match(/^(Lbutton|Rbutton|Mbutton|Leftdrag|Rightdrag|Middledrag|Leftclick|Rightclick|Middleclick|Leftdoubleclick|Rightdoubleclick|Middledoubleclick|Wheelplus|Wheelminus|Mousechord|Mouse|Wheel|LMouse|RMouse|MMouse|XMouse|Drag)/i)?t.push("mouse"):a.match(/^(Numpad|Keypad)/i)?t.push("numberpad"):a.match(/^(Ctrl|Control|Alt|Shift|Win|Cmd|Super)$/i)?t.includes("modifiers")||t.push("modifiers"):a.match(/^(Up|Down|Left|Right|Home|End|PageUp|PageDown|Insert|Delete)$/i)?t.push("navigation"):a.match(/^(Space|Tab|Enter|Return|Escape|Esc|Backspace|CapsLock|ScrollLock|NumLock|PrintScreen|Pause|Break)$/i)?t.push("system"):a.match(/^[0-9]$/)||a.match(/^[A-Za-z]$/)?t.push("alphanumeric"):a.match(/^[`~!@#$%^&*()_+\-=\[\]{}\\|;':",./<>?]$/)||a.match(/^(Comma|Period|Semicolon|Quote|Slash|Backslash|Minus|Plus|Equals|Bracket|Grave|Tilde)$/i)?t.push("symbols"):t.push("other"),t.length>0?t:["other"]}categorizeKeysByType(e,t){const a={function:{name:"Function Keys",icon:"fas fa-keyboard",keys:new Set,priority:1},alphanumeric:{name:"Letters & Numbers",icon:"fas fa-font",keys:new Set,priority:2},numberpad:{name:"Numberpad",icon:"fas fa-calculator",keys:new Set,priority:3},modifiers:{name:"Modifier Keys",icon:"fas fa-hand-paper",keys:new Set,priority:4},navigation:{name:"Navigation",icon:"fas fa-arrows-alt",keys:new Set,priority:5},system:{name:"System Keys",icon:"fas fa-cogs",keys:new Set,priority:6},mouse:{name:"Mouse & Wheel",icon:"fas fa-mouse",keys:new Set,priority:7},symbols:{name:"Symbols & Punctuation",icon:"fas fa-at",keys:new Set,priority:8},other:{name:"Other Keys",icon:"fas fa-question-circle",keys:new Set,priority:9}};return t.forEach(e=>{this.detectKeyTypes(e).forEach(t=>{a[t]?a[t].keys.add(e):a.other.keys.add(e)})}),Object.values(a).forEach(e=>{e.keys=Array.from(e.keys).sort(this.compareKeys.bind(this))}),a}renderKeyTypeView(e,t,a){e.classList.add("categorized");const n=this.categorizeKeysByType(t.keys,a);Object.entries(n).sort(([e,t],[a,n])=>t.priority-n.priority).forEach(([t,a])=>{const n=this.createKeyCategoryElement(t,a,"key-type");e.appendChild(n)})}compareKeys(e,t){const a=e=>"Space"===e?0:e.match(/^[0-9]$/)?1:e.match(/^F[0-9]+$/)?2:e.includes("Ctrl+")?3:e.includes("Alt+")?4:e.includes("Shift+")?5:6,n=a(e),i=a(t);return n!==i?n-i:e.localeCompare(t)}createKeyElement(e){const t=this.getCurrentProfile().keys[e]||[],a=e===this.selectedKey,n=document.createElement("div");n.className="key-item "+(a?"active":""),n.dataset.key=e,n.title=`${e}: ${t.length} command${1!==t.length?"s":""}`;const i=this.formatKeyName(e);let o;if(i.includes("<br>")){const t=e.split("+"),a=Math.max(...t.map(e=>e.length));o=a<=4?"short":a<=8?"medium":"long"}else{const t=e.length;o=t<=3?"short":t<=5?"medium":t<=8?"long":"extra-long"}return n.dataset.length=o,n.innerHTML=`\n            <div class="key-label">${i}</div>\n            ${t.length>0?`\n                <div class="activity-bar" style="width: ${Math.min(15*t.length,100)}%"></div>\n                <div class="command-count-badge">${t.length}</div>\n            `:""}\n        `,n.addEventListener("click",()=>{this.selectKey(e)}),n}updateViewToggleButton(e){const t=document.getElementById("toggleKeyViewBtn");if(t){const a=t.querySelector("i");"categorized"===e?(a.className="fas fa-sitemap",t.title="Switch to key type view"):"key-types"===e?(a.className="fas fa-th",t.title="Switch to grid view"):(a.className="fas fa-list",t.title="Switch to command categories")}}toggleKeyView(){const e=localStorage.getItem("keyViewMode")||"key-types";let t;t="key-types"===e?"grid":"grid"===e?"categorized":"key-types",localStorage.setItem("keyViewMode",t),this.renderKeyGrid()}renderCommandChain(){const e=document.getElementById("commandList"),t=document.getElementById("chainTitle"),a=document.getElementById("commandPreview"),n=document.getElementById("commandCount"),i=document.getElementById("emptyState");if(!e||!t||!a)return;if(!this.selectedKey){if(t.textContent=i18next.t("select_a_key_to_edit"),a.textContent=i18next.t("select_a_key_to_see_the_generated_command"),n)if(n.querySelector('[data-i18n="commands"]')){const e="undefined"!=typeof i18next?i18next.t("commands"):"commands";n.innerHTML=`0 <span data-i18n="commands">${e}</span>`}else n.textContent="0 commands";return i&&(i.style.display="block"),void(e.innerHTML='<div class="empty-state" id="emptyState"><i class="fas fa-keyboard"></i><h4>No Key Selected</h4><p>Select a key from the left panel to view and edit its command chain.</p></div>')}const o=this.getCurrentProfile();if(!o)return e.innerHTML='\n        <div class="empty-state">\n          <i class="fas fa-exclamation-triangle"></i>\n          <h4>No Valid Profile</h4>\n          <p>Please create or select a valid profile to manage commands.</p>\n        </div>\n      ',void(a.textContent="");const r=o.keys[this.selectedKey]||[];if(t.textContent=`Command Chain for ${this.selectedKey}`,n)if(n.querySelector('[data-i18n="commands"]')){const e="undefined"!=typeof i18next?i18next.t("commands"):"commands";n.innerHTML=`${r.length} <span data-i18n="commands">${e}</span>`}else n.textContent=`${r.length} command${1!==r.length?"s":""}`;if(0===r.length)e.innerHTML=`\n                <div class="empty-state">\n                    <i class="fas fa-plus-circle"></i>\n                    <h4>No Commands</h4>\n                    <p>Click "Add Command" to start building your command chain for ${this.selectedKey}.</p>\n                </div>\n            `,a.textContent=`${this.selectedKey} ""`;else{e.innerHTML="",r.forEach((t,a)=>{const n=this.createCommandElement(t,a);e.appendChild(n)});const t=document.getElementById("stabilizeExecutionOrder");let n;n=t&&t.checked&&r.length>1?stoKeybinds.generateMirroredCommandString(r):r.map(e=>e.command).join(" $$ "),a.textContent=`${this.selectedKey} "${n}"`}}createCommandElement(e,t){const a=document.createElement("div");a.className="command-item-row",a.dataset.index=t,a.draggable=!0;const n=this.findCommandDefinition(e),i=n&&n.customizable;let o=e.text,r=e.icon;if(n)if(o=n.name,r=n.icon,i&&e.parameters){if("tray_with_backup"===n.commandId){const t=e.parameters;o=`${n.name} (${t.active} ${t.tray} ${t.slot} ${t.backup_tray} ${t.backup_slot})`}else if("custom_tray"===n.commandId){const t=e.parameters;o=`${n.name} (${t.tray} ${t.slot})`}else if("target"===n.commandId){const t=e.parameters;o=`${n.name}: ${t.entityName}`}}else if(i)if(e.command.includes("TrayExecByTrayWithBackup")){const t=e.command.split(" ");t.length>=6&&(o=`${n.name} (${t[1]} ${t[2]} ${t[3]} ${t[4]} ${t[5]})`)}else if(e.command.includes("TrayExec")){const t=e.command.replace("+","").split(" ");t.length>=3&&(o=`${n.name} (${t[1]} ${t[2]})`)}else if(e.command.includes("Target ")){const t=e.command.match(/Target "([^"]+)"/);t&&(o=`${n.name}: ${t[1]}`)}i&&(a.dataset.parameters="true",a.classList.add("customizable"));const s=this.getCommandWarning(e),c=s?`<span class="command-warning-icon" title="${s}"><i class="fas fa-exclamation-triangle"></i></span>`:"",l=i?' <span class="param-indicator" title="Editable parameters">‚öôÔ∏è</span>':"";return a.innerHTML=`\n            <div class="command-number">${t+1}</div>\n            <div class="command-content">\n                <span class="command-icon">${r}</span>\n                <span class="command-text">${o}${l}</span>\n                ${c}\n            </div>\n            <span class="command-type ${e.type}">${e.type}</span>\n            <div class="command-actions">\n                <button class="btn btn-small-icon" onclick="app.editCommand(${t})" title="Edit Command">\n                    <i class="fas fa-edit"></i>\n                </button>\n                <button class="btn btn-small-icon btn-danger" onclick="app.deleteCommand('${this.selectedKey}', ${t})" title="Delete Command">\n                    <i class="fas fa-times"></i>\n                </button>\n                <button class="btn btn-small-icon" onclick="app.moveCommand('${this.selectedKey}', ${t}, ${t-1})" \n                        title="Move Up" ${0===t?"disabled":""}>\n                    <i class="fas fa-chevron-up"></i>\n                </button>\n                <button class="btn btn-small-icon" onclick="app.moveCommand('${this.selectedKey}', ${t}, ${t+1})" \n                        title="Move Down" ${t===this.getCurrentProfile().keys[this.selectedKey].length-1?"disabled":""}>\n                    <i class="fas fa-chevron-down"></i>\n                </button>\n            </div>\n        `,a}getCommandWarning(e){const t=STO_DATA.commands;for(const[a,n]of Object.entries(t))for(const[t,a]of Object.entries(n.commands))if(a.command===e.command||a.name===e.text||e.command.includes(a.command))return a.warning||null;return null}setupCommandLibrary(){const e=document.getElementById("commandCategories");e&&(e.innerHTML="",Object.entries(STO_DATA.commands).forEach(([t,a])=>{const n=this.createCategoryElement(t,a);e.appendChild(n)}),this.filterCommandLibrary())}createCategoryElement(e,t){const a=document.createElement("div");a.className="category",a.dataset.category=e;const n=`commandCategory_${e}_collapsed`,i="true"===localStorage.getItem(n);return a.innerHTML=`\n            <h4 class="${i?"collapsed":""}" data-category="${e}">\n                <i class="fas fa-chevron-right category-chevron"></i>\n                <i class="${t.icon}"></i> \n                ${t.name}\n                <span class="command-count">(${Object.keys(t.commands).length})</span>\n            </h4>\n            <div class="category-commands ${i?"collapsed":""}">\n                ${Object.entries(t.commands).map(([e,t])=>`\n                    <div class="command-item ${t.customizable?"customizable":""}" data-command="${e}" title="${t.description}${t.customizable?" (Customizable)":""}">\n                        ${t.icon} ${t.name}${t.customizable?' <span class="param-indicator">‚öôÔ∏è</span>':""}\n                    </div>\n                `).join("")}\n            </div>\n        `,a.querySelector("h4").addEventListener("click",()=>{this.toggleCommandCategory(e,a)}),a.addEventListener("click",t=>{if(t.target.classList.contains("command-item")){const a=t.target.dataset.command;this.addCommandFromLibrary(e,a)}}),a}toggleCommandCategory(e,t){const a=t.querySelector("h4"),n=t.querySelector(".category-commands"),i=a.querySelector(".category-chevron"),o=`commandCategory_${e}_collapsed`;n.classList.contains("collapsed")?(n.classList.remove("collapsed"),a.classList.remove("collapsed"),i.style.transform="rotate(90deg)",localStorage.setItem(o,"false")):(n.classList.add("collapsed"),a.classList.add("collapsed"),i.style.transform="rotate(0deg)",localStorage.setItem(o,"true"))}addCommandFromLibrary(e,t){if(!this.selectedKey)return void stoUI.showToast("Please select a key first","warning");const a=STO_DATA.commands[e].commands[t];if(!a)return;if(a.customizable&&a.parameters)return void this.showParameterModal(e,t,a);const n={command:a.command,type:e,icon:a.icon,text:a.name,id:this.generateCommandId()};this.addCommand(this.selectedKey,n)}setupDragAndDrop(){const e=document.getElementById("commandList");e&&stoUI.initDragAndDrop(e,{dragSelector:".command-item-row",dropZoneSelector:".command-item-row",onDrop:(e,t,a)=>{if(!this.selectedKey)return;const n=parseInt(t.dragElement.dataset.index),i=parseInt(a.dataset.index);n!==i&&this.moveCommand(this.selectedKey,n,i)}})}updateChainActions(){const e=!!this.selectedKey;["addCommandBtn","addFromTemplateBtn","importFromKeyBtn","deleteKeyBtn","duplicateKeyBtn"].forEach(t=>{const a=document.getElementById(t);a&&(a.disabled=!e)})}setupEventListeners(){const e=document.getElementById("profileSelect");e?.addEventListener("change",e=>{this.switchProfile(e.target.value)}),document.querySelectorAll(".mode-btn").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget.dataset.mode;t&&this.switchMode(t)})}),n.onDom("openProjectBtn","click","project-open",()=>{this.openProject()}),n.onDom("saveProjectBtn","click","project-save",()=>{this.saveProject()}),n.onDom("exportKeybindsBtn","click","keybinds-export",()=>{this.exportKeybinds()}),n.onDom("vertigoBtn","click","vertigo-open",()=>{this.showVertigoModal()}),n.onDom("addKeyBtn","click","key-add",()=>{this.showKeySelectionModal()}),n.onDom("deleteKeyBtn","click","key-delete",()=>{this.selectedKey&&this.confirmDeleteKey(this.selectedKey)}),n.onDom("duplicateKeyBtn","click","key-duplicate",()=>{this.selectedKey&&this.duplicateKey(this.selectedKey)}),n.onDom("addCommandBtn","click","command-add",()=>{modalManager.show("addCommandModal")}),n.onDom("addFromTemplateBtn","click","command-add-template",()=>{this.showTemplateModal()}),n.onDom("clearChainBtn","click","command-chain-clear",()=>{this.selectedKey&&this.confirmClearChain(this.selectedKey)}),n.onDom("validateChainBtn","click","command-chain-validate",()=>{this.validateCurrentChain()}),n.onDom("stabilizeExecutionOrder","change","stabilize-change",e=>{if(this.selectedKey){const t=this.currentEnvironment,a=stoStorage.getProfile(this.currentProfile);a&&(a.keybindMetadata||(a.keybindMetadata={}),a.keybindMetadata[t]||(a.keybindMetadata[t]={}),a.keybindMetadata[t][this.selectedKey]||(a.keybindMetadata[t][this.selectedKey]={}),a.keybindMetadata[t][this.selectedKey].stabilizeExecutionOrder=e.target.checked,stoStorage.saveProfile(this.currentProfile,a),this.setModified(!0))}this.renderCommandChain()}),n.onDom("keyFilter","input","key-filter",e=>{this.filterKeys(e.target.value)}),n.onDom("commandSearch","input","command-search",e=>{this.filterCommands(e.target.value)}),n.onDom("showAllKeysBtn","click","show-all-keys",()=>{this.showAllKeys()}),n.onDom("toggleKeyViewBtn","click","toggle-key-view",()=>{this.toggleKeyView()}),n.onDom("toggleLibraryBtn","click","toggle-library",()=>{this.toggleLibrary()}),this.setupModalHandlers(),setInterval(()=>{this.isModified&&this.saveData()},3e4)}setupModalHandlers(){n.onDom("confirmAddKeyBtn","click","key-add-confirm",()=>{const e=document.getElementById("newKeyName")?.value.trim();e&&(this.addKey(e),modalManager.hide("addKeyModal"))}),document.querySelectorAll(".key-suggestion").forEach(e=>{e.addEventListener("click",e=>{const t=e.target.dataset.key,a=document.getElementById("newKeyName");a&&(a.value=t)})}),n.onDom("saveCommandBtn","click","command-save",()=>{this.saveCommandFromModal()}),document.querySelectorAll(".modal-close, [data-modal]").forEach(e=>{e.addEventListener("click",e=>{const t=e.target.dataset.modal||e.target.closest("button").dataset.modal;t&&(modalManager.hide(t),"vertigoModal"===t&&(this.vertigoInitialState&&!this.vertigoSaving&&(vertigoManager.selectedEffects.space=new Set(this.vertigoInitialState.selectedEffects.space),vertigoManager.selectedEffects.ground=new Set(this.vertigoInitialState.selectedEffects.ground),vertigoManager.showPlayerSay=this.vertigoInitialState.showPlayerSay),delete this.vertigoInitialState,this.vertigoSaving=!1))})})}saveProfile(){const e=this.getCurrentProfile();if(!e)return;this.saveCurrentBuild();const t=stoStorage.getProfile(this.currentProfile);if(!t)return;const a={...t,name:e.name,description:e.description||t.description,aliases:e.aliases||{},keybindMetadata:e.keybindMetadata||t.keybindMetadata,created:t.created,lastModified:(new Date).toISOString(),currentEnvironment:this.currentEnvironment};stoStorage.saveProfile(this.currentProfile,a)}switchMode(e){if(!e||"space"!==e&&"ground"!==e)console.warn("Invalid mode provided to switchMode:",e);else if(this.currentEnvironment!==e){this.saveCurrentBuild(),this.currentEnvironment=e;const t=stoStorage.getProfile(this.currentProfile);t&&(t.currentEnvironment=e,stoStorage.saveProfile(this.currentProfile,t)),this.updateProfileInfo(),this.renderKeyGrid(),this.renderCommandChain(),this.filterCommandLibrary(),this.setModified(!0),this.updateModeButtons(),stoUI.showToast(`Switched to ${e} mode`,"success")}}updateModeButtons(){const e=document.querySelector('[data-mode="space"]'),t=document.querySelector('[data-mode="ground"]');e&&t&&(e.classList.toggle("active","space"===this.currentEnvironment),t.classList.toggle("active","ground"===this.currentEnvironment),e.disabled=!this.currentProfile,t.disabled=!this.currentProfile)}saveCurrentBuild(){const e=stoStorage.getProfile(this.currentProfile),t=this.getCurrentProfile();e&&t&&(e.builds||(e.builds={space:{keys:{}},ground:{keys:{}}}),e.builds[this.currentEnvironment]={keys:t.keys||{}},stoStorage.saveProfile(this.currentProfile,e))}async confirmDeleteKey(e){await stoUI.confirm(`Are you sure you want to delete the key "${e}" and all its commands?`,"Delete Key","danger")&&this.deleteKey(e)}async confirmClearChain(e){await stoUI.confirm(`Are you sure you want to clear all commands for "${e}"?`,"Clear Commands","warning")&&(this.getCurrentProfile().keys[e]=[],this.saveCurrentBuild(),this.renderCommandChain(),this.renderKeyGrid(),this.setModified(!0),stoUI.showToast(`Commands cleared for ${e}`,"success"))}openProject(){const e=document.getElementById("fileInput");e.accept=".json",e.onchange=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{try{stoStorage.importData(e.target.result)?(this.loadData(),this.renderProfiles(),this.renderKeyGrid(),this.renderCommandChain(),stoUI.showToast("Project loaded successfully","success")):stoUI.showToast("Failed to load project file","error")}catch(e){stoUI.showToast("Invalid project file","error")}},e.readAsText(t)}},e.click()}saveProject(){const e=stoStorage.exportData(),t=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(t),i=document.createElement("a");i.href=a,i.download="sto_keybinds.json",i.click(),URL.revokeObjectURL(a),stoUI.showToast("Project exported successfully","success"),n.emit("project-saved")}exportKeybinds(){const e=this.getCurrentProfile();if(!e)return;const t=stoExport.generateSTOKeybindFile(e,{environment:this.currentEnvironment}),a=new Blob([t],{type:"text/plain"}),n=URL.createObjectURL(a),i=document.createElement("a");i.href=n;const o=e.name.replace(/[^a-zA-Z0-9]/g,"_");i.download=`${o}_${this.currentEnvironment}_keybinds.txt`,i.click(),URL.revokeObjectURL(n),stoUI.showToast(`${this.currentEnvironment} keybinds exported successfully`,"success")}isFirstTime(){return!localStorage.getItem("sto_keybind_manager_visited")}showWelcomeMessage(){localStorage.setItem("sto_keybind_manager_visited","true"),modalManager.show("aboutModal")}duplicateKey(e){const t=this.getCurrentProfile(),a=t.keys[e];if(!a||0===a.length)return void stoUI.showToast("No commands to duplicate","warning");let n=e+"_copy",i=1;for(;t.keys[n];)n=`${e}_copy_${i}`,i++;const o=a.map(e=>({...e,id:this.generateCommandId()}));t.keys[n]=o,stoStorage.saveProfile(this.currentProfile,t),this.renderKeyGrid(),this.setModified(!0),stoUI.showToast(`Key "${e}" duplicated as "${n}"`,"success")}showTemplateModal(){stoUI.showToast("Template system coming soon","info")}validateCurrentChain(){if(!this.selectedKey)return void stoUI.showToast("No key selected","warning");const e=this.getCurrentProfile().keys[this.selectedKey]||[];if(0===e.length)return void stoUI.showToast("No commands to validate","warning");const t=stoKeybinds.validateKeybind(this.selectedKey,e);if(t.valid)stoUI.showToast("Command chain is valid","success");else{const e="Validation errors:\n"+t.errors.join("\n");stoUI.showToast(e,"error",5e3)}}filterKeys(e){const t=e.toLowerCase();document.querySelectorAll(".key-item").forEach(a=>{const n=a.dataset.key.toLowerCase(),i=!e||n.includes(t);a.style.display=i?"flex":"none"}),document.querySelectorAll(".command-item[data-key]").forEach(a=>{const n=a.dataset.key.toLowerCase(),i=!e||n.includes(t);a.style.display=i?"flex":"none"}),document.querySelectorAll(".category").forEach(t=>{const a=t.querySelectorAll('.command-item[data-key]:not([style*="display: none"])'),n=!e||a.length>0;t.style.display=n?"block":"none"})}filterCommands(e){const t=document.querySelectorAll(".command-item"),a=e.toLowerCase();t.forEach(t=>{const n=t.textContent.toLowerCase(),i=!e||n.includes(a);t.style.display=i?"flex":"none"}),document.querySelectorAll(".category").forEach(t=>{const a=t.querySelectorAll('.command-item:not([style*="display: none"])'),n=!e||a.length>0;t.style.display=n?"block":"none"})}showAllKeys(){document.querySelectorAll(".key-item").forEach(e=>{e.style.display="flex"}),document.querySelectorAll(".command-item[data-key]").forEach(e=>{e.style.display="flex"}),document.querySelectorAll(".category").forEach(e=>{e.style.display="block"});const e=document.getElementById("keyFilter");e&&(e.value="")}toggleLibrary(){const e=document.getElementById("libraryContent"),t=document.getElementById("toggleLibraryBtn");if(e&&t){const a="none"===e.style.display;e.style.display=a?"block":"none";const n=t.querySelector("i");n&&(n.className=a?"fas fa-chevron-up":"fas fa-chevron-down")}}saveCommandFromModal(){if(!this.selectedKey)return void stoUI.showToast("Please select a key first","warning");const e=stoCommands.getCurrentCommand();if(!e)return void stoUI.showToast("Please configure a command","warning");const t=stoCommands.validateCommand(e);t.valid?(this.addCommand(this.selectedKey,e),modalManager.hide("addCommandModal")):stoUI.showToast(t.error,"error")}showParameterModal(e,t,a){this.currentParameterCommand={categoryId:e,commandId:t,commandDef:a},document.getElementById("parameterModal")||this.createParameterModal(),this.populateParameterModal(a),modalManager.show("parameterModal")}createParameterModal(){const e=document.createElement("div");e.className="modal",e.id="parameterModal",e.innerHTML='\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h3 id="parameterModalTitle">Configure Command Parameters</h3>\n                    <button class="modal-close" data-modal="parameterModal">\n                        <i class="fas fa-times"></i>\n                    </button>\n                </div>\n                <div class="modal-body">\n                    <div id="parameterInputs">\n                        \x3c!-- Parameter inputs will be populated here --\x3e\n                    </div>\n                    <div class="command-preview-modal">\n                        <label>Generated Command:</label>\n                        <div class="command-preview" id="parameterCommandPreview">\n                            \x3c!-- Command preview will be shown here --\x3e\n                        </div>\n                    </div>\n                </div>\n                <div class="modal-footer">\n                    <button class="btn btn-primary" id="saveParameterCommandBtn">Add Command</button>\n                    <button class="btn btn-secondary" data-modal="parameterModal">Cancel</button>\n                </div>\n            </div>\n        ',document.body.appendChild(e),n.onDom("saveParameterCommandBtn","click","parameter-command-save",()=>{this.saveParameterCommand()}),e.querySelectorAll('.modal-close, [data-modal="parameterModal"]').forEach(e=>{e.addEventListener("click",()=>{this.cancelParameterCommand()})})}cancelParameterCommand(){this.currentParameterCommand=null;const e=document.getElementById("saveParameterCommandBtn");e&&(e.textContent=i18next.t("add_command")),modalManager.hide("parameterModal")}populateParameterModal(e){const t=document.getElementById("parameterInputs");document.getElementById("parameterModalTitle").textContent=`Configure: ${e.name}`,t.innerHTML="",Object.entries(e.parameters).forEach(([e,a])=>{const n=document.createElement("div");n.className="form-group";const i=document.createElement("label");let o;if(i.textContent=this.formatParameterName(e),i.setAttribute("for",`param_${e}`),"message"===e){const t=document.createElement("div");t.className="input-with-button",o=document.createElement("input"),o.type="text",o.id=`param_${e}`,o.name=e,o.value=a.default||"",a.placeholder&&(o.placeholder=a.placeholder);const r=document.createElement("button");r.type="button",r.className="btn btn-small insert-target-btn",r.title="Insert $Target variable",r.innerHTML='<i class="fas fa-crosshairs"></i> $Target',t.appendChild(o),t.appendChild(r);const s=document.createElement("small");s.textContent=this.getParameterHelp(e,a);const c=document.createElement("div");c.className="variable-help",c.innerHTML="<strong>$Target</strong> - Use to include your current target's name in the message",n.appendChild(i),n.appendChild(t),n.appendChild(s),n.appendChild(c)}else{"select"===a.type?(o=document.createElement("select"),o.id=`param_${e}`,o.name=e,a.options.forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent="STOTrayExecByTray"===e?"STOTrayExecByTray (shows key binding on UI)":"TrayExecByTray (no UI indication)",e===a.default&&(t.selected=!0),o.appendChild(t)})):(o=document.createElement("input"),o.type="number"===a.type?"number":"text",o.id=`param_${e}`,o.name=e,o.value=a.default||"",a.placeholder&&(o.placeholder=a.placeholder),"number"===a.type&&(void 0!==a.min&&(o.min=a.min),void 0!==a.max&&(o.max=a.max),void 0!==a.step&&(o.step=a.step)));const t=document.createElement("small");t.textContent=this.getParameterHelp(e,a),n.appendChild(i),n.appendChild(o),n.appendChild(t)}t.appendChild(n),o.addEventListener("input",()=>{this.updateParameterPreview()}),"SELECT"===o.tagName&&o.addEventListener("change",()=>{this.updateParameterPreview()})}),this.updateParameterPreview()}formatParameterName(e){return e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}getParameterHelp(e,t){return{entityName:"Name of the entity to target (e.g., ship name, player name)",active:"Whether the command is active (1 = active, 0 = inactive)",tray:"Primary tray number (0-9, where 0 is the first tray)",slot:"Primary slot number (0-9, where 0 is the first slot)",backup_tray:"Backup tray number (0-9, where 0 is the first tray)",backup_slot:"Backup slot number (0-9, where 0 is the first slot)",amount:"Throttle adjustment amount (-1 to 1)",position:"Throttle position (-1 = full reverse, 0 = stop, 1 = full forward)",distance:"Camera distance from target",filename:"Name of the keybind file (without extension)",message:"Text message to send",state:"Enable (1) or disable (0) combat log",command_type:"STOTrayExecByTray shows key binding on UI, TrayExecByTray does not"}[e]||`${t.type} value ${void 0!==t.min?`(${t.min} to ${t.max})`:""}`}updateParameterPreview(){if(!this.currentParameterCommand)return;const{categoryId:e,commandId:t,commandDef:a}=this.currentParameterCommand,n=this.getParameterValues(),i=this.buildParameterizedCommand(e,t,a,n),o=document.getElementById("parameterCommandPreview");if(o&&i)if(Array.isArray(i)){const e=i.map(e=>e.command);o.textContent=e.join(" $$ ")}else o.textContent=i.command}getParameterValues(){const e={};return document.querySelectorAll("#parameterInputs input, #parameterInputs select").forEach(t=>{const a=t.name;let n=t.value;"number"===t.type&&(n=parseFloat(n)||0),e[a]=n}),e}buildParameterizedCommand(e,t,a,n){const i={targeting:e=>"target"===t&&e.entityName?{command:`${a.command} "${e.entityName}"`,text:`Target: ${e.entityName}`}:{command:a.command,text:a.name},tray:n=>{const i=n.tray||0,o=n.slot||0;if("tray_with_backup"===t){const e=void 0!==n.active?n.active:1,t=n.backup_tray||0,a=n.backup_slot||0;return{command:`TrayExecByTrayWithBackup ${e} ${i} ${o} ${t} ${a}`,text:`Execute Tray ${i+1} Slot ${o+1} (backup: Tray ${t+1} Slot ${a+1})`}}if("tray_range"===t){const t=n.start_tray||0,i=n.start_slot||0,o=n.end_tray||0,r=n.end_slot||0,s=n.command_type||"STOTrayExecByTray";return stoCommands.generateTrayRangeCommands(t,i,o,r,s).map((n,s)=>{let c,l;try{const e=n.replace("+","").trim().split(/\s+/);c=parseInt(e[1]),l=parseInt(e[2])}catch(e){c=void 0,l=void 0}return{command:n,type:e,icon:a.icon,text:0===s?`Execute Range: Tray ${t+1} Slot ${i+1} to Tray ${o+1} Slot ${r+1}`:n,id:this.generateCommandId(),parameters:{tray:c,slot:l}}})}if("tray_range_with_backup"===t){const t=n.active||1,i=n.start_tray||0,o=n.start_slot||0,r=n.end_tray||0,s=n.end_slot||0,c=n.backup_start_tray||0,l=n.backup_start_slot||0,d=n.backup_end_tray||0,m=n.backup_end_slot||0;return stoCommands.generateTrayRangeWithBackupCommands(t,i,o,r,s,c,l,d,m).map((t,n)=>{let o,s,c,l,d;try{const e=t.trim().split(/\s+/);o=parseInt(e[1]),s=parseInt(e[2]),c=parseInt(e[3]),l=parseInt(e[4]),d=parseInt(e[5])}catch(e){}return{command:t,type:e,icon:a.icon,text:0===n?`Execute Range with Backup: Tray ${i+1}-${r+1}`:t,id:this.generateCommandId(),parameters:{active:o,tray:s,slot:c,backup_tray:l,backup_slot:d}}})}if("whole_tray"===t){const t=n.command_type||"STOTrayExecByTray";return stoCommands.generateWholeTrayCommands(i,t).map((t,n)=>{let o;try{const e=t.replace("+","").trim().split(/\s+/);o=parseInt(e[2])}catch(e){o=void 0}return{command:t,type:e,icon:a.icon,text:0===n?`Execute Whole Tray ${i+1}`:t,id:this.generateCommandId(),parameters:{tray:i,slot:o}}})}if("whole_tray_with_backup"===t){const t=n.active||1,o=n.backup_tray||0;return stoCommands.generateWholeTrayWithBackupCommands(t,i,o).map((t,n)=>{let r,s,c,l,d;try{const e=t.trim().split(/\s+/);r=parseInt(e[1]),s=parseInt(e[2]),c=parseInt(e[3]),l=parseInt(e[4]),d=parseInt(e[5])}catch(e){}return{command:t,type:e,icon:a.icon,text:0===n?`Execute Whole Tray ${i+1} (with backup Tray ${o+1})`:t,id:this.generateCommandId(),parameters:{active:r,tray:s,slot:c,backup_tray:l,backup_slot:d}}})}{const e=this.currentParameterCommand&&this.currentParameterCommand.isEditing,t=n.command_type||"STOTrayExecByTray",a="+";if(e){const e=this.getCurrentProfile().keys[this.selectedKey][this.currentParameterCommand.editIndex];if(e&&(e.command.startsWith("TrayExecByTray")||e.command.startsWith("+TrayExecByTray")))return{command:`+TrayExecByTray ${i} ${o}`,text:`Execute Tray ${i+1} Slot ${o+1}`}}return{command:`${a}${t} ${i} ${o}`,text:`Execute Tray ${i+1} Slot ${o+1}`}}},movement:e=>{let n=a.command;return"throttle_adjust"===t&&void 0!==e.amount?n=`${a.command} ${e.amount}`:"throttle_set"===t&&void 0!==e.position&&(n=`${a.command} ${e.position}`),{command:n,text:a.name}},camera:e=>{let n=a.command;return"cam_distance"===t&&void 0!==e.distance&&(n=`${a.command} ${e.distance}`),{command:n,text:a.name}},communication:e=>({command:`${a.command} ${e.message||"Message text here"}`,text:`${a.name}: ${e.message||"Message text here"}`}),system:e=>{let n=a.command;return"bind_save_file"!==t&&"bind_load_file"!==t||!e.filename?"combat_log"===t&&void 0!==e.state&&(n=`${a.command} ${e.state}`):n=`${a.command} ${e.filename}`,{command:n,text:a.name}}},o=i[e];if(o){const t=o(n);return Array.isArray(t)?t:{command:t.command,type:e,icon:a.icon,text:t.text,id:this.generateCommandId(),parameters:n}}return null}saveParameterCommand(){if(!this.selectedKey||!this.currentParameterCommand)return;const{categoryId:e,commandId:t,commandDef:a,editIndex:n,isEditing:i}=this.currentParameterCommand,o=this.getParameterValues(),r=this.buildParameterizedCommand(e,t,a,o);if(r){if(i&&void 0!==n)if(Array.isArray(r)){const e=this.getCurrentProfile();e.keys[this.selectedKey].splice(n,1,...r),stoStorage.saveProfile(this.currentProfile,e),this.renderCommandChain(),this.setModified(!0),stoUI.showToast(`${r.length} commands updated successfully`,"success")}else{const e=this.getCurrentProfile();e.keys[this.selectedKey][n]=r,stoStorage.saveProfile(this.currentProfile,e),this.renderCommandChain(),this.setModified(!0),stoUI.showToast("Command updated successfully","success")}else this.addCommand(this.selectedKey,r);modalManager.hide("parameterModal"),this.currentParameterCommand=null,document.getElementById("saveParameterCommandBtn").textContent=i18next.t("add_command")}}editCommand(e){if(!this.selectedKey)return;const t=this.getCurrentProfile().keys[this.selectedKey];if(!t||!t[e])return;const a=t[e];if(a.parameters&&a.type){const t=this.findCommandDefinition(a);if(t&&t.customizable)return void this.editParameterizedCommand(e,a,t)}const n=this.findCommandDefinition(a);n&&n.customizable?this.editParameterizedCommand(e,a,n):stoUI.showToast(`Command: ${a.command}\nType: ${a.type}`,"info",3e3)}findCommandDefinition(e){if(e.command.includes("TrayExec")){const t=STO_DATA.commands.tray;if(t)if(e.command.includes("TrayExecByTrayWithBackup")&&e.command.includes("$$")){if(e.command.split("$$").map(e=>e.trim()).length>1){const e=t.commands.tray_range_with_backup;if(e)return{commandId:"tray_range_with_backup",...e}}}else if((e.command.includes("STOTrayExecByTray")||e.command.includes("TrayExecByTray"))&&e.command.includes("$$")&&!e.command.includes("WithBackup")){if(e.command.split("$$").map(e=>e.trim()).length>1){const e=t.commands.tray_range;if(e)return{commandId:"tray_range",...e}}}else if(e.command.includes("TrayExecByTrayWithBackup")){const e=t.commands.tray_with_backup;if(e)return{commandId:"tray_with_backup",...e}}else if(e.command.includes("STOTrayExecByTray")||e.command.includes("TrayExecByTray")&&!e.command.includes("WithBackup")){const e=t.commands.custom_tray;if(e)return{commandId:"custom_tray",...e}}}const t=STO_DATA.commands[e.type];if(!t)return null;for(const[a,n]of Object.entries(t.commands))if(n.command===e.command)return{commandId:a,...n};for(const[a,n]of Object.entries(t.commands))if(n.customizable&&e.command.startsWith(n.command.split(" ")[0]))return{commandId:a,...n};return null}editParameterizedCommand(e,t,a){this.currentParameterCommand={categoryId:t.type,commandId:a.commandId,commandDef:a,editIndex:e,isEditing:!0},document.getElementById("parameterModal")||this.createParameterModal(),this.populateParameterModalForEdit(a,t.parameters),document.getElementById("parameterModalTitle").textContent=`Edit: ${a.name}`,document.getElementById("saveParameterCommandBtn").textContent="Update Command",modalManager.show("parameterModal")}populateParameterModalForEdit(e,t){const a=document.getElementById("parameterInputs");a.innerHTML="",Object.entries(e.parameters).forEach(([e,n])=>{const i=document.createElement("div");i.className="form-group";const o=document.createElement("label");let r;if(o.textContent=this.formatParameterName(e),o.setAttribute("for",`param_${e}`),"select"===n.type){r=document.createElement("select"),r.id=`param_${e}`,r.name=e,n.options.forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent="STOTrayExecByTray"===e?"STOTrayExecByTray (shows key binding on UI)":"TrayExecByTray (no UI indication)",r.appendChild(t)});const a=t&&void 0!==t[e]?t[e]:n.default;r.value=null!=a?a:n.default}else{r=document.createElement("input"),r.type="number"===n.type?"number":"text",r.id=`param_${e}`,r.name=e;const a=t&&void 0!==t[e]?t[e]:n.default;r.value=null!=a?a:"",n.placeholder&&(r.placeholder=n.placeholder),"number"===n.type&&(void 0!==n.min&&(r.min=n.min),void 0!==n.max&&(r.max=n.max),void 0!==n.step&&(r.step=n.step))}const s=document.createElement("small");s.textContent=this.getParameterHelp(e,n),i.appendChild(o),i.appendChild(r),i.appendChild(s),a.appendChild(i),r.addEventListener("input",()=>{this.updateParameterPreview()}),"SELECT"===r.tagName&&r.addEventListener("change",()=>{this.updateParameterPreview()})}),this.updateParameterPreview()}filterCommandLibrary(){document.querySelectorAll(".command-item").forEach(e=>{const t=e.dataset.command;if(!t)return;let a=null;for(const[e,n]of Object.entries(STO_DATA.commands))if(n.commands[t]){a=n.commands[t];break}if(a){let t=!0;t=!a.environment||a.environment===this.currentEnvironment,e.style.display=t?"flex":"none"}}),document.querySelectorAll(".category").forEach(e=>{const t=e.querySelectorAll('.command-item:not([style*="display: none"])').length>0;e.style.display=t?"block":"none"})}showKeySelectionModal(){this.setupKeySelectionModal(),modalManager.show("keySelectionModal")}setupKeySelectionModal(){this.populateCommonKeys();const e=document.getElementById("findOtherKeysBtn");e&&(e.onclick=()=>this.showFullKeyList());const t=document.getElementById("keySearchInput");t&&(t.oninput=e=>this.filterKeyList(e.target.value))}populateCommonKeys(){const e=document.getElementById("commonKeysGrid");if(!e)return;const t=STO_DATA.keys.common.keys;e.innerHTML="",t.forEach(t=>{const a=document.createElement("div");a.className="key-button",a.onclick=()=>this.selectKeyFromModal(t.key),a.innerHTML=`\n                <div class="key-name">${t.key}</div>\n                <div class="key-desc">${t.description}</div>\n            `,e.appendChild(a)})}showFullKeyList(){const e=document.getElementById("fullKeysSection"),t=document.getElementById("findOtherKeysBtn");e&&t&&(e.style.display="block",t.style.display="none",this.populateKeyCategories())}populateKeyCategories(){const e=document.getElementById("keyCategories");e&&(e.innerHTML="",Object.entries(STO_DATA.keys).forEach(([t,a])=>{if("common"===t)return;if(console.log("Processing category:",t,a),!a||!a.name||!a.keys)return void console.warn(`Invalid category data for categoryId: ${t}`,a);const n=document.createElement("div");n.className="key-category";const i=document.createElement("div");i.className="key-category-header",i.onclick=()=>this.toggleKeySelectionCategory(t),i.innerHTML=`\n                <div>\n                    <h5>${a.name}</h5>\n                    <div class="category-desc">${a.description||""}</div>\n                </div>\n                <i class="fas fa-chevron-right category-chevron"></i>\n            `;const o=document.createElement("div");o.className="key-category-content collapsed",o.id=`key-category-${t}`,Array.isArray(a.keys)&&a.keys.forEach(e=>{if(e&&e.key){const t=document.createElement("div");t.className="key-button",t.onclick=()=>this.selectKeyFromModal(e.key),t.innerHTML=`\n                            <div class="key-name">${e.key}</div>\n                            <div class="key-desc">${e.description||""}</div>\n                        `,o.appendChild(t)}}),n.appendChild(i),n.appendChild(o),e.appendChild(n)}))}toggleKeySelectionCategory(e){const t=document.getElementById(`key-category-${e}`);if(!t)return void console.warn(`Key selection category content not found for categoryId: ${e}`);const a=t.previousElementSibling;if(t&&a)if(t.classList.contains("collapsed")){t.classList.remove("collapsed"),a.classList.remove("collapsed");const e=a.querySelector(".category-chevron");e&&(e.style.transform="rotate(90deg)")}else{t.classList.add("collapsed"),a.classList.add("collapsed");const e=a.querySelector(".category-chevron");e&&(e.style.transform="rotate(0deg)")}}filterKeyList(e){const t=e.toLowerCase().trim();document.querySelectorAll("#keyCategories .key-button").forEach(e=>{const a=e.querySelector(".key-name").textContent.toLowerCase(),n=e.querySelector(".key-desc").textContent.toLowerCase(),i=a.includes(t)||n.includes(t);e.style.display=i?"flex":"none"}),document.querySelectorAll(".key-category").forEach(e=>{const a=e.querySelectorAll('.key-button:not([style*="display: none"])').length>0;if(""===t)e.style.display="block";else if(e.style.display=a?"block":"none",a){const t=e.querySelector(".key-category-content"),a=e.querySelector(".key-category-header");t&&a&&(t.classList.remove("collapsed"),a.classList.remove("collapsed"))}})}selectKeyFromModal(e){modalManager.hide("keySelectionModal"),this.selectKey(e)}insertTargetVariable(e){const t=e.selectionStart,a=e.value,n=a.slice(0,t)+"$Target"+a.slice(t);e.value=n,e.setSelectionRange(t+7,t+7),e.focus(),e.dispatchEvent(new Event("input",{bubbles:!0}))}showVertigoModal(){const e=stoStorage.getProfile(this.currentProfile);e&&vertigoManager.loadState(e),this.vertigoInitialState={selectedEffects:{space:new Set(vertigoManager.selectedEffects.space),ground:new Set(vertigoManager.selectedEffects.ground)},showPlayerSay:vertigoManager.showPlayerSay},this.populateVertigoModal(),this.setupVertigoEventListeners(),modalManager.show("vertigoModal")}populateVertigoModal(){const e=document.getElementById("spaceEffectsList");e&&(e.innerHTML="",VFX_EFFECTS.space.forEach(t=>{const a=this.createEffectItem("space",t);e.appendChild(a)}));const t=document.getElementById("groundEffectsList");t&&(t.innerHTML="",VFX_EFFECTS.ground.forEach(e=>{const a=this.createEffectItem("ground",e);t.appendChild(a)})),this.updateVertigoCheckboxes("space"),this.updateVertigoCheckboxes("ground");const a=document.getElementById("vertigoShowPlayerSay");a&&(a.checked=vertigoManager.showPlayerSay),this.updateVertigoEffectCounts(),this.updateVertigoPreview()}createEffectItem(e,t){const a=document.createElement("div");a.className="effect-item",a.innerHTML=`\n            <input type="checkbox" id="effect_${e}_${t.effect.replace(/[^a-zA-Z0-9]/g,"_")}" \n                   data-environment="${e}" \n                   data-effect="${t.effect}">\n            <label for="effect_${e}_${t.effect.replace(/[^a-zA-Z0-9]/g,"_")}" \n                   class="effect-label">${t.label}</label>\n        `;const n=a.querySelector('input[type="checkbox"]');return n.addEventListener("change",()=>{vertigoManager.toggleEffect(e,t.effect),this.updateVertigoEffectCounts(),this.updateVertigoPreview(),a.classList.toggle("selected",n.checked)}),a.querySelector(".effect-label").addEventListener("click",()=>{n.checked=!n.checked,n.dispatchEvent(new Event("change"))}),a}setupVertigoEventListeners(){["spaceSelectAll","spaceClearAll","groundSelectAll","groundClearAll","vertigoShowPlayerSay","saveVertigoBtn"].forEach(e=>{const t=document.getElementById(e);t&&t.replaceWith(t.cloneNode(!0))}),n.onDom("spaceSelectAll","click","vertigo-space-select-all",()=>{try{vertigoManager.selectAllEffects("space"),this.updateVertigoCheckboxes("space"),this.updateVertigoEffectCounts(),this.updateVertigoPreview()}catch(e){e instanceof InvalidEnvironmentError?stoUI.showToast(`Error: ${e.message}`,"error"):(stoUI.showToast("Failed to select all space effects","error"),console.error("Error selecting all space effects:",e))}}),n.onDom("spaceClearAll","click","vertigo-space-clear-all",()=>{vertigoManager.selectedEffects.space.clear(),this.updateVertigoCheckboxes("space"),this.updateVertigoEffectCounts(),this.updateVertigoPreview()}),n.onDom("groundSelectAll","click","vertigo-ground-select-all",()=>{try{vertigoManager.selectAllEffects("ground"),this.updateVertigoCheckboxes("ground"),this.updateVertigoEffectCounts(),this.updateVertigoPreview()}catch(e){e instanceof InvalidEnvironmentError?stoUI.showToast(`Error: ${e.message}`,"error"):(stoUI.showToast("Failed to select all ground effects","error"),console.error("Error selecting all ground effects:",e))}}),n.onDom("groundClearAll","click","vertigo-ground-clear-all",()=>{vertigoManager.selectedEffects.ground.clear(),this.updateVertigoCheckboxes("ground"),this.updateVertigoEffectCounts(),this.updateVertigoPreview()}),n.onDom("vertigoShowPlayerSay","change","vertigo-show-playersay",e=>{vertigoManager.showPlayerSay=e.target.checked,this.updateVertigoPreview()}),n.onDom("saveVertigoBtn","click","vertigo-save",()=>{this.generateVertigoAliases()})}updateVertigoCheckboxes(e){document.querySelectorAll(`input[data-environment="${e}"]`).forEach(t=>{const a=t.dataset.effect,n=vertigoManager.isEffectSelected(e,a);t.checked=n,t.closest(".effect-item").classList.toggle("selected",n)})}updateVertigoEffectCounts(){const e=vertigoManager.getEffectCount("space"),t=vertigoManager.getEffectCount("ground"),a=document.getElementById("spaceEffectCount"),n=document.getElementById("groundEffectCount");a&&(a.textContent=`${e} selected`),n&&(n.textContent=`${t} selected`)}updateVertigoPreview(){const e=document.getElementById("spaceAliasCommand"),t=document.getElementById("groundAliasCommand");if(e)try{const t=vertigoManager.generateAlias("space");e.textContent=t||"No space effects selected"}catch(t){t instanceof InvalidEnvironmentError?(e.textContent="Error: Invalid environment",stoUI.showToast(`Space preview error: ${t.message}`,"error")):(e.textContent="Error generating preview",console.error("Error generating space alias preview:",t))}if(t)try{const e=vertigoManager.generateAlias("ground");t.textContent=e||"No ground effects selected"}catch(e){e instanceof InvalidEnvironmentError?(t.textContent="Error: Invalid environment",stoUI.showToast(`Ground preview error: ${e.message}`,"error")):(t.textContent="Error generating preview",console.error("Error generating ground alias preview:",e))}}generateVertigoAliases(){let e="",t="";try{e=vertigoManager.generateAlias("space")}catch(e){return e instanceof InvalidEnvironmentError?void stoUI.showToast(`Space alias error: ${e.message}`,"error"):(stoUI.showToast("Failed to generate space alias","error"),void console.error("Error generating space alias:",e))}try{t=vertigoManager.generateAlias("ground")}catch(e){return e instanceof InvalidEnvironmentError?void stoUI.showToast(`Ground alias error: ${e.message}`,"error"):(stoUI.showToast("Failed to generate ground alias","error"),void console.error("Error generating ground alias:",e))}if(!e&&!t)return void stoUI.showToast("No effects selected. Please select at least one effect to generate aliases.","warning");if(!this.getCurrentProfile())return void stoUI.showToast("No profile selected","error");const a=stoStorage.getProfile(this.currentProfile);if(!a)return void stoUI.showToast("No profile found","error");let n=0;if(a.aliases||(a.aliases={}),e){const t="dynFxSetFXExlusionList_Space",i=e.match(/alias\s+\w+\s+<&\s+(.+?)&>/),o=i?i[1]:"";a.aliases[t]={name:t,description:"VFX - Disable Space Visual Effects",commands:o,created:(new Date).toISOString(),lastModified:(new Date).toISOString()},n++}if(t){const e="dynFxSetFXExlusionList_Ground",i=t.match(/alias\s+\w+\s+<&\s+(.+?)&>/),o=i?i[1]:"";a.aliases[e]={name:e,description:"VFX - Disable Ground Visual Effects",commands:o,created:(new Date).toISOString(),lastModified:(new Date).toISOString()},n++}vertigoManager.saveState(a),stoStorage.saveProfile(this.currentProfile,a),this.saveProfile(),this.setModified(!0),"undefined"!=typeof stoAliases&&stoAliases.updateCommandLibrary&&stoAliases.updateCommandLibrary(),this.vertigoInitialState={selectedEffects:{space:new Set(vertigoManager.selectedEffects.space),ground:new Set(vertigoManager.selectedEffects.ground)},showPlayerSay:vertigoManager.showPlayerSay},this.vertigoSaving=!0,modalManager.hide("vertigoModal"),stoUI.showToast(`Generated ${n} Vertigo alias${n>1?"es":""}! Check the Alias Manager to bind them to keys.`,"success")}applyTheme(){const e=stoStorage.getSettings().theme||"default";"dark"===e?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.removeAttribute("data-theme"),this.updateThemeToggleButton(e)}toggleTheme(){const e=stoStorage.getSettings(),t="dark"===(e.theme||"default")?"default":"dark";e.theme=t,stoStorage.saveSettings(e),this.applyTheme();const a="dark"===t?"Dark Mode":"Light Mode";stoUI.showToast(`Switched to ${a}`,"success")}updateThemeToggleButton(e){const t=document.getElementById("themeToggleBtn"),a=document.getElementById("themeToggleText"),n=t?.querySelector("i");t&&a&&n&&("dark"===e?(n.className="fas fa-sun",a.textContent="Light Mode"):(n.className="fas fa-moon",a.textContent="Dark Mode"))}async applyLanguage(){const e=stoStorage.getSettings().language||"en";"undefined"!=typeof i18next&&i18next.language!==e&&await i18next.changeLanguage(e),"function"==typeof applyTranslations&&applyTranslations();const t=document.getElementById("languageFlag");t&&(t.className={en:"fi fi-gb",de:"fi fi-de",es:"fi fi-es",fr:"fi fi-fr"}[e]||"fi fi-gb")}async changeLanguage(e){const t=stoStorage.getSettings();t.language=e,stoStorage.saveSettings(t),await this.applyLanguage(),window.localizeCommandData&&window.localizeCommandData(),this.renderProfiles(),this.renderKeyGrid(),this.renderCommandChain(),this.setupCommandLibrary&&this.setupCommandLibrary(),"undefined"!=typeof stoExport&&stoExport.init&&stoExport.init(),stoUI.showToast("Language updated","success")}};window.app=be,n.on("sto-app-ready",()=>{le.init(),de.init(),me.init(),ue.init(),he.init()});
//# sourceMappingURL=bundle.js.map
