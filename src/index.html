<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="sto_tools_keybind_manager"></title>
    <meta
      name="description"
      content="Star Trek Online Keybind Manager - Create, edit, and export keybind configurations"
    />
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.3.2/css/flag-icons.min.css"
    />
  </head>
  <body>
    <div class="app-container">
      <!-- Header -->
      <header class="app-header">
        <div class="header-left">
          <h1>
            <a
              href="https://sto-tools.org/"
              target="_blank"
              rel="noopener noreferrer"
              ><img
                src="img/delta_64x64.png"
                alt="STO Tools Logo"
                class="app-logo"
            /></a>
            <span data-i18n="sto_tools_keybind_manager"></span>
          </h1>
          <span class="version" id="appVersion"></span>
        </div>
        <div class="header-right">
          <div class="dropdown">
            <button
              class="btn btn-secondary dropdown-toggle"
              id="backupMenuBtn"
              data-i18n-title="backup_menu"
            >
              <i class="fas fa-save"></i>
              <span data-i18n="backup"></span>
            </button>
            <div class="dropdown-menu" id="backupMenu">
              <button class="dropdown-item" id="saveProjectBtn" data-i18n-title="backup_application_state">
                <i class="fas fa-download"></i>
                <span data-i18n="backup_application_state"></span>
              </button>
              <button class="dropdown-item" id="openProjectBtn" data-i18n-title="restore_application_state">
                <i class="fas fa-upload"></i>
                <span data-i18n="restore_application_state"></span>
              </button>
            </div>
          </div>
          <button
            class="btn btn-secondary"
            id="fileExplorerBtn"
            data-i18n-title="file_explorer"
          >
            <i class="fas fa-sitemap"></i>
            <span data-i18n="explorer"></span>
          </button>
          <div class="dropdown">
            <button
              class="btn btn-secondary dropdown-toggle"
              id="importMenuBtn"
              data-i18n-title="import"
            >
              <i class="fas fa-file-import"></i>
              <span data-i18n="import"></span>
            </button>
            <div class="dropdown-menu" id="importMenu">
              <button class="dropdown-item" id="importKeybindsBtn">
                <i class="fas fa-keyboard"></i>
                <span data-i18n="import_keybinds"></span>
              </button>
              <button class="dropdown-item" id="importAliasesBtn">
                <i class="fas fa-mask"></i>
                <span data-i18n="import_aliases"></span>
              </button>
            </div>
          </div>
          <button class="btn btn-secondary" id="vertigoBtn" data-i18n-title="vfx_manager">
            <i class="fas fa-eye-slash"></i>
            <span data-i18n="vfx"></span>
          </button>
          <button class="btn btn-secondary" id="syncNowBtn" data-i18n-title="sync_now">
            <i class="fas fa-sync"></i>
            <span data-i18n="sync_now"></span>
          </button>
          <div class="dropdown language-select">
            <button class="btn btn-icon dropdown-toggle" id="languageMenuBtn" data-i18n-title="language">
              <span id="languageFlag" class="fi fi-gb"></span>
            </button>
            <div class="dropdown-menu" id="languageMenu">
              <button class="dropdown-item language-option" data-lang="en">
                <span class="fi fi-gb"></span>
                <span>English</span>
              </button>
              <button class="dropdown-item language-option" data-lang="de">
                <span class="fi fi-de"></span>
                <span>Deutsch</span>
              </button>
              <button class="dropdown-item language-option" data-lang="es">
                <span class="fi fi-es"></span>
                <span>Español</span>
              </button>
              <button class="dropdown-item language-option" data-lang="fr">
                <span class="fi fi-fr"></span>
                <span>Français</span>
              </button>
            </div>
          </div>
          <div class="dropdown">
            <button
              class="btn btn-icon dropdown-toggle"
              id="settingsBtn"
              data-i18n-title="settings"
            >
              <i class="fas fa-cog"></i>
            </button>
            <div class="dropdown-menu" id="settingsMenu">
              <button class="dropdown-item" id="preferencesBtn">
                <i class="fas fa-sliders-h"></i>
                <span data-i18n="preferences"></span>
              </button>
              <button class="dropdown-item" id="themeToggleBtn">
                <i class="fas fa-moon"></i>
                <span id="themeToggleText" data-i18n="dark_mode"></span>
              </button>
              <button class="dropdown-item" id="loadDefaultDataBtn">
                <i class="fas fa-download"></i>
                <span data-i18n="load_default_data"></span>
              </button>
              <button class="dropdown-item" id="resetAppBtn">
                <i class="fas fa-refresh"></i>
                <span data-i18n="reset_application"></span>
              </button>
              <button class="dropdown-item" id="aboutBtn">
                <i class="fas fa-info-circle"></i>
                <span data-i18n="about"></span>
              </button>
            </div>
          </div>
        </div>
      </header>

      <!-- Profile Bar -->
      <div class="profile-bar">
        <div class="profile-selector">
          <i class="fas fa-clipboard-list"></i>
          <select id="profileSelect" data-i18n-title="select_profile">
            <!-- Profiles populated by JavaScript -->
          </select>
          <div class="profile-actions">
            <button class="btn-small" id="newProfileBtn" data-i18n-title="new_profile">
              <i class="fas fa-plus"></i>
              <span data-i18n="new"></span>
            </button>
            <button
              class="btn-small"
              id="cloneProfileBtn"
              data-i18n-title="clone_profile"
            >
              <i class="fas fa-copy"></i>
              <span data-i18n="clone"></span>
            </button>
            <button
              class="btn-small"
              id="renameProfileBtn"
              data-i18n-title="rename_profile"
            >
              <i class="fas fa-edit"></i>
              <span data-i18n="rename"></span>
            </button>
            <button
              class="btn-small btn-danger"
              id="deleteProfileBtn"
              data-i18n-title="delete_profile"
            >
              <i class="fas fa-trash"></i>
              <span data-i18n="delete"></span>
            </button>
          </div>
        </div>
        <div class="profile-info">
          <div class="mode-toggle">
            <button
              class="mode-btn active"
              data-mode="space"
              data-i18n-title="space_mode"
            >
              <i class="fas fa-rocket"></i>
              <span data-i18n="space"></span>
            </button>
            <button class="mode-btn" data-mode="ground" data-i18n-title="ground_mode">
              <i class="fas fa-user"></i>
              <span data-i18n="ground"></span>
            </button>
          </div>
          <div class="status-indicators">
            <span
              class="modified-indicator"
              id="modifiedIndicator"
              style="display: none"
              data-i18n-title="unsaved_changes"
            >
              <i class="fas fa-circle"></i>
              <span data-i18n="modified"></span>
            </span>
            <span
              class="status-indicator"
              id="statusIndicator"
              data-i18n-title="validation_status"
            >
              <i class="fas fa-check-circle"></i>
              <span data-i18n="valid"></span>
            </span>
            <span class="key-count" id="keyCount" data-i18n-title="bound_keys">
              0 keys
            </span>
          </div>
        </div>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <!-- Key Selector -->
        <div class="key-selector-container">
          <div class="key-selector-header">
            <h3 data-i18n="keys"></h3>
            <div class="key-controls">
              <div class="key-filter">
                <input
                  type="text"
                  id="keyFilter"
                  data-i18n-placeholder="filter_keys"
                />
                <button class="btn btn-small" id="showAllKeysBtn">
                  <i class="fas fa-eye"></i>
                  <span data-i18n="all"></span>
                </button>
              </div>
              <div class="view-toggle">
                <button
                  class="btn btn-small"
                  id="toggleKeyViewBtn"
                  data-i18n-title="toggle_between_grid_and_categorized_view"
                >
                  <i class="fas fa-list"></i>
                </button>
              </div>
            </div>
          </div>
          <div class="key-selector">
            <div class="key-grid" id="keyGrid">
              <!-- Keys populated by JavaScript -->
            </div>
            <div class="key-actions">
              <button class="btn btn-small btn-primary" id="addKeyBtn">
                <i class="fas fa-plus"></i>
                <span data-i18n="add_key"></span>
              </button>
              <button
                class="btn btn-small btn-danger"
                id="deleteKeyBtn"
                disabled
              >
                <i class="fas fa-trash"></i>
                <span data-i18n="delete"></span>
              </button>
              <button class="btn btn-small" id="duplicateKeyBtn" disabled>
                <i class="fas fa-copy"></i>
                <span data-i18n="copy"></span>
              </button>
            </div>
          </div>
        </div>

        <!-- Command Chain Editor -->
        <div class="command-chain-container">
          <div class="chain-header">
            <h3 id="chainTitle" data-i18n="select_a_key_to_edit"></h3>
            <div class="chain-info">
              <span class="command-count" id="commandCount">0 <span data-i18n="commands"></span></span>
              <div class="chain-options">
                <label
                  class="checkbox-label"
                  data-i18n-title="ensures_consistent_execution_order_by_mirroring_commands_phase_1_left_to_right_phase_2_right_to_left"
                >
                  <input type="checkbox" id="stabilizeExecutionOrder" />
                  <span class="checkmark"></span>
                  <span data-i18n="stabilize_execution_order"></span>
                </label>
              </div>
            </div>
            <div class="chain-actions">
              <button
                class="btn btn-small"
                id="validateChainBtn"
                data-i18n-title="validate_command_chain"
              >
                <i class="fas fa-check"></i>
                <span data-i18n="validate"></span>
              </button>
              <button
                class="btn btn-small btn-danger"
                id="clearChainBtn"
                data-i18n-title="clear_all_commands"
              >
                <i class="fas fa-trash"></i>
                <span data-i18n="clear"></span>
              </button>
            </div>
          </div>

          <div class="command-list-container">
            <div class="command-list" id="commandList">
              <div class="empty-state" id="emptyState">
                <i class="fas fa-keyboard"></i>
                <h4 data-i18n="no_key_selected"></h4>
                <p data-i18n="select_a_key_from_the_left_panel_to_view_and_edit_its_command_chain"></p>
              </div>
            </div>
          </div>

          <div class="generated-command">
            <div class="command-preview-header">
              <label data-i18n="generated_command"></label>
              <button
                class="btn btn-small"
                id="copyPreviewBtn"
                data-i18n-title="copy_to_clipboard"
              >
                <i class="fas fa-copy"></i>
              </button>
            </div>
            <div class="command-preview" id="commandPreview" data-i18n="select_a_key_to_see_the_generated_command"></div>
          </div>

          <div class="chain-bottom-actions">
            <button class="btn btn-primary" id="addCommandBtn" disabled>
              <i class="fas fa-plus"></i>
              <span data-i18n="add_command"></span>
            </button>
            <button class="btn btn-secondary" id="addFromTemplateBtn" disabled>
              <i class="fas fa-list"></i>
              <span data-i18n="from_template"></span>
            </button>
            <button class="btn btn-secondary" id="addAliasBtn">
              <i class="fas fa-mask"></i>
              <span data-i18n="add_alias"></span>
            </button>
            <button class="btn btn-secondary" id="importFromKeyBtn" disabled>
              <i class="fas fa-copy"></i>
              <span data-i18n="copy_from_key"></span>
            </button>
          </div>
        </div>

        <!-- Command Library -->
        <div class="command-library">
          <div class="library-header">
            <h3 data-i18n="command_library"></h3>
            <div class="library-controls">
              <div class="library-search">
                <input
                  type="text"
                  id="commandSearch"
                  data-i18n-placeholder="search_commands"
                />
                <button class="btn btn-icon">
                  <i class="fas fa-search"></i>
                </button>
              </div>
              <button
                class="btn btn-small"
                id="toggleLibraryBtn"
                data-i18n-title="collapse_expand"
              >
                <i class="fas fa-chevron-up"></i>
              </button>
            </div>
          </div>

          <div class="library-content" id="libraryContent">
            <div class="command-categories" id="commandCategories">
              <!-- Categories populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>

      <!-- Toast Notifications -->
      <div class="toast-container" id="toastContainer"></div>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="modalOverlay"></div>

    <!-- Add Key Modal -->
    <div class="modal" id="addKeyModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="add_new_key"></h3>
          <button class="modal-close" data-modal="addKeyModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="newKeyName" data-i18n="key_name"></label>
            <input
              type="text"
              id="newKeyName"
              data-i18n-placeholder="e_g_f5_ctrl_a_shift_1"
              autocomplete="off"
            />
            <small data-i18n="use_standard_key_names_like_f1_ctrl_a_shift_space_etc"></small>
          </div>
          <div class="common-keys">
            <h4 data-i18n="common_keys"></h4>
            <div class="key-suggestions">
              <button class="key-suggestion" data-key="F5">F5</button>
              <button class="key-suggestion" data-key="F6">F6</button>
              <button class="key-suggestion" data-key="F7">F7</button>
              <button class="key-suggestion" data-key="F8">F8</button>
              <button class="key-suggestion" data-key="Ctrl+1">Ctrl+1</button>
              <button class="key-suggestion" data-key="Ctrl+2">Ctrl+2</button>
              <button class="key-suggestion" data-key="Alt+1">Alt+1</button>
              <button class="key-suggestion" data-key="Shift+Space">
                Shift+Space
              </button>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="confirmAddKeyBtn" data-i18n="add_key"></button>
          <button class="btn btn-secondary" data-modal="addKeyModal" data-i18n="cancel"></button>
        </div>
      </div>
    </div>

    <!-- Add Command Modal -->
    <div class="modal" id="addCommandModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="add_command"></h3>
          <button class="modal-close" data-modal="addCommandModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="commandType" data-i18n="command_type"></label>
            <select id="commandType">
              <option value="" data-i18n="select_command_type"></option>
              <option value="targeting" data-i18n="targeting"></option>
              <option value="combat" data-i18n="combat"></option>
              <option value="tray" data-i18n="tray_execution"></option>
              <option value="power" data-i18n="shield_management"></option>
              <option value="movement" data-i18n="movement"></option>
              <option value="camera" data-i18n="camera"></option>
              <option value="communication" data-i18n="communication"></option>
              <option value="system" data-i18n="system"></option>
              <option value="alias" data-i18n="alias"></option>
              <option value="custom" data-i18n="custom_command"></option>
            </select>
          </div>

          <div class="command-builder" id="commandBuilder">
            <!-- Command builder content populated by JavaScript -->
          </div>

          <div class="command-preview-modal">
            <label data-i18n="generated_command"></label>
            <div class="command-preview" id="modalCommandPreview" data-i18n="select_a_command_type_to_see_preview"></div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="saveCommandBtn" disabled data-i18n="add_command"></button>
          <button class="btn btn-secondary" data-modal="addCommandModal" data-i18n="cancel"></button>
        </div>
      </div>
    </div>

    <!-- Profile Modal -->
    <div class="modal" id="profileModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="profileModalTitle" data-i18n="profile"></h3>
          <button class="modal-close" data-modal="profileModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="profileName" data-i18n="profile_name"></label>
            <input
              type="text"
              id="profileName"
              data-i18n-placeholder="enter_profile_name"
              autocomplete="off"
            />
          </div>
          <div class="form-group">
            <label for="profileDescription" data-i18n="description_optional"></label>
            <textarea
              id="profileDescription"
              data-i18n-placeholder="describe_this_keybind_profile"
              rows="3"
            ></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="saveProfileBtn" data-i18n="save"></button>
          <button class="btn btn-secondary" data-modal="profileModal" data-i18n="cancel"></button>
        </div>
      </div>
    </div>

    <!-- Alias Manager Modal -->
    <div class="modal large-modal" id="aliasManagerModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="command_alias_manager"></h3>
          <button class="modal-close" data-modal="aliasManagerModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="alias-manager-content">
            <div class="alias-list" id="aliasList">
              <!-- Aliases populated by JavaScript -->
            </div>
            <div class="alias-actions">
              <button class="btn btn-primary" id="newAliasBtn">
                <i class="fas fa-plus"></i>
                <span data-i18n="new_alias"></span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Alias Modal -->
    <div class="modal" id="editAliasModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="editAliasTitle" data-i18n="edit_alias"></h3>
          <button class="modal-close" data-modal="editAliasModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="aliasName" data-i18n="alias_name"></label>
            <input
              type="text"
              id="aliasName"
              data-i18n-placeholder="myalias"
              autocomplete="off"
            />
            <small data-i18n="use_alphanumeric_characters_only_no_spaces"></small>
          </div>
          <div class="form-group">
            <label for="aliasDescription" data-i18n="description"></label>
            <input
              type="text"
              id="aliasDescription"
              data-i18n-placeholder="brief_description_of_what_this_alias_does"
              autocomplete="off"
            />
          </div>
          <div class="form-group">
            <label for="aliasCommands" data-i18n="commands"></label>
            <div class="textarea-with-button">
              <textarea
                id="aliasCommands"
                data-i18n-placeholder="enter_command_sequence_use_to_separate_commands"
                rows="4"
              ></textarea>
              <button
                type="button"
                class="btn btn-small insert-target-btn"
                data-i18n-title="insert_target_variable"
              >
                <i class="fas fa-crosshairs"></i> <span data-i18n="target"></span>
              </button>
            </div>
            <small data-i18n="example_target_self_power_exec_science_team_team_healing_target"></small>
            <div class="variable-help">
              <strong>$Target</strong> <span data-i18n="use_in_communication_commands_to_include_target_name"></span>
            </div>
          </div>
          <div class="alias-preview">
            <label data-i18n="preview"></label>
            <div class="command-preview" id="aliasPreview" data-i18n="alias_myalias_command_sequence"></div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="saveAliasBtn" data-i18n="save_alias"></button>
          <button class="btn btn-secondary" data-modal="editAliasModal" data-i18n="cancel"></button>
        </div>
      </div>
    </div>

    <!-- Key Selection Modal -->
    <div class="modal large-modal" id="keySelectionModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Select Key</h3>
          <button class="modal-close" data-modal="keySelectionModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="key-selection-content">
            <!-- Common Keys Section -->
            <div class="common-keys-section">
              <h4>Common Keys</h4>
              <div class="common-keys-grid" id="commonKeysGrid">
                <!-- Populated by JavaScript -->
              </div>
            </div>

            <!-- Find Other Keys Button -->
            <div class="find-keys-section">
              <button class="btn btn-outline" id="findOtherKeysBtn">
                <i class="fas fa-search"></i> Find other keys...
              </button>
            </div>

            <!-- Full Key List (initially hidden) -->
            <div
              class="full-keys-section"
              id="fullKeysSection"
              style="display: none"
            >
              <div class="key-search">
                <input
                  type="text"
                  id="keySearchInput"
                  placeholder="Search keys..."
                  autocomplete="off"
                />
              </div>
              <div class="key-categories" id="keyCategories">
                <!-- Populated by JavaScript -->
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-modal="keySelectionModal">
            Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal large-modal" id="vertigoModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>VFX Manager</h3>
          <button class="modal-close" data-modal="vertigoModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="vertigo-content">
            <div class="vertigo-header">
              <p>
                Select visual effects to disable using dynFxSetFXExlusionList
                aliases. Effects are organized by environment.
              </p>
            </div>
            <div class="vertigo-environments">
              <div class="vertigo-environment">
                <div class="environment-header">
                  <h4><i class="fas fa-rocket"></i> Space Effects</h4>
                  <div class="environment-controls">
                    <button class="btn btn-small" id="spaceSelectAll">
                      Select All
                    </button>
                    <button class="btn btn-small" id="spaceClearAll">
                      Clear All
                    </button>
                    <span class="effect-count" id="spaceEffectCount"
                      >0 selected</span
                    >
                  </div>
                </div>
                <div class="effects-list" id="spaceEffectsList">
                  <!-- Space effects populated by JavaScript -->
                </div>
              </div>
              <div class="vertigo-environment">
                <div class="environment-header">
                  <h4><i class="fas fa-user"></i> Ground Effects</h4>
                  <div class="environment-controls">
                    <button class="btn btn-small" id="groundSelectAll">
                      Select All
                    </button>
                    <button class="btn btn-small" id="groundClearAll">
                      Clear All
                    </button>
                    <span class="effect-count" id="groundEffectCount"
                      >0 selected</span
                    >
                  </div>
                </div>
                <div class="effects-list" id="groundEffectsList">
                  <!-- Ground effects populated by JavaScript -->
                </div>
              </div>
            </div>
            <div class="vertigo-preview">
              <div class="alias-preview-section">
                <h4>Generated Aliases:</h4>
                <div class="alias-preview" id="spaceAliasPreview">
                  <label>Space Alias:</label>
                  <div class="command-preview" id="spaceAliasCommand">
                    No space effects selected
                  </div>
                </div>
                <div class="alias-preview" id="groundAliasPreview">
                  <label>Ground Alias:</label>
                  <div class="command-preview" id="groundAliasCommand">
                    No ground effects selected
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <div class="vertigo-controls">
            <label class="checkbox-label">
              <input type="checkbox" id="vertigoShowPlayerSay" />
              <span class="checkmark"></span>
              Show Player Say
            </label>
          </div>

          <button class="btn btn-primary" id="saveVertigoBtn">
            Generate Aliases
          </button>
          <button class="btn btn-secondary" data-modal="vertigoModal">
            Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- About Modal -->
    <div class="modal" id="aboutModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="about_sto_tools_keybind_manager"></h3>
          <button class="modal-close" data-modal="aboutModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="about-content">
            <div class="app-info">
              <h4>
                <i class="fas fa-bolt"></i>
                <span data-i18n="sto_tools_keybind_manager"></span>
                <span id="aboutVersion"></span>
              </h4>
              <p>
                A comprehensive web-based tool for creating, editing, and
                managing Star Trek Online keybind configurations with visual
                editing and advanced features.
              </p>
            </div>
            <div class="features">
              <h4>Features:</h4>
              <ul>
                <li>Visual keybind editor</li>
                <li>STO command library with search and categorization</li>
                <li>
                  Multiple profile management (create, clone, rename, delete)
                </li>
                <li>Custom alias system for complex command sequences</li>
                <li>VERTIGO-inspired VFX Manager for visual effects control</li>
                <li>
                  Import/export keybind and alias files, and project backups
                </li>
                <li>Real-time validation and command preview</li>
              </ul>
            </div>
            <div class="usage">
              <h4>Quick Start:</h4>
              <ol>
                <li>Create a new profile or use the default profile</li>
                <li>
                  Select keys from the grid and add commands from the library
                </li>
                <li>Use the command chain editor to build complex sequences</li>
                <li>Export your keybinds as .txt files for use in STO</li>
              </ol>
            </div>
            <div class="contact-info">
              <h4>Resources:</h4>
              <p>
                <i class="fas fa-globe"></i>
                <a
                  href="https://sto-tools.org/"
                  target="_blank"
                  rel="noopener noreferrer"
                  >https://sto-tools.org/</a
                >
                | <i class="fas fa-envelope"></i>
                <a href="mailto:keybinds@sto-tools.org"
                  >keybinds@sto-tools.org</a
                >
              </p>
            </div>
            <div class="copyright">
              <p><small data-i18n="copyright">© 2025 STO Tools. All rights reserved.</small></p>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" data-modal="aboutModal" data-i18n="got_it"></button>
        </div>
      </div>
    </div>

    <!-- Preferences Modal -->
    <div class="modal large-modal" id="preferencesModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="preferences"></h3>
          <button class="modal-close" data-modal="preferencesModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="preferences-layout">
            <!-- Category Tree -->
            <div class="preferences-sidebar">
              <div class="category-tree">
                <div class="category-item active" data-category="sync">
                  <i class="fas fa-sync-alt"></i>
                  <span data-i18n="synchronization"></span>
                </div>
              </div>
            </div>
            
            <!-- Settings Content -->
            <div class="preferences-content">
                              <!-- Sync Settings -->
                <div class="settings-panel active" id="sync-settings">
                  <h4 data-i18n="synchronization_settings"></h4>
                  <div class="settings-group">
                    <div class="setting-item">
                      <label data-i18n="sync_folder_label"></label>
                      <div class="setting-control">
                        <div class="folder-setting">
                          <span id="currentSyncFolder" class="folder-path" data-i18n="no_folder_selected"></span>
                          <button type="button" class="btn btn-secondary" id="setSyncFolderBtn">
                            <i class="fas fa-folder-open"></i>
                            <span data-i18n="set_sync_folder"></span>
                          </button>
                        </div>
                        <span class="setting-description" data-i18n="sync_folder_description"></span>
                      </div>
                    </div>
                    <div class="setting-item">
                      <label data-i18n="auto_sync"></label>
                      <div class="setting-control">
                        <label class="toggle-switch">
                          <input type="checkbox" id="autoSync">
                          <span class="slider"></span>
                        </label>
                        <span class="setting-description" data-i18n="auto_sync_description"></span>
                      </div>
                    </div>
                    <div class="setting-item">
                      <label data-i18n="auto_sync_interval"></label>
                      <div class="setting-control">
                        <select id="autoSyncInterval" class="setting-select">
                          <option value="change" data-i18n="after_every_change"></option>
                          <option value="60" data-i18n="every_1_minute"></option>
                          <option value="120" data-i18n="every_2_minutes"></option>
                          <option value="300" data-i18n="every_5_minutes"></option>
                        </select>
                        <span class="setting-description" data-i18n="auto_sync_interval_description"></span>
                      </div>
                    </div>
                  </div>
                </div>


            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="savePreferencesBtn" data-i18n="save"></button>
          <button class="btn btn-secondary" data-modal="preferencesModal" data-i18n="cancel"></button>
        </div>
      </div>
    </div>

    <!-- File Explorer Modal -->
    <div class="modal large-modal" id="fileExplorerModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="file_explorer"></h3>
          <button class="modal-close" data-modal="fileExplorerModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="file-explorer-content">
            <div class="file-tree" id="fileTree">
              <!-- Tree populated by JavaScript -->
            </div>
            <div class="file-details">
              <div class="file-actions">
                <button
                  class="btn btn-small"
                  id="copyFileContentBtn"
                  data-i18n-title="copy_to_clipboard"
                >
                  <i class="fas fa-copy"></i>
                  <span data-i18n="copy"></span>
                </button>
                <button
                  class="btn btn-small"
                  id="downloadFileBtn"
                >
                  <i class="fas fa-download"></i>
                  <span data-i18n="download"></span>
                </button>
              </div>
              <pre class="file-content" id="fileContent" data-i18n="select_an_item_on_the_left_to_preview_export"></pre>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-modal="fileExplorerModal" data-i18n="close"></button>
        </div>
    </div>
  </div>

    <!-- Export Options Modal -->
    <div class="modal" id="exportModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="select_export_format"></h3>
          <button class="modal-close" data-modal="exportModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="exportFormat" data-i18n="export_as"></label>
            <select id="exportFormat">
              <option value="sto_keybind" data-i18n="sto_keybind_file_txt"></option>
              <option value="json_profile" data-i18n="json_profile_json"></option>
              <option value="json_project" data-i18n="complete_project_json"></option>
              <option value="csv_data" data-i18n="csv_data_csv"></option>
              <option value="html_report" data-i18n="html_report_html"></option>
              <option value="alias_file" data-i18n="alias_file_txt"></option>
            </select>
          </div>
          <div class="form-group">
            <label for="exportEnvironment" data-i18n="environment"></label>
            <select id="exportEnvironment">
              <option value="space" data-i18n="space"></option>
              <option value="ground" data-i18n="ground"></option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="confirmExportBtn" data-i18n="export"></button>
          <button class="btn btn-secondary" data-modal="exportModal" data-i18n="cancel"></button>
        </div>
      </div>
    </div>

    <!-- File input for imports (hidden) -->
    <input
      type="file"
      id="fileInput"
      accept=".json,.txt"
      style="display: none"
    />

    <!-- Scripts -->
    <script src="dist/bundle.js"></script>
  </body>
</html>
